<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lant&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.renyimin.com/"/>
  <updated>2018-05-29T02:20:34.000Z</updated>
  <id>http://blog.renyimin.com/</id>
  
  <author>
    <name>Lant</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>05. ä¸€æ¡æ¶ˆæ¯çš„ä¸€ç”Ÿ</title>
    <link href="http://blog.renyimin.com/2018/05/28/rabbitmq/2018-05-28-rabbitmq-05/"/>
    <id>http://blog.renyimin.com/2018/05/28/rabbitmq/2018-05-28-rabbitmq-05/</id>
    <published>2018-05-28T09:16:23.000Z</published>
    <updated>2018-05-29T02:20:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ°ç°åœ¨, å·²ç»æˆåŠŸå®‰è£…è¿è¡Œäº†Rabbit, å¹¶ä¸”ç®€å•äº†è§£äº†RabbitMQçš„æ¶ˆæ¯é€šä¿¡æœºåˆ¶åŠRabbitå†…éƒ¨çš„ä¸€äº›ç»„ä»¶; æ¥ä¸‹æ¥éœ€è¦å°è¯•ç¼–ç æ¥äº†è§£ä¸€æ¡æ¶ˆæ¯çš„ä¸€ç”Ÿ;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p><p>é€šè¿‡ä¸Šè¿°çš„ç®€å•ä¾‹å­, ä½ å¯èƒ½å‘ç°åƒ <code>äº¤æ¢æœº</code>, <code>é˜Ÿåˆ—</code>, <code>æ¶ˆæ¯</code> éƒ½æœ‰å¾ˆå¤šçš„å±æ€§å¯ä¾›é…ç½®, æ­¤å¤„å…ˆç®€å•ä»‹ç»ä¸¤ä¸ª, å…¶ä½™å±æ€§ä¼´éšç€åç»­çŸ¥è¯†éƒ½ä¼šä¸€ä¸€è¿›è¡Œäº†è§£;</p><ol><li><p>é˜Ÿåˆ—, äº¤æ¢æœºçš„éªŒè¯å±æ€§</p></li><li><p>é€šè¿‡æœ¬ç¯‡, å°†ä¼šè®¤è¯†exchange, queue, msgçš„ `` å±æ€§;</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åˆ°ç°åœ¨, å·²ç»æˆåŠŸå®‰è£…è¿è¡Œäº†Rabbit, å¹¶ä¸”ç®€å•äº†è§£äº†RabbitMQçš„æ¶ˆæ¯é€šä¿¡æœºåˆ¶åŠRabbitå†…éƒ¨çš„ä¸€äº›ç»„ä»¶; æ¥ä¸‹æ¥éœ€è¦å°è¯•ç¼–ç æ¥äº†è§£ä¸€æ¡æ¶ˆæ¯çš„ä¸€ç”Ÿ;&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=
      
    
    </summary>
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/categories/RabbitMQ/"/>
    
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>06. æŒä¹…åŒ–ç­–ç•¥</title>
    <link href="http://blog.renyimin.com/2018/05/28/rabbitmq/2018-05-28-rabbitmq-06/"/>
    <id>http://blog.renyimin.com/2018/05/28/rabbitmq/2018-05-28-rabbitmq-06/</id>
    <published>2018-05-28T09:12:11.000Z</published>
    <updated>2018-05-28T11:54:52.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æŒä¹…åŒ–æ–¹æ¡ˆ"><a href="#æŒä¹…åŒ–æ–¹æ¡ˆ" class="headerlink" title="æŒä¹…åŒ–æ–¹æ¡ˆ"></a>æŒä¹…åŒ–æ–¹æ¡ˆ</h2><p>RabbitMQ é»˜è®¤æƒ…å†µä¸‹, <code>Exchange</code>, <code>é˜Ÿåˆ—</code>, <code>æ¶ˆæ¯</code> éƒ½æ˜¯éæŒä¹…çš„, è¿™æ„å‘³ç€ä¸€æ—¦æ¶ˆæ¯æœåŠ¡å™¨é‡å¯, æ‰€æœ‰å·²å£°æ˜çš„ <code>Exchange</code>, <code>é˜Ÿåˆ—</code>, ä»¥åŠ <code>é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯</code> éƒ½ä¼šä¸¢å¤±;   </p><p>è¦åšåˆ°æ¶ˆæ¯æŒä¹…åŒ–, å¿…é¡»ä¿è¯å¦‚ä¸‹ä¸‰ç‚¹è®¾ç½®æ­£ç¡®:</p><ul><li>exchangeäº¤æ¢å™¨: durableå±æ€§ä¸ºtrue;</li><li>queueé˜Ÿåˆ—: durableå±æ€§ä¸ºtrue;</li><li>é™¤äº†ä¸Šè¿°ä¸¤ç‚¹ä¹‹å¤–, è¿˜éœ€è¦åœ¨æŠ•é€’æ¶ˆæ¯æ—¶å€™, è®¾ç½®messageçš„ <code>delivery_mode</code> æ¨¡å¼ä¸º<code>2</code>æ¥æ ‡è¯†æ¶ˆæ¯ä¸ºæŒä¹…åŒ–æ¶ˆæ¯;<br>è¦çŸ¥é“, ä¸€ä¸ªåŒ…å«æŒä¹…åŒ–æ¶ˆæ¯çš„éæŒä¹…åŒ–é˜Ÿåˆ—, åœ¨Rabbit Serveré‡å¯ä¹‹å, è¯¥é˜Ÿåˆ—å°†ä¼šä¸å¤å­˜åœ¨, æ¶ˆæ¯å°±ä¼šå˜æˆå­¤å„¿;</li></ul><h2 id="æŒä¹…åŒ–åŸç†"><a href="#æŒä¹…åŒ–åŸç†" class="headerlink" title="æŒä¹…åŒ–åŸç†"></a>æŒä¹…åŒ–åŸç†</h2><p>RabbitMQç¡®ä¿æŒä¹…åŒ–çš„æ¶ˆæ¯èƒ½åœ¨æœåŠ¡å™¨é‡å¯ä¹‹åæ¢å¤çš„æ–¹å¼æ˜¯, å°†å®ƒä»¬å†™å…¥ç£ç›˜ä¸Šçš„ä¸€ä¸ªæŒä¹…åŒ–æ—¥å¿—æ–‡ä»¶ã€‚å½“å‘å¸ƒä¸€æ¡æŒä¹…æ€§æ¶ˆæ¯åˆ°ä¸€ä¸ªæŒä¹…äº¤æ¢æœºä¸Šæ—¶, Rabbitä¼šåœ¨æ¶ˆæ¯æäº¤åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ä¹‹åæ‰å‘é€å“åº”; è¿˜éœ€è¦æ³¨æ„çš„æ˜¯, å¦‚æœä¹‹åè¿™æ¡æ¶ˆæ¯è¢«è·¯ç”±åˆ°ä¸€ä¸ªéæŒä¹…åŒ–é˜Ÿåˆ—, åˆ™æ¶ˆæ¯åˆä¼šä»ä¸Šé¢çš„æ—¥å¿—æ–‡ä»¶ä¸­åˆ é™¤, å¹¶ä¸”æ— æ³•ä»æœåŠ¡å™¨é‡å¯ä¸­æ¢å¤;<br>ä¸€æ—¦ä½ ä»æŒä¹…åŒ–é˜Ÿåˆ—ä¸­æ¶ˆè´¹äº†ä¸€æ¡æŒä¹…æ€§æ¶ˆæ¯(å¹¶ä¸”è¿›è¡Œäº†ç¡®è®¤), RabbitMQä¼šåœ¨æŒä¹…åŒ–æ—¥å¿—ä¸­æŠŠè¿™æ¡æ¶ˆæ¯æ ‡è®°ä¸ºç­‰å¾…åƒåœ¾æ”¶é›†;</p><h2 id="æŒä¹…åŒ–çš„é—®é¢˜"><a href="#æŒä¹…åŒ–çš„é—®é¢˜" class="headerlink" title="æŒä¹…åŒ–çš„é—®é¢˜"></a>æŒä¹…åŒ–çš„é—®é¢˜</h2><ul><li>æŒä¹…åŒ–ç”±äºä¼šå†™ç£ç›˜, æ‰€ä»¥ä¼šæå¤§é™ä½RabbitMQæ¯ç§’å¤„ç†çš„æ¶ˆæ¯æ€»æ•°, é™ä½ååé‡;</li><li>æŒä¹…åŒ–åœ¨Rabbitå†…å»ºé›†ç¾¤ç¯å¢ƒä¸‹å·¥ä½œçš„å¹¶ä¸å¥½, åé¢åœ¨å­¦ä¹ é›†ç¾¤æ—¶, ä¼šç»™å‡ºç›¸åº”çš„è§£å†³æ–¹æ¡ˆ;</li></ul><h2 id="å…·ä½“ä»£ç "><a href="#å…·ä½“ä»£ç " class="headerlink" title="å…·ä½“ä»£ç "></a>å…·ä½“ä»£ç </h2><p>ä¸‹é¢é€šè¿‡ä½¿ç”¨ Laravel + php-amqplib æ‰©å±•, é€šè¿‡åˆ›å»ºä¸€ä¸ªæŠ•é€’æ¶ˆæ¯çš„ç”Ÿäº§è€…, å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€æ¡æŒä¹…åŒ–æ¶ˆæ¯:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æŒä¹…åŒ–æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#æŒä¹…åŒ–æ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;æŒä¹…åŒ–æ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;æŒä¹…åŒ–æ–¹æ¡ˆ&lt;/h2&gt;&lt;p&gt;RabbitMQ é»˜è®¤æƒ…å†µä¸‹, &lt;code&gt;Exchange&lt;/code&gt;, &lt;code&gt;é˜Ÿåˆ—&lt;/code&gt;, &lt;c
      
    
    </summary>
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/categories/RabbitMQ/"/>
    
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>secret</title>
    <link href="http://blog.renyimin.com/2018/05/28/2018-05-28-secret/"/>
    <id>http://blog.renyimin.com/2018/05/28/2018-05-28-secret/</id>
    <published>2018-05-28T05:02:56.000Z</published>
    <updated>2018-05-28T05:30:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>æƒ³è±¡åŠ›å°±æ˜¯ä¸€åˆ‡, å®ƒæ˜¯å£°æ˜å°†å‘ç”Ÿä¹‹äº‹çš„é¢„è§ˆ â€“ çˆ±å› æ–¯å¦ (1879-1955)</p><p>è¦è¾¾æˆä½ ç”Ÿå‘½ä¸­æƒ³è¦çš„ä¸€åˆ‡, å…¶æ·å¾„å°±æ˜¯ â€“ å½“ä¸‹å°±â€æ˜¯â€å¿«ä¹çš„, å¹¶ä¸”â€æ„Ÿè§‰â€å¿«ä¹! è¿™æ˜¯æŠŠé‡‘é’±å’Œå…¶ä»–ä½ æƒ³è¦çš„äº‹ç‰©å¸¦è¿›ä½ ç”Ÿå‘½ä¸­æœ€å¿«çš„æ–¹å¼ã€‚</p><p>æˆ‘ç°åœ¨ç»ˆäºäº†è§£, å¯Œè¶³æ­£åœ¨é‚£å„¿ç­‰ç€æˆ‘ã€‚æˆ‘çš„ä»»åŠ¡ä¸æ˜¯å»æƒ³å‡ºé‡‘é’±è¦â€å¦‚ä½•â€åˆ°æ¥, è€Œæ˜¯å»è¦æ±‚, å»ç›¸ä¿¡æˆ‘å·²ç»åœ¨æ¥æ”¶è´¢å¯Œ, ä»¥åŠå½“ä¸‹å°±å»æ„Ÿè§‰å¹¸ç¦å¿«ä¹, è‡³äºå…¶ç»†èŠ‚, å°±äº¤ç»™å®‡å®™å»å¤„ç†å§!  </p><p>ğŸ’°æ¥çš„<strong>å®¹æ˜“</strong>è€Œä¸”<strong>é¢‘ç¹</strong>!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æƒ³è±¡åŠ›å°±æ˜¯ä¸€åˆ‡, å®ƒæ˜¯å£°æ˜å°†å‘ç”Ÿä¹‹äº‹çš„é¢„è§ˆ â€“ çˆ±å› æ–¯å¦ (1879-1955)&lt;/p&gt;
&lt;p&gt;è¦è¾¾æˆä½ ç”Ÿå‘½ä¸­æƒ³è¦çš„ä¸€åˆ‡, å…¶æ·å¾„å°±æ˜¯ â€“ å½“ä¸‹å°±â€æ˜¯â€å¿«ä¹çš„, å¹¶ä¸”â€æ„Ÿè§‰â€å¿«ä¹! è¿™æ˜¯æŠŠé‡‘é’±å’Œå…¶ä»–ä½ æƒ³è¦çš„äº‹ç‰©å¸¦è¿›ä½ ç”Ÿå‘½ä¸­æœ€å¿«çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ç°åœ¨ç»ˆäºäº†è§£, å¯Œè¶³æ­£
      
    
    </summary>
    
      <category term="secret" scheme="http://blog.renyimin.com/categories/secret/"/>
    
    
      <category term="secret" scheme="http://blog.renyimin.com/tags/secret/"/>
    
  </entry>
  
  <entry>
    <title>04. æµ…æRabbitMQé€šä¿¡è¿‡ç¨‹</title>
    <link href="http://blog.renyimin.com/2018/05/27/rabbitmq/2018-05-27-rabbitmq-04/"/>
    <id>http://blog.renyimin.com/2018/05/27/rabbitmq/2018-05-27-rabbitmq-04/</id>
    <published>2018-05-27T10:30:26.000Z</published>
    <updated>2018-05-29T05:41:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å› ä¸ºRabbitMQä¸“æ³¨äºåº”ç”¨ç¨‹åºä¹‹é—´çš„æ¶ˆæ¯é€šä¿¡, æ‰€ä»¥åœ¨å¼€å§‹å°è¯•ä½¿ç”¨Rabbitè¿›è¡Œæ¶ˆæ¯é€šä¿¡å‰, æ¸…æ¥šåœ°ç†è§£é€šä¿¡æ¨¡å¼çš„æ¦‚å¿µæ˜¯éå¸¸é‡è¦çš„;</p><p>ä¸‹é¢æ˜¯ä¸€å¼ æ¯”è¾ƒç®€å•çš„Rabbitæ¶ˆæ¯é€šä¿¡æ¶æ„å›¾<br><img src="/img/rabbitmq/rabbitmq-new.png"></p><h2 id="Broker-Server-Rabbit-Server"><a href="#Broker-Server-Rabbit-Server" class="headerlink" title="Broker Server (Rabbit Server)"></a>Broker Server (Rabbit Server)</h2><p>RabbitMQæ˜¯ä½œä¸ºä¸€ä¸ªæ¶ˆæ¯æŠ•é€’çš„<strong>ä¸­é—´ä»£ç†æœåŠ¡å™¨</strong>å­˜åœ¨çš„(brokeræœ‰ ä¸­é—´äºº, ä»£ç†äººçš„æ„æ€); åº”ç”¨ç¨‹åºä»RabbitMQè·å–çš„æ•°æ®å¹¶ä¸æ˜¯Rabbitäº§ç”Ÿçš„, å¯ä»¥è®¤ä¸ºå®ƒåœ¨åº”ç”¨ç¨‹åºä¹‹é—´æ‰®æ¼”ç€<strong>è·¯ç”±å™¨</strong>çš„è§’è‰²;</p><p>æ‰€ä»¥åœ¨ä½¿ç”¨Rabbitè¿›è¡Œæ¶ˆæ¯é€šä¿¡æ—¶, å½“åº”ç”¨ç¨‹åºè¿æ¥åˆ°RabbitMQæ—¶, ä½ å°±å¿…é¡»åšä¸ªå†³å®š, æ­¤æ—¶ä½ çš„åº”ç”¨ç¨‹åºæ˜¯å‡†å¤‡ä½œä¸ºç”Ÿäº§è€…å‘é€æ¶ˆæ¯å‘¢, è¿˜æ˜¯ä½œä¸ºæ¶ˆè´¹è€…æ¥æ¥æ”¶æ¶ˆæ¯;</p><h2 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h2><p>Connectionå…¶å®å°±æ˜¯ä¸€ä¸ªTCPçš„è¿æ¥, æ— è®ºä½ çš„åº”ç”¨ç¨‹åºæ˜¯ä½œä¸º <code>Producer</code> è¿˜æ˜¯ <code>Consumer</code>, éƒ½æ˜¯é€šè¿‡TCPè¿æ¥åˆ°RabbitMQ Serverçš„, ä»»ä½•ä¸Rabbit Serverå†…éƒ¨äº¤äº’çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦é€šè¿‡TCPè¿æ¥åˆ°RabbitMQ Server, åé¢ä¼šçœ‹åˆ°, <strong>ç¨‹åºçš„èµ·å§‹å°±æ˜¯å»ºç«‹è¿™ä¸ªTCPè¿æ¥</strong>;<br>Connectionæ˜¯RabbitMQçš„socketé“¾æ¥, å®ƒå°è£…äº†socketåè®®ç›¸å…³éƒ¨åˆ†é€»è¾‘;</p><h2 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h2><p>Channel æ˜¯æˆ‘ä»¬ä¸RabbitMQæ‰“äº¤é“çš„æœ€é‡è¦çš„ä¸€ä¸ªæ¥å£, æˆ‘ä»¬å¤§éƒ¨åˆ†çš„ä¸šåŠ¡æ“ä½œæ˜¯åœ¨channelè¿™ä¸ªæ¥å£ä¸­å®Œæˆçš„ (åŒ…æ‹¬ <code>å®šä¹‰exchange</code>, <code>å®šä¹‰queue</code>, <code>ç»‘å®šexchangeä¸queue</code>ã€<code>å‘å¸ƒæ¶ˆæ¯</code> ç­‰);</p><p>Channel æ˜¯è™šæ‹Ÿè¿æ¥, å®ƒå»ºç«‹åœ¨ä¸Šè¿°çš„TCPè¿æ¥ <code>connection</code> ä¸­, æ•°æ®æµåŠ¨éƒ½æ˜¯åœ¨channelä¸­è¿›è¡Œçš„, ç¨‹åºèµ·å§‹ç¬¬ä¸€æ­¥å°±æ˜¯å»ºç«‹TCPè¿æ¥ <code>Connection</code>, ç¬¬äºŒæ­¥å°±æ˜¯å»ºç«‹ä¿¡é“ <code>Channel</code>;</p><p>ä¸ºä»€ä¹ˆä½¿ç”¨Channel, è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨TCPè¿æ¥ï¼Ÿ<br>å¯¹äºOSæ¥è¯´, å»ºç«‹å’Œå…³é—­TCPè¿æ¥æ˜¯æœ‰ä»£ä»·çš„, é¢‘ç¹çš„å»ºç«‹å…³é—­TCPè¿æ¥å¯¹äºç³»ç»Ÿçš„æ€§èƒ½æœ‰å¾ˆå¤§çš„å½±å“, è€Œä¸”TCPçš„è¿æ¥æ•°ä¹Ÿæœ‰é™åˆ¶, è¿™ä¹Ÿé™åˆ¶äº†ç³»ç»Ÿå¤„ç†é«˜å¹¶å‘çš„èƒ½åŠ›;<br>ä½†æ˜¯ï¼Œåœ¨TCPè¿æ¥ä¸­å»ºç«‹channelæ˜¯æ²¡æœ‰ä¸Šè¿°ä»£ä»·çš„, å¯¹äº <code>producer</code> æˆ–è€… <code>consumer</code> æ¥è¯´, å¯ä»¥å¹¶å‘çš„ä½¿ç”¨å¤šä¸ªchannelè¿›è¡Œ â€˜publishâ€™æˆ–è€…â€™receiveâ€™;</p><h3 id="Exchange"><a href="#Exchange" class="headerlink" title="Exchange"></a>Exchange</h3><p>åœ¨ä½ çš„åº”ç”¨ç¨‹åºè¿æ¥åˆ°Rabbit Serverå, Producerå‘å¸ƒçš„æ¶ˆæ¯å¹¶ä¸ä¼šç›´æ¥è¢«Rabbit ServeræŠ•é€’åˆ°queueä¸­, å€¼å¾—æ³¨æ„çš„æ˜¯: æ¶ˆæ¯æ°¸è¿œä¸å¯èƒ½è¢«ç›´æ¥å‘é€åˆ°Rabbit Serverçš„Queueä¸­, å®ƒæ€»æ˜¯ä¼šç»è¿‡Rabbit Serverå†…éƒ¨çš„ <strong>exchangeäº¤æ¢æœº</strong>;</p><p>ä¸ºä»€ä¹ˆRabbit Serverä¸æ˜¯å°†ç”Ÿäº§è€…æŠ•é€’çš„æ¶ˆæ¯ç›´æ¥å‘é€åˆ°é˜Ÿåˆ—, è€Œå¿…é¡»è¦ç»è¿‡å†…éƒ¨çš„exchangeç»„ä»¶? æ¯•ç«Ÿå¯¹äºç”Ÿäº§è€…æ¥è¯´, åªæ˜¯å¸Œæœ›æ¶ˆæ¯èƒ½å¤Ÿåˆ°é˜Ÿåˆ—è€Œå·², Rabbit Serverä¸­ä¸ºå•¥è¿˜å¤šäº†ä¸€æ­¥?</p><ul><li>å¦‚æœæ²¡æœ‰exchangeå†…éƒ¨ç»„ä»¶, å¯¹äºç”Ÿäº§è€…æŠ•é€’æ¥çš„æ¶ˆæ¯, brokerå…¶å®è²Œä¼¼ä¹Ÿå¯ä»¥æ ¹æ®æ¶ˆæ¯å†…å®¹ä¸­çš„æŸä¸ªå±æ€§æ¥åˆ¤æ–­æ¶ˆæ¯è¯¥æŠ•é€’ç»™å“ªä¸ªé˜Ÿåˆ—, æˆ–è€…ä¹Ÿå¯ä»¥æŒ‡å®šæŠ•é€’ç»™å…¨éƒ¨é˜Ÿåˆ—, æˆ–è€…æ ¹æ®æ­£åˆ™æ¥æŠ•é€’ç»™æŸäº›é˜Ÿåˆ—; ä½†è¿™æ ·çš„è¯, ç›¸å½“äºç”Ÿäº§è€…å’Œé˜Ÿåˆ—ç›´æ¥é¢å¯¹é¢åšäº†å¼ºç»‘å®š;</li><li>è€Œå¦‚æœæœ‰exchangeçš„è¯, å¯¹äºç»‘å®šå’Œè§£æç»‘å®š, ç›´æ¥äº¤ç”±exchangeæ¥è¿›è¡Œå³å¯, è¿™æ ·åœ¨å†…éƒ¨ä¹Ÿåšåˆ°äº†è§£è€¦å’Œå•ä¸€èŒè´£çš„åˆ’åˆ†, è¿™æ ·å°±å¯ä»¥å°†ä¸€äº›ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹å‡ºæ¥(æ¯”æ–¹ä½ æ˜¯è¦ç¾¤å‘, è¿˜æ˜¯æŒ‡å®šé˜Ÿåˆ—å‘é€, æˆ–è€…åŒ¹é…é˜Ÿåˆ—å‘é€, è¿™äº›ç»‘å®šå’Œè§£æå·¥ä½œéƒ½ç”±exchangeåœ¨ç”Ÿäº§è€…å’Œé˜Ÿåˆ—ä¸­é—´è¿›è¡Œå¤„ç†, ç”Ÿäº§è€…å’Œé˜Ÿåˆ—ä¸éœ€è¦ç›´æ¥é¢å¯¹é¢);</li></ul><p>åœ¨RabbitMQä¸­, exchangeç»„ä»¶æœ‰å››ç§ç±»å‹ ï¼š</p><ul><li><p><code>direct</code> :<br>ä½¿ç”¨è¿™ç§ç±»å‹, ä¼šå°†ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶è®¾ç½®çš„ <code>routingkey</code> ä¸ queueå’Œexchangeç»‘å®šæ—¶çš„ <code>bindingkey</code> è¿›è¡Œ<strong>ç²¾ç¡®åŒ¹é…</strong>, å¦‚æœ <code>routingkey</code> å’Œ <code>bindingkey</code> å®Œå…¨ä¸€æ ·, é‚£ä¹ˆMessageå°±ä¼šè¢«ä¼ é€’åˆ°å½“å‰exchangeçš„å¯¹åº”queueä¸­;<br>å¦‚æœä½¿ç”¨äº†directç±»å‹Exchange, ç»‘å®šé˜Ÿåˆ—å’Œexchangeæ—¶, å¯ä»¥ä¸å¿…æŒ‡å®š <code>routingkey</code> çš„åå­—, åœ¨æ­¤ç±»å‹ä¸‹åˆ›å»ºçš„queueæœ‰ä¸€ä¸ªé»˜è®¤çš„ <code>routingkey</code>, è¿™ä¸ª <code>routingkey</code> ä¸€èˆ¬å’Œ <code>queue</code> åŒå;<br><strong>æ³¨æ„</strong>: è™½ç„¶ä¸å¯ä»¥åˆ›å»ºä¸¤ä¸ªç›¸åŒåå­—çš„é˜Ÿåˆ—, ä½†æ˜¯å¤šä¸ªä¸åŒåçš„é˜Ÿåˆ—ä¸exchangeè¿›è¡Œç»‘å®šæ—¶, <code>bindingkey</code> å¯ä»¥ç›¸åŒ; æ‰€ä»¥å¯èƒ½ä¼šæœ‰å¤šä¸ªé˜Ÿåˆ—çš„<code>bindingkey</code>éƒ½ ä¸ åŒä¸€æ¡æ¶ˆæ¯å‘å¸ƒæ—¶çš„<code>routingkey</code>å¯ä»¥åŒ¹é…, ä»è€Œå¯¼è‡´åŒä¸€æ¡æ¶ˆæ¯è¢«exchangeè·¯ç”±åˆ°å¤šä¸ªé˜Ÿåˆ—ä¸­!</p></li><li><p><code>fanout</code>:<br>ä½¿ç”¨è¿™ç§ç±»å‹, ä¼šå°†ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶è®¾ç½®çš„ <code>routingkey</code> ä¸ queueå’Œexchangeç»‘å®šæ—¶çš„ <code>bindingkey</code> è¿›è¡Œ<strong>æ¨¡å¼åŒ¹é…</strong>(æ­£åˆ™åŒ¹é…)<br>æ¯”å¦‚ ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶è®¾ç½®çš„<code>routing key</code>ä¸º <code>ab*</code>, åˆ™å¯ä»¥ä¸ <code>bindingkey</code> ä¸º <code>ab</code> å¼€å¤´çš„æ‰€æœ‰çš„queueåŒ¹é…;</p></li><li><p><code>topic</code> ï¼š<br>ä½¿ç”¨è¿™ç§ç±»å‹, ä¼šå¿½ç•¥<code>routingkey</code>çš„å­˜åœ¨, ç›´æ¥å°†æ¶ˆæ¯å¹¿æ’­åˆ°æ‰€æœ‰ä¸å½“å‰exchangeç»‘å®šçš„queueä¸­; </p></li><li><p><code>headers</code> : ä¸å¤ªå®ç”¨, è€Œä¸”æ€§èƒ½æ¯”è¾ƒå·®, å‡ ä¹å†ä¹Ÿç”¨ä¸åˆ°äº†</p></li></ul><h3 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h3><p>ç”Ÿäº§è€…æŠ•é€’ç»™broker serverçš„æ¶ˆæ¯, æœ€ç»ˆä¼šè¢«å†…éƒ¨ç»„ä»¶exchangeè·¯ç”±åˆ°åŒ¹é…çš„é˜Ÿåˆ—ä¸­, ç­‰å¾…consumerså¤„ç†;</p><p>é˜Ÿåˆ—åœ¨å£°æ˜å, éœ€è¦ä¸exchangeè¿›è¡Œç»‘å®š (ç»‘å®šæ—¶ä¼šä½¿ç”¨ä¸€ä¸ªå« routingkey çš„ä¸œè¥¿, è¿™é‡Œæˆ‘ä¸€èˆ¬ä¼šå«ä»– bindingkey); </p><p>æ³¨æ„: å¦‚æœä½ ä¸èƒ½æ‰¿æ‹…æ¶ˆæ¯ä¸¢å…¥â€é»‘æ´â€è€Œä¸¢å¤±çš„è¯, ä½ çš„åº”ç”¨æ— è®ºæ˜¯ç”Ÿäº§è€…è¿˜æ˜¯æ¶ˆè´¹è€…, éƒ½åº”è¯¥å°è¯•å»åˆ›å»ºé˜Ÿåˆ—;</p><p>é˜Ÿåˆ—æœ‰å¾ˆå¤šå‚æ•°å±æ€§å¯ä»¥è®¾ç½®, åé¢åœ¨ä»£ç ä¸­ç»ä¼šä¸€ä¸€å±•ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒçš„è¿™äº›å±æ€§;</p><h3 id="BindingKey"><a href="#BindingKey" class="headerlink" title="BindingKey"></a>BindingKey</h3><p>é˜Ÿåˆ—åœ¨å£°æ˜å, éœ€è¦ä¸exchangeè¿›è¡Œç»‘å®š, ç»‘å®šçš„æ—¶å€™å¯ä»¥æ˜¾ç¤ºåœ°åŒºæŒ‡å®šä¸€ä¸ª <code>routingkey</code>, è¿™é‡Œæˆ‘ä»¬å« <code>bindingkey</code>;<br>æ³¨æ„: é˜Ÿåˆ—åœ¨ä¸exchangeç»‘å®šæ—¶, å¦‚æœæ²¡æœ‰æ˜¾ç¤ºåœ°å»è®¾ç½® <code>bindingkey</code>, æ­¤æ—¶ <code>bindingkey</code> é»˜è®¤ä¸ºé˜Ÿåˆ—åå­—;</p><h2 id="Producer"><a href="#Producer" class="headerlink" title="Producer"></a>Producer</h2><p>å›¾ä¸­å·¦ä¾§çš„å®¢æˆ·ç«¯ç¨‹åºâ€™A,Bâ€™, å…¶å®å°±æ˜¯ç”Ÿäº§è€…: è¿æ¥åˆ° Rabbit Server , å¹¶å°†æ¶ˆæ¯æŠ•é€’åˆ° Rabbit Server, ç„¶åç”±exchangeäº¤æ¢æœºå†³å®šè¯¥å¦‚ä½•è½¬å‘æ¶ˆæ¯åˆ°é˜Ÿåˆ—ä¸­;<br>Produceræ°¸è¿œä¸å¯èƒ½ç›´æ¥å°†æ¶ˆæ¯ä¸¢åˆ°queueä¸­;</p><h2 id="RoutingKey"><a href="#RoutingKey" class="headerlink" title="RoutingKey"></a>RoutingKey</h2><p>ç”Ÿäº§è€…åœ¨æ¶ˆæ¯å‘å¸ƒæ—¶, éœ€è¦æŒ‡æ˜æ¶ˆæ¯çš„ <code>routingkey</code>, exchangeåˆ™ä¼šä¾æ®æ­¤<code>routingkey</code>å»åŒ¹é… ä¸ è‡ªèº«ç»‘å®šçš„é‚£äº›é˜Ÿåˆ—åœ¨ç»‘å®šæ—¶ æ‰€æ˜¾ç¤ºæˆ–éæ˜¾ç¤ºè®¾ç½®çš„ <code>bindingkey</code>, ä»è€Œå†³å®šæ¶ˆæ¯å°†ä¼šè¢«è·¯ç”±åˆ°ä¸è‡ªèº«ç»‘å®šçš„å“ªäº›é˜Ÿåˆ—ä¸­;<br>å½“ç„¶, å¦‚æœexchangeè®¾ç½®çš„typeæ˜¯<code>topic</code>ç±»å‹, åˆ™ä¼šå¿½ç•¥ <code>routingkey</code> å’Œ <code>bindingkey</code> çš„å­˜åœ¨;</p><h2 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h2><p>å›¾ä¸­å³ä¾§çš„å®¢æˆ·ç«¯ç¨‹åºâ€™1,2,3â€™, å…¶å®å°±æ˜¯æ¶ˆè´¹è€…: è¿æ¥åˆ° Rabbit Server , å¹¶ä» Rabbit Server ä¸­æ¥æ”¶æ¶ˆæ¯;</p><p>å‘é€æ¶ˆæ¯æ—¶éœ€è¦æŒ‡å®š routingkey, å¦‚æœæ²¡æœ‰æŒ‡å®šroutingkeyæˆ–è€…æŒ‡å®šçš„routingkeyåŒ¹é…ä¸åˆ°å¯¹åº”çš„bindingkey, æ¶ˆæ¯ä¼šè¢« Rabbit æœåŠ¡ä¸¢å¼ƒæ‰, æ‰å…¥â€é»‘æ´â€;</p><p>å¦å¤–, consumeråœ¨å¤„ç†å®Œæ¶ˆæ¯ä¹‹å, </p><h2 id="vhost"><a href="#vhost" class="headerlink" title="vhost"></a>vhost</h2><p>æœ€å, è¿˜æœ‰ä¸€ä¸ªåœ¨å›¾ä¸­å¹¶æœªä½“ç°å‡ºæ¥çš„æ¦‚å¿µ <code>vhost</code></p><p>æ¯ä¸€ä¸ªRabbitMQæœåŠ¡å™¨éƒ½èƒ½åˆ›å»ºè™šæ‹Ÿæ¶ˆæ¯æœåŠ¡å™¨, æˆ‘ä»¬ç§°ä¹‹ä¸ºè™šæ‹Ÿä¸»æœº(<code>vhost</code>), æ¯ä¸€ä¸ª <code>vhost</code> æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ª mini ç‰ˆçš„ RabbitMQ Server, æ‹¥æœ‰è‡ªå·±çš„ <code>exchagne</code>, <code>queue</code>, å’Œ <code>bindings rule</code> ç­‰ç­‰, æ›´é‡è¦çš„æ˜¯, å®ƒè¿˜æ‹¥æœ‰è‡ªå·±çš„ <code>æƒé™æœºåˆ¶</code>, è¿™ä½¿å¾—ä½ èƒ½å¤Ÿå®‰å…¨åœ°ä½¿ç”¨ä¸€ä¸ªRabbitMQæœåŠ¡å™¨æ¥æœåŠ¡ä¼—å¤šåº”ç”¨ç¨‹åº, è€Œä¸ç”¨æ‹…å¿ƒAåº”ç”¨å¯èƒ½ä¼šåˆ é™¤Båº”ç”¨æ­£åœ¨ä½¿ç”¨çš„é˜Ÿåˆ—;</p><p>vhostä¹‹äºRabbitå°±åƒè™šæ‹Ÿæœºä¹‹äºç‰©ç†æœåŠ¡å™¨ä¸€æ ·: é€šè¿‡åœ¨å„ä¸ªå®ä¾‹é—´æä¾›é€»è¾‘ä¸Šéš”ç¦», å…è®¸ä½ ä¸ºä¸åŒåº”ç”¨ç¨‹åºå®‰å…¨ä¿å¯†åœ°è¿è¡Œæ•°æ®, è¿™å¾ˆæœ‰ç”¨, å®ƒæ—¢èƒ½å°†åŒä¸€Rabbitçš„ä¼—å¤šå®¢æˆ·ç«¯åŒºåˆ†å¼€æ¥, åˆå¯ä»¥é¿å…é˜Ÿåˆ—å’Œäº¤æ¢å™¨çš„å‘½åå†²çª; å¦åˆ™, ä½ å¯èƒ½ä¸å¾—ä¸å»è¿è¡Œå¤šä¸ªRabbit, å¹¶æ‰¿æ‹…éšä¹‹è€Œæ¥çš„ç®¡ç†é—®é¢˜, ç›¸å, ä½ å¯ä»¥åªè¿è¡Œä¸€ä¸ªRabbit, ç„¶åæŒ‰éœ€å¯åŠ¨æˆ–è€…å…³é—­vhost;<br>å½“ä½ æœ‰å¤šä¸ªä¸åŒçš„åº”ç”¨è¦ä½¿ç”¨RabbitMQæ—¶, ä½ å¯ä»¥ä¸ºæ¯ä¸ªåº”ç”¨å®šä¹‰ä¸€ä¸ªvhostæ¥å°†åº”ç”¨ä»é€»è¾‘ä¸Šéš”ç¦»å¼€;</p><p>vhostæ˜¯AMQPæ¦‚å¿µçš„åŸºç¡€, ä½ å¿…é¡»åœ¨è¿æ¥æ—¶è¿›è¡ŒæŒ‡å®š, ç”±äºRabbitMQåŒ…å«äº†å¼€ç®±å³ç”¨çš„é»˜è®¤vhost: <code>/</code> , å› æ­¤æ—¶å€™ç”¨èµ·æ¥éå¸¸ç®€å•, å¦‚æœä½ ä¸éœ€è¦å¤šä¸ªvhostçš„è¯, å°±ä½¿ç”¨é»˜è®¤çš„å³å¯;<br>é€šè¿‡ä½¿ç”¨é»˜è®¤çš„guestç”¨æˆ·åå’Œå¯†ç guest, å°±å¯ä»¥è®¿é—®é»˜è®¤çš„ vhost, ä¸ºäº†å®‰å…¨èµ·è§, ä½ åº”è¯¥æ›´æ”¹å®ƒ;</p><p>AMQP å¹¶æ²¡æœ‰æŒ‡å®šæƒé™æ§åˆ¶æ˜¯åœ¨vhostçº§åˆ«è¿˜æ˜¯åœ¨æœåŠ¡å™¨ç«¯çº§åˆ«å®ç°, è¿™ç•™ç»™äº†æ¶ˆæ¯æœåŠ¡å™¨çš„å¼€å‘è€…å»å†³å®š, è€Œ<strong>åœ¨RabbitMQä¸­, æƒé™æ§åˆ¶æ˜¯ä»¥<code>vhost</code>ä¸ºå•ä½çš„</strong>, å½“ä½ åœ¨Rabbité‡Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·æ—¶, ç”¨æˆ·é€šå¸¸ä¼šè¢«æŒ‡æ´¾ç»™è‡³å°‘ä¸€ä¸ªvhost, å¹¶ä¸”åªèƒ½è®¿é—®è¢«æŒ‡æ´¾çš„vhostå†…çš„é˜Ÿåˆ—, äº¤æ¢æœºå’Œç»‘å®š;<br>å½“ä½ åœ¨è®¾è®¡æ¶ˆæ¯é€šä¿¡æ¶æ„æ—¶, è®°ä½vhostä¹‹é—´æ˜¯ç»å¯¹éš”ç¦»çš„, ä½ æ— æ³•å°† vhost â€˜aâ€™ ä¸­çš„äº¤æ¢æœºç»‘å®šåˆ° vhost â€˜bâ€™ ä¸­çš„é˜Ÿåˆ—å»;</p><p>å¦å¤–éœ€è¦æ³¨æ„: å½“ä½ åœ¨RabbitMQé›†ç¾¤ä¸Šåˆ›å»ºvhostæ—¶, æ•´ä¸ªé›†ç¾¤ä¸Šéƒ½ä¼šåˆ›å»ºè¯¥vhost;</p><p>å¦‚ä½•åˆ›å»ºvhost? vhostå’Œæƒé™æ§åˆ¶éå¸¸ç‹¬ç‰¹, å®ƒä»¬æ˜¯AMQPä¸­å”¯ä¸€æ— æ³•é€šè¿‡AMQPåè®®åˆ›å»ºçš„åŸºå…ƒ(ä¸åŒäºé˜Ÿåˆ—, äº¤æ¢æœºå’Œç»‘å®š), å¯¹äºRabbitMQæ¥è¯´, ä½ éœ€è¦é€šè¿‡ RabbitMQ å®‰è£…è·¯å¾„ä¸‹ <code>./sbin/</code> ç›®å½•ä¸­çš„ <code>rabbitmqctl</code> å·¥å…·æ¥åˆ›å»º</p><ul><li><p>å¦‚æœæƒ³çŸ¥é“ç‰¹å®šrabbitmqæœåŠ¡å™¨ä¸Šè¿è¡Œç€å“ªäº›vhostæ—¶, å¯ä»¥æ‰§è¡Œ</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:~ renyimin$ rabbitmqctl list_vhosts</div><div class="line">Listing vhosts</div><div class="line">/</div></pre></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ªvhost</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:~ renyimin$ rabbitmqctl add_vhost test</div><div class="line">Creating vhost &quot;test&quot;</div></pre></td></tr></table></figure></li><li><p>åˆ é™¤ä¸€ä¸ªvhost</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:~ renyimin$ rabbitmqctl delete_vhost test</div><div class="line">Deleting vhost &quot;test&quot;</div></pre></td></tr></table></figure></li></ul><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>è¿™ä¸€éƒ¨åˆ†åªæ˜¯å¤§æ¦‚äº†è§£ä¸€ä¸‹RabbitMQæœåŠ¡ä¸€äº›æ¦‚å¿µæ€§çŸ¥è¯†, å½“ç„¶, å…³äºè¿™äº›çŸ¥è¯†ç‚¹åœ¨åé¢è¿›è¡Œç¼–ç çš„æ—¶å€™ä¼šè¿›è¡Œè¿›ä¸€æ­¥æ‰©å±•, æ¯”å¦‚ é˜Ÿåˆ—, æ¶ˆæ¯, äº¤æ¢æœºçš„<strong>è¯¸å¤šå±æ€§</strong>éƒ½ä¼šæ¶‰åŠåˆ°;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å› ä¸ºRabbitMQä¸“æ³¨äºåº”ç”¨ç¨‹åºä¹‹é—´çš„æ¶ˆæ¯é€šä¿¡, æ‰€ä»¥åœ¨å¼€å§‹å°è¯•ä½¿ç”¨Rabbitè¿›è¡Œæ¶ˆæ¯é€šä¿¡å‰, æ¸…æ¥šåœ°ç†è§£é€šä¿¡æ¨¡å¼çš„æ¦‚å¿µæ˜¯éå¸¸é‡è¦çš„;&lt;
      
    
    </summary>
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/categories/RabbitMQ/"/>
    
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>03. æœåŠ¡å™¨ç®¡ç†</title>
    <link href="http://blog.renyimin.com/2018/05/27/rabbitmq/2018-05-27-rabbitmq-03/"/>
    <id>http://blog.renyimin.com/2018/05/27/rabbitmq/2018-05-27-rabbitmq-03/</id>
    <published>2018-05-27T10:20:09.000Z</published>
    <updated>2018-05-28T09:07:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç» ä¸‹è½½å®‰è£…å¹¶æˆåŠŸå¯åŠ¨äº†RabbitmqæœåŠ¡, æ¥ä¸‹æ¥, å¯ä»¥ç®€å•äº†è§£ä¸€äº›ä¸æœåŠ¡å™¨ç®¡ç†ç›¸å…³çš„çŸ¥è¯†ç‚¹;</p><h2 id="Erlang-å’Œ-Erlang-Cookie"><a href="#Erlang-å’Œ-Erlang-Cookie" class="headerlink" title="Erlang å’Œ Erlang Cookie"></a>Erlang å’Œ Erlang Cookie</h2><h2 id="å‘½ä»¤è¡Œçš„åŸºæœ¬ä½¿ç”¨"><a href="#å‘½ä»¤è¡Œçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="å‘½ä»¤è¡Œçš„åŸºæœ¬ä½¿ç”¨"></a>å‘½ä»¤è¡Œçš„åŸºæœ¬ä½¿ç”¨</h2><p>RabbitMQçš„å¯åŠ¨å¯ä»¥åœ¨å®‰è£…ç›®å½•ä¸‹çš„ â€˜sbin/â€˜ ç›®å½•ä¸‹, è¿è¡Œ <code>rabbitmq-server -detached</code> æ¥å¯åŠ¨åæ¥è¿è¡Œ;<br>å¦‚æœå¯åŠ¨ä¸­é‡åˆ°äº†ä»»ä½•é”™è¯¯, å¯ä»¥æ£€æŸ¥RabbitMQçš„æ—¥å¿—æ–‡ä»¶; å¦‚æœ<strong>ä¸çŸ¥é“æ—¥å¿—æ–‡ä»¶çš„ä½ç½®</strong>, å¯ä»¥æŸ¥çœ‹:<br><img src="/img/rabbitmq/rabbitmq-file-path.png" width="400"><br><img src="/img/rabbitmq/rabbitmq-file-path-02.png" width="400"></p><p>2.</p><h2 id="é…ç½®ç›¸å…³"><a href="#é…ç½®ç›¸å…³" class="headerlink" title="é…ç½®ç›¸å…³"></a><a href="http://www.rabbitmq.com/configure.html" target="_blank" rel="external">é…ç½®ç›¸å…³</a></h2><p>ä¸€èˆ¬æƒ…å†µä¸‹, RabbitMQçš„é»˜è®¤é…ç½®å°±è¶³å¤Ÿäº†, é€šè¿‡åœ¨Webç®¡ç†å¹³å°å¯ä»¥çœ‹åˆ°, é»˜è®¤æ˜¯æ²¡æœ‰é…ç½®æ–‡ä»¶çš„; å¦‚æœå¸Œæœ›ç‰¹æ®Šè®¾ç½®çš„è¯, æœ‰å‡ ä¸ªä½ç½®å¯ä»¥è¿›è¡Œé…ç½®;<br>æ³¨æ„, æ–‡ä»¶é»˜è®¤æ˜¯æ²¡æœ‰çš„, å¦‚æœéœ€è¦å¿…é¡»è‡ªå·±åˆ›å»º, è‡³äºåˆ›å»ºé…ç½®æ–‡ä»¶çš„ä½ç½®åœ¨å“ªé‡Œ, å¯ä»¥é€šè¿‡æ—¥å¿—æ–‡ä»¶æ¥æŸ¥çœ‹:</p><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">enyimindembp:rabbitmq renyimin$ pwd</div><div class="line">/usr/local/var/log/rabbitmq</div><div class="line">renyimindembp:rabbitmq renyimin$ ls</div><div class="line">lograbbit@localhost-sasl.lograbbit@localhost.lograbbit@localhost_upgrade.log</div><div class="line">enyimindembp:rabbitmq renyimin$ head -20 rabbit\@localhost.log</div><div class="line"></div><div class="line">=INFO REPORT==== 11-Dec-2017::15:37:02 ===</div><div class="line">Starting RabbitMQ 3.6.14 on Erlang 20.1.7</div><div class="line">Copyright (C) 2007-2017 Pivotal Software, Inc.</div><div class="line">Licensed under the MPL.  See http://www.rabbitmq.com/</div><div class="line"></div><div class="line">=INFO REPORT==== 11-Dec-2017::15:37:02 ===</div><div class="line">node           : rabbit@localhost</div><div class="line">home dir       : /Users/renyimin</div><div class="line">config file(s) : /usr/local/etc/rabbitmq/rabbitmq.config (not found)</div><div class="line">cookie hash    : qNSOVbC4c3Bg7punCVVdaQ==</div><div class="line">log            : /usr/local/var/log/rabbitmq/rabbit@localhost.log</div><div class="line">sasl log       : /usr/local/var/log/rabbitmq/rabbit@localhost-sasl.log</div><div class="line">database dir   : /usr/local/var/lib/rabbitmq/mnesia/rabbit@localhost</div></pre></td></tr></table></figure></code></pre><h3 id="rabbitmq-env-conf"><a href="#rabbitmq-env-conf" class="headerlink" title="rabbitmq-env.conf"></a>rabbitmq-env.conf</h3><p>ç¯å¢ƒå˜é‡çš„é…ç½®æ–‡ä»¶ rabbitmq-env.conf : å¯ä»¥ç”¨æ¥é…ç½®rabbitmqçš„ä¸€äº›åŸºæœ¬é…ç½®æ–‡ä»¶çš„è·¯å¾„;</p><p>è¿™äº›æ–‡ä»¶çš„ä½ç½®æ˜¯ç‰¹å®šäºåˆ†å‘çš„, é»˜è®¤æƒ…å†µä¸‹, å®ƒä»¬å¯èƒ½ä¸ä¼šåˆ›å»º, ä½†å¸Œæœ›ä½äºæ¯ä¸ªå¹³å°çš„ä»¥ä¸‹ä½ç½®ï¼š</p><ul><li>é€šç”¨UNIX <code>$ RABBITMQ_HOME/etc/rabbitmq /</code></li><li>Debian <code>/etc/rabbitmq/</code></li><li>RPM <code>/etc/rabbitmq/</code></li><li>Mac OSX(Homebrew) <code>$ {install_prefix}/etc/rabbitmq/</code>ï¼ŒHomebrewå‰ç¼€é€šå¸¸æ˜¯<code>/usr/local</code></li><li>Windows <code>ï¼…APPDATAï¼…\RabbitMQ\</code></li></ul><p>ç°åœ¨ä¿®æ”¹ rabbitmq-env.conf ä¸­æŒ‡å®šçš„ rabbitmq.conf ä½ç½®ä¸º â€˜/usr/local/Cellar/rabbitmq/3.7.5/etc/rabbitmq/rabbitmq.confâ€™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">renyimindembp:rabbitmq renyimin$ pwd</div><div class="line">/usr/local/etc/rabbitmq</div><div class="line">renyimindembp:rabbitmq renyimin$ cat rabbitmq-env.conf</div><div class="line">CONFIG_FILE=/usr/local/etc/rabbitmq/rabbitmq</div><div class="line">NODE_IP_ADDRESS=127.0.0.1</div><div class="line">NODENAME=rabbit@localhost</div><div class="line">renyimindembp:rabbitmq renyimin$ vim rabbitmq-env.conf</div><div class="line">....</div><div class="line">renyimindembp:rabbitmq renyimin$ cat rabbitmq-env.conf</div><div class="line">#CONFIG_FILE=/usr/local/etc/rabbitmq/rabbitmq</div><div class="line">CONFIG_FILE=/usr/local/Cellar/rabbitmq/3.7.5/etc/rabbitmq/rabbitmq</div><div class="line">NODE_IP_ADDRESS=127.0.0.1</div><div class="line">NODENAME=rabbit@localhost</div><div class="line">renyimindembp:rabbitmq renyimin$</div></pre></td></tr></table></figure></p><p>æ”¹å®Œé‡å¯ä¹‹å, åœ¨Webç®¡ç†ç•Œé¢ä¼šå‘ç°ä¹Ÿæœ‰äº†é…ç½®æ–‡ä»¶çš„è·¯å¾„:<br><img src="/img/rabbitmq/rabbitmq-env-01.png" width="400"></p><h3 id="rabbitmq-conf"><a href="#rabbitmq-conf" class="headerlink" title="rabbitmq.conf"></a>rabbitmq.conf</h3><p>å¦‚æœ rabbitmq.conf ä¸å­˜åœ¨, å¯ä»¥æ‰‹åŠ¨åˆ›å»º;<br>å¦‚æœæ›´æ”¹ä½ç½®, è¯·è®¾ç½® <code>RABBITMQ_CONFIG_FILE</code> ç¯å¢ƒå˜é‡, <strong>RabbitMQä¼šè‡ªåŠ¨å°†.confæ‰©å±•åé™„åŠ åˆ°æ­¤å˜é‡çš„å€¼</strong>;</p><p>é…ç½®å¯¹äº<code>rabbitmq.config</code>æ–‡ä»¶, rabbitå®˜ç½‘æä¾›äº†é»˜è®¤çš„<code>rabbitmq.conf.example</code>, å¯ä»¥ä»<a href="https://github.com/rabbitmq/rabbitmq-server/blob/master/docs/rabbitmq.conf.example" target="_blank" rel="external">æ­¤å¤„</a>è·å–;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p><p>ä¸»è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="http://www.rabbitmq.com/configure.html" target="_blank" rel="external">http://www.rabbitmq.com/configure.html</a></p><h3 id="RabbitMQæƒé™æ§åˆ¶"><a href="#RabbitMQæƒé™æ§åˆ¶" class="headerlink" title="RabbitMQæƒé™æ§åˆ¶"></a>RabbitMQæƒé™æ§åˆ¶</h3><h3 id="è§£è¯»Rabbitæ—¥å¿—æ–‡ä»¶"><a href="#è§£è¯»Rabbitæ—¥å¿—æ–‡ä»¶" class="headerlink" title="è§£è¯»Rabbitæ—¥å¿—æ–‡ä»¶"></a>è§£è¯»Rabbitæ—¥å¿—æ–‡ä»¶</h3><p>### </p><ol><li>åœ¨æˆåŠŸå¯åŠ¨äº†RabbitMQæœåŠ¡ä¹‹å, </li><li>å‘½ä»¤è¡ŒæŸ¥çœ‹<code>è™šæ‹Ÿæœº</code>, <code>é˜Ÿåˆ—</code>, <code>äº¤æ¢å™¨</code>å’Œ<code>ç»‘å®šçŠ¶æ€</code>;</li></ol><p>é€šå¸¸æƒ…å†µä¸‹, ä½ æ˜¯åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥è¿è¡Œ <code>rabbitmqctl</code> æ¥ç®¡ç†è‡ªå·±çš„rabbitmqèŠ‚ç‚¹, ä¸è¿‡ä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>-n rabbit@[server_name]</code>é€‰é¡¹æ¥ç®¡ç†è¿œç¨‹rabbitmqèŠ‚ç‚¹, <code>@</code>ç¬¦å·å°†èŠ‚ç‚¹æ ‡è¯†ç¬¦(rabbit@[server_name])åˆ†æˆä¸¤éƒ¨åˆ†: </p><ul><li>å·¦è¾¹çš„æ˜¯Erlangåº”ç”¨ç¨‹åºåç§°, åœ¨è¿™é‡Œæ°¸è¿œéƒ½æ˜¯ <code>rabbit</code>;</li><li>å³è¾¹çš„æ˜¯æœåŠ¡å™¨ä¸»æœºåæˆ–è€…IPåœ°å€;</li><li>ä½ è¦ç¡®ä¿è¿è¡ŒRabbitèŠ‚ç‚¹çš„æœåŠ¡å™¨å’Œè¿è¡Œ rabbitmqctl çš„å·¥ä½œç«™ç‚¹å®‰è£…äº†ç›¸åŒçš„ Erlang Cookie;</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç» ä¸‹è½½å®‰è£…å¹¶æˆåŠŸå¯åŠ¨äº†RabbitmqæœåŠ¡, æ¥ä¸‹æ¥, å¯ä»¥ç®€å•äº†è§£ä¸€äº›ä¸æœåŠ¡å™¨ç®¡ç†ç›¸å…³çš„çŸ¥è¯†ç‚¹;&lt;/p&gt;
&lt;h2 id=
      
    
    </summary>
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/categories/RabbitMQ/"/>
    
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>02. Win,MacOS,Linuxä¸‹è½½å®‰è£…RabbitMQ</title>
    <link href="http://blog.renyimin.com/2018/05/27/rabbitmq/2018-05-27-rabbitmq-02/"/>
    <id>http://blog.renyimin.com/2018/05/27/rabbitmq/2018-05-27-rabbitmq-02/</id>
    <published>2018-05-27T04:20:21.000Z</published>
    <updated>2018-05-27T10:19:44.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><ol><li><p>ä¸‹è½½windowsç‰ˆRabbitMQ: åˆ°<a href="http://www.rabbitmq.com/download.html" target="_blank" rel="external">å®˜ç½‘</a>ä¸‹è½½<a href="https://dl.bintray.com/rabbitmq/all/rabbitmq-server/3.7.5/rabbitmq-server-3.7.5.exe" target="_blank" rel="external">windows installer</a>å³å¯;</p><ul><li>ç›´æ¥å‚»ç“œå¼åŒå‡»å®‰è£… (å¯èƒ½ä¼šæç¤º: <code>Erlang could be detected. You must install Erlang before install RabbitMQ....</code>, ç‚¹å‡»æ˜¯, ä¼šè·³è½¬åˆ° Erlang çš„<a href="http://www.erlang.org/downloads" target="_blank" rel="external">ä¸‹è½½åœ°å€</a>)</li><li>ç„¶åä¸‹è½½å¹¶å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Erlang (ä½ çš„RabbitMQå¯¹åº”çš„Erlangç‰ˆæœ¬è¯¥å¦‚ä½•é€‰æ‹©, å¯ä»¥å‚è€ƒ<a href="http://www.rabbitmq.com/which-erlang.html" target="_blank" rel="external">Windows: With installer (recommended) | Manual</a>)</li><li>ç„¶åå‚»ç“œå¼ä¸‹è½½å®‰è£… Erlang å³å¯</li><li>å®‰è£…å®ŒErlangä¹‹å, åŒå‡»å®‰è£…RabbitMQ</li></ul></li><li><p>åœ¨å®‰è£…å®ŒRabbitMQä¹‹å, åœ¨Windowsçš„å¼€å§‹èœå•ä¸­ä¼šæœ‰ RabbitMQ æœåŠ¡ç›¸å…³çš„ä¸€äº›é€‰é¡¹å¯ä»¥ä½¿ç”¨, å¦‚ </p><ul><li><code>RabbitMQ service - start</code> å¯åŠ¨RabbitMQæœåŠ¡</li><li><code>RabbitMQ service - stop</code> å…³é—­RabbitMQæœåŠ¡</li><li><code>RabbitMQ Command Prompt</code> è¿æ¥RabbitMQæœåŠ¡ (å‘½ä»¤è¡Œè¿æ¥å·¥å…·)</li><li><p>â€¦â€¦</p></li><li><p>å½“ç„¶, ä½ å¯ä»¥é…ç½®rabbitmqå®‰è£…ç›®å½•ä¸‹çš„<code>sbin</code>ç›®å½•åˆ°ç¯å¢ƒå˜é‡ä¸­, è¿™æ ·å°±å¯ä»¥ç›´æ¥<code>cmd</code>ä½¿ç”¨ç›¸å…³çš„rabbitmqç›¸å…³å‘½ä»¤äº†;</p></li></ul></li><li><p>æ³¨æ„windowsä¸‹çš„é—®é¢˜: å¦‚æœå¯åŠ¨å‘½ä»¤è¡Œè¿æ¥å, æ‰§è¡Œ <code>rabbitmqctl status</code> æŠ¥é”™ä¸º <code>erlang cookie</code> é—®é¢˜, ç›®å‰æ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯:<br> å°†<code>C:\Windows\System32\config\systemprofile\.erlang.cookie</code> æ›¿æ¢åˆ° <code>C:\Users\Administrator\.erlang.cookie</code></p></li><li><p>ä¹‹å, å¯ä»¥å¼€å¯<code>rabbitmq-management</code>æ’ä»¶, æ¥é€šè¿‡Web UIçš„å½¢å¼æ¥è¿›è¡ŒRabbitMQçš„ç®¡ç†</p><ul><li><p>æ‰§è¡Œå¦‚ä¸‹æ“ä½œæ‰“å¼€<code>rabbitmq-management</code>æ’ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">E:\rabbitmq\rabbitmq_server-3.7.5\sbin&gt;rabbitmqctl list_users</div><div class="line">Listing users ...</div><div class="line">guest   [administrator]</div><div class="line"></div><div class="line">E:\rabbitmq\rabbitmq_server-3.7.5\sbin&gt;rabbitmq-plugins enable rabbitmq_management</div><div class="line">Enabling plugins on node rabbit@DHCCOEPA4DNL18R:</div><div class="line">rabbitmq_management</div><div class="line">The following plugins have been configured:</div><div class="line">  rabbitmq_management</div><div class="line">  rabbitmq_management_agent</div><div class="line">  rabbitmq_web_dispatch</div><div class="line">Applying plugin configuration to rabbit@DHCCOEPA4DNL18R...</div><div class="line">The following plugins have been enabled:</div><div class="line">  rabbitmq_management</div><div class="line">  rabbitmq_management_agent</div><div class="line">  rabbitmq_web_dispatch</div><div class="line"></div><div class="line">started 3 plugins.</div><div class="line"></div><div class="line">E:\rabbitmq\rabbitmq_server-3.7.5\sbin&gt;</div></pre></td></tr></table></figure></li><li><p>è®¿é—®<a href="http://127.0.0.1:15672å³å¯æ‰“å¼€Webç®¡ç†ç•Œé¢" target="_blank" rel="external">http://127.0.0.1:15672å³å¯æ‰“å¼€Webç®¡ç†ç•Œé¢</a>, é»˜è®¤è´¦å·å’Œå¯†ç ä¸ºguest;</p></li></ul></li></ol><h2 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h2><ol><li>Macä¸‹è½½å®‰è£…RabbitMQæ¯”è¾ƒç®€å•, ç›´æ¥ <code>home install rabbitmq</code> å®‰è£…å®Œæˆå³å¯ <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">renyimin$ brew info rabbitmq</div><div class="line">rabbitmq: stable 3.7.5</div><div class="line">Messaging broker</div><div class="line">https://www.rabbitmq.com</div><div class="line">/usr/local/Cellar/rabbitmq/3.7.5 (232 files, 10.1MB) *      // å¯ä»¥çœ‹åˆ°, hombrewå®‰è£…çš„è½¯ä»¶åŸºæœ¬ä¸Šä¼šè¢«æ”¾ç½®åˆ° `cd /usr/local/Cellar/` ä¸‹</div><div class="line">  Built from source on 2018-05-27 at 11:43:30</div><div class="line">From: https://github.com/Homebrew/homebrew-core/blob/master/Formula/rabbitmq.rb</div><div class="line">==&gt; Dependencies</div><div class="line">Required: erlang âœ”              // å¯ä»¥çœ‹åˆ°, å·²ç»è‡ªåŠ¨å¸®ä½ å®‰è£…äº†Erlangä¾èµ–</div><div class="line">==&gt; Caveats</div><div class="line">Management Plugin enabled by default at http://localhost:15672  // å¹¶ä¸”è‡ªåŠ¨å¼€å¯äº†æ’ä»¶ç®¡ç†</div><div class="line"></div><div class="line">Bash completion has been installed to:</div><div class="line">  /usr/local/etc/bash_completion.d</div><div class="line"></div><div class="line">To have launchd start rabbitmq now and restart at login:</div><div class="line">  brew services start rabbitmq</div><div class="line">Or, if you don&apos;t want/need a background service you can just run:</div><div class="line">  rabbitmq-server</div><div class="line">renyimindembp:Cellar renyimin$</div></pre></td></tr></table></figure></li></ol><ol><li><p>æŒ‰ç…§æŒ‡ç¤º, å¯åŠ¨rabbitmqåå°è¿è¡Œ</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">renyimin$ brew services start rabbitmq</div><div class="line">==&gt; Successfully started `rabbitmq` (label: homebrew.mxcl.rabbitmq)</div></pre></td></tr></table></figure></li><li><p>è®¿é—® <code>http://127.0.0.1:15672</code>, é»˜è®¤è´¦å·å¯†ç ä¸º <code>guest</code></p></li></ol><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>.. åç»­å®Œå–„</p><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>.. åç»­å®Œå–„</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Windows&quot;&gt;&lt;a href=&quot;#Windows&quot; class=&quot;headerlink&quot; title=&quot;Windows&quot;&gt;&lt;/a&gt;Windows&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;ä¸‹è½½windowsç‰ˆRabbitMQ: åˆ°&lt;a href=&quot;http://www.
      
    
    </summary>
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/categories/RabbitMQ/"/>
    
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>01. è®¤è¯†RabbitMQæ¶ˆæ¯é˜Ÿåˆ—è½¯ä»¶</title>
    <link href="http://blog.renyimin.com/2018/05/27/rabbitmq/2018-05-27-rabbitmq-01/"/>
    <id>http://blog.renyimin.com/2018/05/27/rabbitmq/2018-05-27-rabbitmq-01/</id>
    <published>2018-05-27T02:35:21.000Z</published>
    <updated>2018-05-27T10:44:34.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ol><li><p><a href="http://www.rabbitmq.com" target="_blank" rel="external"><code>RabbitMQ</code></a>æ˜¯ä¸€ä¸ªç”± <code>Erlang</code> å¼€å‘çš„ <code>AMQP</code> çš„å¼€æºæ¶ˆæ¯é˜Ÿåˆ—è½¯ä»¶, éµå¾ª Mozilla Public Licenseå¼€æºåè®®;<br> (<code>rabbit</code> : å…”å­, è¡ŒåŠ¨è¿…é€Ÿ, ç¹æ®–ç–¯ç‹‚)</p></li><li><p><code>AMQP</code> å³ <code>Advanced Message Queuing Protocol</code>(é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®), ä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„ <code>åº”ç”¨å±‚</code> æ ‡å‡† <code>é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®</code>, æ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†, ä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯, å¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶ä¸åŒäº§å“, ä¸åŒçš„å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶)<br> åœ¨ã€ŠRabbitMQå®æˆ˜ é«˜æ•ˆéƒ¨ç½²åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ã€‹1.1èŠ‚ <code>æ¶ˆæ¯é˜Ÿåˆ—è½¯ä»¶</code> çš„ç›¸å…³å†å²å¯ä»¥äº†è§£åˆ°, è™½ç„¶å‡ åå¹´å‰å°±å·²ç»å­˜åœ¨å¾ˆå¤šæ¶ˆæ¯é˜Ÿåˆ—è½¯ä»¶, ä½†æ˜¯ç”±äº <code>ä¾›åº”å•†å£å’</code>, å¯¼è‡´ä¸­å°å‹å…¬å¸å¯¹é«˜ä»·æ ¼MQä¾›åº”å•†ä¸æ»¡, è€Œå¤§å‹å…¬å¸ä¸å¯é¿å…åœ°ä½¿ç”¨æ¥è‡ªä¼—å¤šä¾›åº”å•†çš„MQäº§å“æ¥æœåŠ¡ä¼ä¸šå†…éƒ¨ä¸åŒçš„åº”ç”¨, è¿™äº›äº§å“ä½¿ç”¨ä¸åŒçš„API, ä¸åŒçš„åè®®, å› è€Œæ— æ³•è”åˆèµ·æ¥ç»„æˆå•ä¸€æ€»çº¿; è™½ç„¶åœ¨2001å¹´è¯ç”Ÿçš„JMSé€šè¿‡æä¾›å…¬å…±Java APIçš„æ–¹å¼, éšè—äº†å•ç‹¬MQäº§å“ä¾›åº”å•†æä¾›çš„å®é™…æ¥å£, ä»è€Œè·¨è¶Šäº†å£å’å’Œè§£å†³äº†äº’é€šé—®é¢˜ã€‚ä½†å…¶å®æˆ‘ä»¬éœ€è¦çš„æ˜¯æ–°çš„æ¶ˆæ¯é€šä¿¡æ ‡å‡†åŒ–æ–¹æ¡ˆ, æ‰€ä»¥å°±æœ‰äº† AMQP åè®®çš„è¯ç”Ÿ;</p></li><li><p>ä¸Šé¢ç®€å•äº†è§£äº†Rabbitæ˜¯ä¸€æ¬¾å®ç°AMQPæ ‡å‡†åè®®çš„æ¶ˆæ¯é˜Ÿåˆ—è½¯ä»¶, æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹æ¶ˆæ¯é˜Ÿåˆ—è½¯ä»¶èƒ½å¤Ÿå¸®æˆ‘ä»¬è§£å†³é‚£äº›é—®é¢˜?</p></li></ol><h2 id="æ¶ˆæ¯é˜Ÿåˆ—è§£å†³çš„é—®é¢˜"><a href="#æ¶ˆæ¯é˜Ÿåˆ—è§£å†³çš„é—®é¢˜" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—è§£å†³çš„é—®é¢˜"></a>æ¶ˆæ¯é˜Ÿåˆ—è§£å†³çš„é—®é¢˜</h2><h3 id="åº”ç”¨è§£è€¦"><a href="#åº”ç”¨è§£è€¦" class="headerlink" title="åº”ç”¨è§£è€¦"></a>åº”ç”¨è§£è€¦</h3><p>é¦–å…ˆ, å½“ä½ å°†æ¶ˆæ¯é€šä¿¡é›†æˆåˆ°åº”ç”¨ç¨‹åºæ—¶, ä½ éœ€è¦ç†è§£ä½ æ­£åœ¨å°è¯•è§£å†³çš„é—®é¢˜ã€‚åƒæ¢ç´¢RabbitMQçš„å¤§å¤šæ•°äººä¸€æ ·, ä½ å¯èƒ½å¹¶ä¸æ˜¯åœ¨å¯»æ‰¾ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—, è€Œæ˜¯<strong>è§£å†³è§£è€¦é—®é¢˜</strong>çš„æ–¹æ³•ã€‚<br>æ¯”å¦‚, ä½ å¯èƒ½æƒ³ç€:<br>å¦‚ä½•å°†ä¸€ä¸ª<strong>è€—æ—¶çš„ä»»åŠ¡</strong>ä»è§¦å‘å®ƒçš„åº”ç”¨ç¨‹åºä¸­ç§»å‡º?<br>å¦‚ä½•æ•´åˆç”¨ä¸åŒè¯­è¨€ç¼–å†™çš„åº”ç”¨ç¨‹åº, ä½¿å¾—ä»–ä»¬è¿è¡Œèµ·æ¥åƒå•ä¸ªç³»ç»Ÿ?<br>è™½ç„¶çœ‹èµ·æ¥æ˜¯ä¸¤ä¸ªä¸åŒçš„é—®é¢˜, ä½†å´æœ‰ç€å…±åŒçš„æœ¬è´¨: è§£è€¦ <code>è¯·æ±‚</code> å’Œ <code>å¤„ç†</code>, è¿™ä¸¤ä¸ªé—®é¢˜å‡éœ€è¦ä»åŒæ­¥ç¼–ç¨‹æ¨¡å‹è½¬å‘å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹;</p><blockquote><p>Coffee Bean æ¨¡å‹<br>å½“ä½ åœ¨å’–å•¡é¦†ä¸‹äº†ä¸ªæ‹¿é“è®¢å•, ä½ å¹¶ä¸ä¼šä¸€ç›´ç­‰åœ¨æ”¶é“¶å°, ç›¸å, å’–å•¡é¦†ä¼šå°† æ¥å—è®¢å•çš„æ“ä½œ å’Œ è®¢å•å¤„ç†çš„æ“ä½œåˆ†å¼€;<br>æ¥å•å‘˜ä¼šæ¥æ”¶ä½ çš„è¯·æ±‚(å’Œä½ çš„é’±), å¹¶å‘Šè¯‰å’–å•¡è°ƒç†å¸ˆä½ è®¢çš„æ˜¯ä»€ä¹ˆã€‚ç„¶åä½ åœ¨ç­‰å¾…è®¢å•å®Œæˆçš„è¿‡ç¨‹ä¸­å¯ä»¥ç»§ç»­åšå…¶ä»–äº‹æƒ…, åŒæ—¶æ¥å•å‘˜ä¹Ÿå¯ä»¥è…¾å‡ºæ—¶é—´æ¥å…¶ä»–è®¢å•;<br>å¦‚æœç­‰å¾…åˆ¶ä½œçš„å’–å•¡æŒ¤å‹å¤ªå¤šçš„è¯, ä»–ä»¬ä¼šå¢åŠ æ›´å¤šçš„å’–å•¡è°ƒç†å¸ˆä»¥å‡å°‘è®¢å•çš„æŒ¤å‹, è€Œæ— éœ€æ›´æ”¹æ¥å•å‘˜çš„æ•°é‡;<br>é€šè¿‡è§£è€¦å¤„ç†è¿‡ç¨‹(åˆ†ç¦»è¯·æ±‚å’Œå¤„ç†), ä»–ä»¬ä»¥åŒæ ·æ•°é‡çš„å·¥ä½œäººå‘˜å®Œæˆäº†æ›´å¤šçš„å·¥ä½œ, åŒæ—¶å·¥ä½œæœ‰å¾ˆå®¹æ˜“æŒ‰éœ€æ‰©å±•;<br>è€Œæ¶ˆæ¯é€šä¿¡å°±å¯ä»¥ä¸ºä½ çš„åº”ç”¨ç¨‹åºåšåŒæ ·çš„äº‹æƒ…!</p></blockquote><h3 id="ç¼“è§£æµé‡é«˜å³°-æé«˜ç³»ç»Ÿååé‡"><a href="#ç¼“è§£æµé‡é«˜å³°-æé«˜ç³»ç»Ÿååé‡" class="headerlink" title="ç¼“è§£æµé‡é«˜å³°,æé«˜ç³»ç»Ÿååé‡"></a>ç¼“è§£æµé‡é«˜å³°,æé«˜ç³»ç»Ÿååé‡</h3><p>å½“ç³»ç»Ÿä¸­çš„åŒæ­¥å¤„ç†æ–¹å¼åœ¨é¢å¯¹é«˜å¹¶å‘æ¶Œå…¥çš„å¤§é‡æ“ä½œæ—¶, ç³»ç»Ÿå¯èƒ½ä¼šæ— æ³•ç«‹å³åšå‡ºå“åº”, ä»è€Œä¸¥é‡å½±å“ç³»ç»Ÿçš„ååé‡æ—¶, æ¶ˆæ¯é˜Ÿåˆ—å°±å¯ä»¥ç”¨æ¥ç¼“è§£æµé‡é«˜å³°, æé«˜ç³»ç»Ÿååé‡;<br>ä»ä¸Šé¢çš„ <code>åº”ç”¨è§£è€¦</code> å¯ä»¥çœ‹åˆ°, æ¶ˆæ¯é˜Ÿåˆ—æä¾›äº†ä¸€ä¸ª <strong>å¼‚æ­¥é€šä¿¡åè®®</strong>, æ¶ˆæ¯çš„å‘é€è€… ä¸ç”¨ä¸€ç›´ç­‰å¾…ç›´åˆ°æ¶ˆæ¯è¢«æˆåŠŸå¤„ç†,è€Œæ˜¯æ¶ˆæ¯è¢«æˆåŠŸå‘é€åå°±ç«‹å³è¿”å›, è€Œæ¶ˆæ¯åˆ™è¢«æš‚å­˜äºé˜Ÿåˆ—å½“ä¸­,æš‚æ—¶ç¼“è§£ç³»ç»Ÿå‹åŠ›, ç³»ç»Ÿåç»­åœ¨è¿›è¡Œé€ä¸€å¤„ç†; è¿™æ ·è‡ªç„¶ä¼š<strong>ç¼“è§£æµé‡é«˜å³°, æé«˜ç³»ç»Ÿååé‡</strong>;</p><h3 id="ç³»ç»Ÿè°ƒç”¨ä¸­æ–­"><a href="#ç³»ç»Ÿè°ƒç”¨ä¸­æ–­" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨ä¸­æ–­"></a>ç³»ç»Ÿè°ƒç”¨ä¸­æ–­</h3><p>å¦‚æœç³»ç»ŸB,Cå‡ºç°ä¸­æ–­, ç³»ç»ŸAä¸­çš„æ“ä½œå·²ç»å®Œæˆ(æ— æ³•å›æ»š), é‚£ä¹ˆæ•´ä¸ªæµç¨‹å°±ä¼šä¸å®Œæ•´; æ­¤æ—¶å°±éœ€è¦ç³»ç»ŸAçš„åç»­æµç¨‹èƒ½å¤Ÿè¢«ä¿ç•™é‡è¯•;</p><p>â€¦â€¦</p><h2 id="å­¦ä¹ å†…å®¹"><a href="#å­¦ä¹ å†…å®¹" class="headerlink" title="å­¦ä¹ å†…å®¹"></a>å­¦ä¹ å†…å®¹</h2><p>å…³äºRabbitMQ, è¿™é‡Œæ•´ç†çš„å­¦ä¹ å†…å®¹åŒ…æ‹¬</p><ul><li>ä¸‹è½½å®‰è£…</li><li>æµ…æRabbitMQæ¶ˆæ¯é€šä¿¡è¿‡ç¨‹</li><li>æœåŠ¡å™¨è¿è¡ŒåŠç®¡ç†</li><li>æ¶ˆæ¯é€šä¿¡åŠå„ç§ç»†èŠ‚é—®é¢˜</li><li>æ¶ˆæ¯é€šä¿¡å„ç§å®é™…æ¡ˆä¾‹åˆ†æ</li><li>RabbitMQé›†ç¾¤</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.rabbitmq.com&quot; target=&quot;_blank&quot; rel=&quot;extern
      
    
    </summary>
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/categories/RabbitMQ/"/>
    
    
      <category term="RabbitMQ" scheme="http://blog.renyimin.com/tags/RabbitMQ/"/>
    
  </entry>
  
  <entry>
    <title>Linuxæ–‡æœ¬å¤„ç† - awk</title>
    <link href="http://blog.renyimin.com/2018/05/18/linux/2018-05-18-awk/"/>
    <id>http://blog.renyimin.com/2018/05/18/linux/2018-05-18-awk/</id>
    <published>2018-05-18T02:03:51.000Z</published>
    <updated>2018-05-27T14:50:27.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ol><li><p>Awkæ˜¯ä¸€ç§ä¾¿äºä½¿ç”¨ä¸”è¡¨è¾¾èƒ½åŠ›å¼ºçš„ç¨‹åºè®¾è®¡è¯­è¨€, æ²¡é”™, å®ƒæ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€, å®ƒæ‹¥æœ‰æ•°ç»„, æ”¯æŒ<code>if-else</code>æ§åˆ¶è¯­å¥, <code>for/while</code>å¾ªç¯è¯­å¥, å†…ç½®å‡½æ•°ç­‰åŠŸèƒ½; åŒæ—¶, <strong>å®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·</strong>; </p></li><li><p>ä¹‹æ‰€ä»¥å«AWKæ˜¯å› ä¸ºå…¶å–äº†ä¸‰ä½åˆ›å§‹äºº Alfred Ahoï¼ŒPeter Weinberger, å’Œ Brian Kernighan çš„Family Nameçš„é¦–å­—ç¬¦;</p></li><li><p>awk å‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹</p><ul><li>awkæ˜¯é€è¡Œå¤„ç†çš„, å°±æ˜¯è¯´, å½“awkå¤„ç†ä¸€ä¸ªæ–‡æœ¬æ—¶, ä¼šä¸€è¡Œä¸€è¡Œè¿›è¡Œå¤„ç†, å¤„ç†å®Œå½“å‰è¡Œ, å†å¤„ç†ä¸‹ä¸€è¡Œ, awké»˜è®¤ä»¥ â€œæ¢è¡Œç¬¦â€ ä¸ºæ ‡è®°æ¥è¯†åˆ«æ¯ä¸€è¡Œ, è·Ÿæˆ‘ä»¬äººç±»ä¸€æ ·, æ¯æ¬¡é‡åˆ°â€å›è½¦æ¢è¡Œâ€, å°±è®¤ä¸ºæ˜¯å½“å‰è¡Œçš„ç»“æŸ, æ–°çš„ä¸€è¡Œçš„å¼€å§‹;</li><li>awkåœ¨é€è¡Œå¤„ç†æ–‡æœ¬æ—¶, ä¼šæœç´¢èƒ½å¤ŸåŒ¹é…ç¨‹åºä¸­ä»»æ„æ¨¡å¼(ä¹Ÿå°±æ˜¯åœ¨awkå‘½ä»¤ä¸­çš„â€™programâ€™ä¸­å¯ä»¥æœ‰å¤šä¸ªæ¨¡å¼)çš„è¡Œ, æ¯ä¸ªæ¨¡å¼ä¾æ¬¡æµ‹è¯•æ¯ä¸ªè¾“å…¥è¡Œ, å¯¹äºåŒ¹é…åˆ°æ¨¡å¼çš„è¡Œ, ä¼šæ‰§è¡Œawkå‘½ä»¤ä¸­æ¨¡å¼åé¢çš„åŠ¨ä½œ(ä¹Ÿè®¸åŒ…å«å¤šæ­¥), ç„¶åè¯»å–ä¸‹ä¸€è¡Œå¹¶ç»§ç»­åŒ¹é…, ç›´åˆ°æ‰€æœ‰çš„è¾“å…¥è¯»å–å®Œæ¯•;</li><li>åŒæ—¶, awkä¼šæŒ‰ç…§ç”¨æˆ·æŒ‡å®šçš„åˆ†å‰²ç¬¦å»åˆ†å‰²å½“å‰è¡Œä¸ºå¤šä¸ªå­—æ®µ(æ¯ä¸ªå­—æ®µåˆ†åˆ«è¢«æ ‡è¯†ä¸º <code>$1</code> ä¸€ç›´åˆ° <code>$NF</code>, <code>$NF</code>ä¸ºawkä¸­çš„å˜é‡, è¡¨ç¤ºå½“å‰è¡Œè¢«åˆ†éš”å‡ºçš„æœ€å¤§å­—æ®µæ•°), å¦‚æœæ²¡æœ‰æŒ‡å®šåˆ†å‰²ç¬¦, é»˜è®¤ä½¿ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦, å¦å¤–, é»˜è®¤ä¼šå°†ç©ºæ ¼ç¬¦å’Œåˆ¶è¡¨ç¬¦éƒ½è§†ä¸ºç©ºæ ¼, è€Œä¸”å¤šä¸ªè¿ç»­çš„ç©ºæ ¼éƒ½è§†ä¸ºä¸€ä¸ª;</li></ul></li><li><p>ä½œä¸ºä¸€ä¸ªPHPå¼€å‘äººå‘˜, åœ¨å·¥ä½œä¸­, ä¸ä¸€å®šè¦æ±‚ä¼šå†™æ¯”è¾ƒå¤æ‚çš„awkè¯­å¥, ä½†å¯èƒ½ç»å¸¸ä¼šæ¥è§¦åˆ°å¼€å‘, æ²™ç›’, é¢„å‘, çº¿ä¸Šç­‰å„ç§ç¯å¢ƒ, æ­¤æ—¶å¯ä»¥ä½¿ç”¨awkå¯¹ä¸€äº›æ—¥å¿—æ–‡æœ¬åšä¸€äº›åˆ†æå¾ˆæ–¹ä¾¿çš„åˆ†æå·¥ä½œ;</p></li></ol><h2 id="è¯­æ³•ç»“æ„"><a href="#è¯­æ³•ç»“æ„" class="headerlink" title="è¯­æ³•ç»“æ„"></a>è¯­æ³•ç»“æ„</h2><ol><li><p>åŸºæœ¬è¯­æ³•ç»“æ„ä¸º: <code>awk [options] &#39;program&#39; file1 , file2 ...</code>, å…¶ä¸­, <code>&#39;program&#39;</code> åˆå¯ä»¥ç»†åˆ†ä¸º <code>pattern</code>æ¨¡å¼ å’Œ <code>action</code>åŠ¨ä½œ; ä¹Ÿå°±æ˜¯è¯´, awkçš„å®Œæ•´è¯­æ³•å…¶å®ä¸º <code>awk [options] &#39;pattern {action}&#39; file1 , file2 ...</code></p></li><li><p><code>pattern</code> : æŒ‡çš„æ˜¯æ¨¡å¼, ç”¨æ¥åŒ¹é…awkå‘½ä»¤æ‰€å¤„ç†çš„æ–‡æœ¬ä¸­çš„æ¯ä¸€è¡Œå†…å®¹;</p><ul><li><p><strong>æ³¨æ„æ¨¡å¼åŒ¹é…å­—ç¬¦ä¸²æ—¶, éœ€è¦ä½¿ç”¨åŒå¼•å·</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:Desktop renyimin$ cat awk.log</div><div class="line">renyimin   200 1200W ç”·</div><div class="line"></div><div class="line">renfumin 500 200W  ç”·</div><div class="line">renjuanfang          1000 900W å¥³</div><div class="line"></div><div class="line">renyimindeMacBook-Pro:Desktop renyimin$ awk &apos;$1==&quot;renyimin&quot; &#123;print $1,$2,$3&#125;&apos; awk.log</div><div class="line">renyimin 200 1200W</div><div class="line">renyimindeMacBook-Pro:Desktop renyimin$ awk &apos;$1==&apos;renyimin&apos; &#123;print $1,$2,$3&#125;&apos; awk.log</div><div class="line"></div><div class="line"></div><div class="line">renyimindeMacBook-Pro:Desktop renyimin$ awk &apos;$1==renyimin &#123;print $1,$2,$3&#125;&apos; awk.log</div><div class="line"></div><div class="line"></div><div class="line">renyimindeMacBook-Pro:Desktop renyimin$</div></pre></td></tr></table></figure></li><li><p>æ¨¡å¼å¯ä»¥ç»„åˆ(å¯ä»¥ä½¿ç”¨æ‹¬å·å’Œé€»è¾‘æ“ä½œç¬¦ä¸ <code>&amp;&amp;</code> ï¼Œ æˆ– <code>||</code> ï¼Œ ä»¥åŠé <code>!</code> å¯¹æ¨¡å¼è¿›è¡Œç»„åˆ)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:Desktop renyimin$ awk &apos;$1==&quot;renyimin&quot; &amp;&amp; $2&gt;20 &#123;print $1,$2,$3&#125;&apos; awk.log</div><div class="line">renyimin 200 1200W</div><div class="line">renyimindeMacBook-Pro:Desktop renyimin$ awk &apos;$1==&quot;renyimin&quot; &amp;&amp; $2&gt;200 &#123;print $1,$2,$3&#125;&apos; awk.log</div></pre></td></tr></table></figure></li><li><p>æ¨¡å¼å¯ä»¥ä½¿ç”¨<code>è¿ç®—ç¬¦</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ cat test1.log</div><div class="line">Beth4.000</div><div class="line">Dan3.750</div><div class="line">kathy4.0010</div><div class="line">Mark5.0020</div><div class="line">Mary5.5022</div><div class="line">Susie4.2518</div><div class="line">renyimindeMacBook-Pro:linux renyimin$ awk &apos;$2*$3&gt;50 &#123;print $0&#125;&apos; test1.log</div><div class="line">Mark5.0020</div><div class="line">Mary5.5022</div><div class="line">Susie4.2518</div><div class="line">renyimindeMacBook-Pro:linux renyimin$</div></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>æ­£åˆ™è¡¨è¾¾å¼</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ awk &apos;/Susie/ &#123;print $0&#125;&apos; test1.log</div><div class="line">Susie4.2518</div><div class="line">renyimindeMacBook-Pro:linux renyimin$</div></pre></td></tr></table></figure></li></ul></li></ol><ol><li><p><code>action</code> æŒ‡çš„å°±æ˜¯åŠ¨ä½œ, awk æ“…é•¿æ–‡æœ¬æ ¼å¼åŒ–å¹¶å°†æ ¼å¼åŒ–åçš„æ–‡æœ¬<strong>è¾“å‡º</strong>, æ‰€ä»¥å®ƒæ¯”è¾ƒå¸¸ç”¨çš„ action æ˜¯ <code>print</code> å’Œ <code>printf</code>;</p></li><li><p>â€˜æ¨¡å¼+åŠ¨ä½œâ€™ è¯­å¥ä¸­çš„ æ¨¡å¼ æˆ– åŠ¨ä½œéƒ½å¯ä»¥çœç•¥, ä½†ä¸æ˜¯ä¸¤è€…åŒæ—¶çœç•¥;</p><ul><li>æœ‰çš„awkå‘½ä»¤æœ‰ ä¸€ä¸ªæ¨¡å¼ + åŠ¨ä½œ</li><li>æœ‰çš„awkå‘½ä»¤åªæœ‰ä¸€ä¸ªæ¨¡å¼, æ²¡æœ‰åŠ¨ä½œ(å¦‚æœæ²¡æœ‰åŠ¨ä½œ, é‚£ä¹ˆæ¨¡å¼åŒ¹é…åˆ°çš„æ¯ä¸€è¡Œéƒ½ä¼šè¢«å®Œæ•´æ‰“å°å‡ºæ¥, ç›¸å½“äºåŠ¨ä½œæ˜¯<code>{print}</code> æˆ–è€… <code>{print $0}</code>)</li><li>æœ‰çš„awkå‘½ä»¤åªæœ‰å¤šä¸ªæ¨¡å¼, æ²¡æœ‰åŠ¨ä½œ(åŒä¸Š) </li><li>æœ‰çš„awkå‘½ä»¤å¯ä»¥æœ‰å¤šä¸ªæ¨¡å¼ + ä¸€ä¸ªåŠ¨ä½œ</li><li>è²Œä¼¼æ²¡æœ‰ æ¨¡å¼+åŠ¨ä½œ, æ¨¡å¼+åŠ¨ä½œ è¿™ç§awkå‘½ä»¤</li><li>å¤šä¸ªæ¨¡å¼å¯ä»¥ä½¿ç”¨æ‹¬å·å’Œé€»è¾‘æ“ä½œç¬¦<code>ä¸&amp;&amp;</code>, <code>æˆ–||</code>, ä»¥åŠ <code>é!</code> å¯¹æ¨¡å¼è¿›è¡Œç»„åˆ</li></ul></li><li><p><code>option</code> é€‰é¡¹, å¯ä»¥ä¸ç”¨ä»»ä½•é€‰é¡¹, å¸¸ç”¨é€‰é¡¹ä¸º</p><ul><li><p><code>-F fs or --field-separator fs</code> : æŒ‡å®šè¾“å…¥æ–‡ä»¶åˆ†éš”ç¬¦(), fså¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ (å½“ç„¶, ä¹Ÿå¯ä»¥ä½¿ç”¨å†…ç½®å˜é‡, ç»“åˆå‚æ•° -v,  <code>-v FS=&#39;åˆ†éš”ç¬¦&#39;</code> æ¥æŒ‡å®šåˆ†éš”ç¬¦)<br><code>-F</code> è¿˜å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®šåˆ¶æŒ‰ç…§æŸäº›å­—ç¬¦ä¸²æ¥åšåˆ†éš”, å­—ç¬¦éœ€è¦æ”¾åœ¨ <code>&#39;[]&#39;ä¸­</code>, æ¯”å¦‚å¯¹nginxçš„accessæ—¥å¿—ä½¿ç”¨<code>[</code>æˆ–è€…<code>]</code>æ¥åˆ†éš”</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ tail -5 c2b_oms.2018-03-30-access.log</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[30/Mar/2018:16:43:17 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[200] byte=[884] elapsed=[2.189] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[7.55]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[30/Mar/2018:17:11:45 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[500] byte=[22005] elapsed=[0.136] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[-]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[30/Mar/2018:17:13:25 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[200] byte=[695] elapsed=[0.115] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[9.50]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[30/Mar/2018:17:14:41 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[500] byte=[22005] elapsed=[0.133] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[-]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[30/Mar/2018:17:14:58 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[500] byte=[22005] elapsed=[0.139] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[-]</div><div class="line">$ tail -5 c2b_oms.2018-03-30-access.log | awk -F &apos;[][]&apos; &apos;&#123;print $8&#125;&apos;</div><div class="line">GET /api/v1/car_dealer/list HTTP/1.1</div><div class="line">GET /api/v1/car_dealer/list HTTP/1.1</div><div class="line">GET /api/v1/car_dealer/list HTTP/1.1</div><div class="line">GET /api/v1/car_dealer/list HTTP/1.1</div><div class="line">GET /api/v1/car_dealer/list HTTP/1.1</div><div class="line">[work@VM_0_206_centos nginx_log]$</div></pre></td></tr></table></figure><p>æˆ–è€…è¿˜å¯ä»¥ä½¿ç”¨ <code>tail -10 c2b_oms.2018-03-30-access.log | awk -F&#39;[\\[\\]]&#39; &#39;{print $2}&#39;</code></p></li><li>å¯ä»¥æŒ‰ç…§ä»»æ„ä¸€æ®µå­—ç¬¦ä¸²è¿›è¡Œåˆ†éš”<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[work@VM_0_206_centos nginx_log]$ tail -3 c2b_oms.2018-03-30-access.log</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[30/Mar/2018:11:26:09 +0800] request=[GET /api/v1/car_dealer/list?car_dealer_name_or_phone=18625036504 HTTP/1.1] status=[200] byte=[276] elapsed=[0.005] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[0.61]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[30/Mar/2018:11:28:23 +0800] request=[GET /api/v1/car_dealer/list?car_dealer_name_or_phone=renyimin HTTP/1.1] status=[200] byte=[786] elapsed=[1.312] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[8.27]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[30/Mar/2018:11:29:39 +0800] request=[GET /api/v1/car_dealer/list?car_dealer_name_or_phone1=renyimin HTTP/1.1] status=[200] byte=[786] elapsed=[0.269] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[8.27]</div><div class="line">[work@VM_0_206_centos nginx_log]$ tail -10 c2b_oms.2018-03-30-access.log | awk -F&apos;+0800&apos; &apos;&#123;print $2&#125;&apos;</div><div class="line">] request=[GET /api/v1/car_dealer/list?car_dealer_name_or_phone=18625036504 HTTP/1.1] status=[200] byte=[276] elapsed=[0.005] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[0.61]</div><div class="line">] request=[GET /api/v1/car_dealer/list?car_dealer_name_or_phone=renyimin HTTP/1.1] status=[200] byte=[786] elapsed=[1.312] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[8.27]</div><div class="line">] request=[GET /api/v1/car_dealer/list?car_dealer_name_or_phone1=renyimin HTTP/1.1] status=[200] byte=[786] elapsed=[0.269] refer=[-] body=[-] ua=[PostmanRuntime/6.1.6] cookie=[-] gzip=[8.27]</div><div class="line">[work@VM_0_206_centos nginx_log]$</div></pre></td></tr></table></figure></li></ul></li></ol><pre><code>- `-v` å˜é‡èµ‹å€¼é€‰é¡¹: è¯¥é€‰é¡¹å°†ä¸€ä¸ªå€¼èµ‹äºˆä¸€ä¸ªå˜é‡, å®ƒä¼šåœ¨ç¨‹åºå¼€å§‹ä¹‹å‰è¿›è¡Œèµ‹å€¼, ä¸‹é¢çš„ä¾‹å­æè¿°äº†è¯¥é€‰é¡¹çš„ä½¿ç”¨`-v` : å®šä¹‰ä¸€ä¸ªå˜é‡ (å˜é‡å¯ä»¥æ˜¯awkå†…ç½®çš„, ä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„)<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ awk -v name=Rymuscle &apos;BEGIN&#123;printf &quot;Name = %s\n&quot;, name&#125;&apos;</div><div class="line">Name = Jerry</div><div class="line">$</div></pre></td></tr></table></figure>- ä¸Šé¢ä»‹ç»äº†å¦‚ä½•è®¾å®šè¾“å…¥åˆ†éš”ç¬¦, å…¶å®è¿˜æœ‰è¾“å‡ºåˆ†éš”ç¬¦, å¯ä»¥ä½¿ç”¨ `-v OFS=&apos;åˆ†éš”ç¬¦&apos;`, æ¥å®šä¹‰è¾“å‡ºåˆ†éš”ç¬¦ (æ³¨æ„,åœ¨è¾“å‡ºæ—¶, å„å­—æ®µé—´çš„`é€—å·`å°±ä»£è¡¨äº†è¾“å‡ºåˆ†éš”ç¬¦, æ²¡æœ‰é€—å·åˆ™å„å­—æ®µä¼šç´§è¿ç€)-  `-f scriptfile æˆ–è€… --file scriptfile` : ä»è„šæœ¬æ–‡ä»¶ä¸­è¯»å–awkå‘½ä»¤</code></pre><ol><li>å¤šæ–‡ä»¶å¤„ç†, ç”¨åˆ°äº†å†è¡¥å……~~</li></ol><h2 id="å†…ç½®çš„ä¸€äº›å˜é‡"><a href="#å†…ç½®çš„ä¸€äº›å˜é‡" class="headerlink" title="å†…ç½®çš„ä¸€äº›å˜é‡"></a>å†…ç½®çš„ä¸€äº›å˜é‡</h2><p>ä¸‹é¢å€¼åˆ—å‡ºæœ¬äººå¸¸ç”¨çš„ä¸€äº›awkå†…ç½®å˜é‡<br>å˜é‡å¯ä»¥åœ¨<code>BEGIN</code>è¯­å¥å—ä¸­å£°æ˜, ä¹Ÿå¯ä»¥åœ¨<code>program</code>ä¸­å£°æ˜, ä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•° <code>-v</code> å£°æ˜</p><ol><li><p><code>NF</code>: <strong>è¡Œçš„å­—æ®µæ•°é‡</strong>, ä½ å¯ä»¥åœ¨awkå‘½ä»¤çš„programä¸­ä½¿ç”¨action, åœ¨actionä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯printæ‰€éœ€çš„å­—æ®µ, æ­¤æ—¶ä½ å¯èƒ½æ€»æ˜¯éœ€è¦é€šè¿‡ $1, $2 è¿™æ ·æ¥æŒ‡å®šç´¢è¦æ‰“å°çš„ä¸åŒå­—æ®µ, ä½†ä»»ä½•è¡¨è¾¾å¼éƒ½å¯ä»¥ä½¿ç”¨åœ¨<code>$</code>ä¹‹åæ¥è¡¨è¾¾ä¸€ä¸ªå­—æ®µçš„åºå·; è¡¨è¾¾å¼ä¼šè¢«æ±‚å€¼å¹¶ç”¨äºè¡¨ç¤ºå­—æ®µåºå·, åŒæ—¶, Awkä¼šå¯¹å½“å‰è¾“å…¥çš„è¡Œæœ‰å¤šå°‘ä¸ªå­—æ®µè¿›è¡Œè®¡æ•°, å¹¶ä¸”å°†å½“å‰è¡Œçš„å­—æ®µæ•°é‡å­˜å‚¨åœ¨ä¸€ä¸ªå†…å»ºçš„ç§°ä½œ <code>NF</code> çš„å˜é‡ä¸­;<br> å› æ­¤, ç¨‹åº <code>{ print NF, $1, $NF }</code> ä¼šä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€è¡Œçš„å­—æ®µæ•°é‡, ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼, æœ€åä¸€ä¸ªå­—æ®µçš„å€¼;</p></li><li><p><code>NR</code>: å®ƒä¼šå­˜å‚¨å½“å‰å·²ç»è¯»å–äº†å¤šå°‘è¡Œçš„è®¡æ•°. æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>$NR</code> ç»™ç»“æœçš„æ¯ä¸€è¡ŒåŠ ä¸Šè¡Œå·</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ awk &apos;&#123;print NR,$0&#125;&apos; awk.log</div><div class="line">1 renyimin   &quot;200&quot; 1200W ç”·</div><div class="line">2</div><div class="line">3 renfumin 500 &quot;200W&quot;  ç”·</div><div class="line">4 renjuanfang          1000 900W &quot;å¥³&quot;</div><div class="line">5</div><div class="line">renyimindeMacBook-Pro:linux renyimin$</div></pre></td></tr></table></figure></li><li><p><code>FS</code>: é™¤äº†ä½¿ç”¨ <code>-F</code>å‚æ•°æŒ‡å®šå­—æ®µåˆ†éš”ç¬¦, ä¹Ÿå¯ä»¥é€šè¿‡ -v è®¾å®š <code>FS</code> å†…ç½®å˜é‡æ¥æŒ‡å®šå­—æ®µåˆ†éš”ç¬¦ (æˆ–è€…åœ¨<code>BEGIN</code>ä¸­æŒ‡å®š<code>FS</code>å˜é‡)</p></li><li><p><code>OFS</code> : ä¸Šé¢ä»‹ç»äº†å¦‚ä½•è®¾å®šè¾“å…¥åˆ†éš”ç¬¦, å…¶å®è¿˜æœ‰è¾“å‡ºåˆ†éš”ç¬¦, å¯ä»¥ä½¿ç”¨ <code>-v OFS=&#39;åˆ†éš”ç¬¦&#39;</code>(æˆ–è€…åœ¨<code>BEGIN</code>ä¸­æŒ‡å®š<code>OFS</code>å˜é‡), æ¥å®šä¹‰è¾“å‡ºåˆ†éš”ç¬¦ (æ³¨æ„,åœ¨è¾“å‡ºæ—¶, å„å­—æ®µé—´çš„<code>é€—å·</code>å°±ä»£è¡¨äº†è¾“å‡ºåˆ†éš”ç¬¦, æ²¡æœ‰é€—å·åˆ™å„å­—æ®µä¼šç´§è¿ç€)</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[work@VM_0_206_centos nginx_log]$ tail -3 c2b_oms.2018-03-30-access.log | awk -F&quot;[][]&quot; -v OFS=&apos;---&apos; &apos;&#123;print $2,$3&#125;&apos;</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">[work@VM_0_206_centos nginx_log]$ tail -3 c2b_oms.2018-03-30-access.log | awk -F&quot;[][]&quot; &apos;BEGIN&#123;OFS=&quot;---&quot;&#125; &#123;print $2,$3&#125;&apos;</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">[work@VM_0_206_centos nginx_log]$</div></pre></td></tr></table></figure></li><li><p>å¦å¤–å£°æ˜å˜é‡ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ <code>program</code> ä¸­è¿›è¡Œ</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[work@VM_0_206_centos nginx_log]$ tail -3 c2b_oms.2018-03-30-access.log | awk &apos;FS=&quot;[][]&quot;,OFS=&quot;---&quot; &#123;print $2,$3&#125;&apos;</div><div class="line">http_x_forward=[-]---time=[30/Mar/2018:11:26:09</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">172.16.254.2--- http_x_forward=</div><div class="line">[work@VM_0_206_centos nginx_log]$</div></pre></td></tr></table></figure></li><li><p>å…¶ä½™çš„, ç”¨åˆ°äº†å†è¡¥å……~~</p></li></ol><h2 id="BEGIN-è¯­å¥å—"><a href="#BEGIN-è¯­å¥å—" class="headerlink" title="BEGIN è¯­å¥å—"></a>BEGIN è¯­å¥å—</h2><ol><li><code>BEGIN</code> è¯­å¥å—çš„è¯­æ³•: åœ¨awkçš„programä¸­ <code>BEGIN {awk-commands}</code>: BEGINè¯­å¥å—åœ¨ç¨‹åºå¼€å§‹çš„ä½¿ç”¨æ‰§è¡Œ, å®ƒåªæ‰§è¡Œä¸€æ¬¡, åœ¨è¿™é‡Œå¯ä»¥åˆå§‹åŒ–å˜é‡æˆ–è€…æ‰“å°ä¸€ä¸ªå¼€å¤´ä»€ä¹ˆçš„â€¦</li><li><code>BEGIN</code> æ˜¯AWKçš„å…³é”®å­—, å› æ­¤å®ƒå¿…é¡»ä¸ºå¤§å†™, æ³¨æ„, è¿™ä¸ªè¯­å¥å—æ˜¯å¯é€‰çš„;</li><li>æµ‹è¯•:<ul><li>å¯ä»¥ä½¿ç”¨ <code>print &quot;&quot;</code> åœ¨è¾“å‡ºä¹‹å‰å…ˆæ‰“å°ä¸€ä¸ªç©ºè¡Œ<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ awk &apos;BEGIN &#123;print &quot;&quot;&#125; &#123;print NR,$0&#125;&apos; awk.log</div><div class="line"></div><div class="line">1 renyimin   &quot;200&quot; 1200W ç”·</div><div class="line">2</div><div class="line">3 renfumin 500 &quot;200W&quot;  ç”·</div><div class="line">4 renjuanfang          1000 900W &quot;å¥³&quot;</div><div class="line">5</div></pre></td></tr></table></figure></li></ul></li></ol><h2 id="END-è¯­å¥å—"><a href="#END-è¯­å¥å—" class="headerlink" title="END è¯­å¥å—"></a>END è¯­å¥å—</h2><p>END åˆ™ç”¨äºå¤„ç†åŒ¹é…è¿‡çš„æœ€åä¸€ä¸ªæ–‡ä»¶çš„æœ€åä¸€è¡Œä¹‹åçš„ä½ç½®;</p><h2 id="å¤šåˆ†éš”ç¬¦æµ‹è¯•"><a href="#å¤šåˆ†éš”ç¬¦æµ‹è¯•" class="headerlink" title="å¤šåˆ†éš”ç¬¦æµ‹è¯•"></a>å¤šåˆ†éš”ç¬¦æµ‹è¯•</h2><ol><li><code>awk -F&#39;[],&quot; ]&#39; &#39;{print $2,$61,$2-$61}&#39; ttt.log</code> // å¯ä»¥ä½¿ç”¨ <code>-F[]</code> å°†åˆ†éš”çš„å­—ç¬¦ä¸²åŒ…èµ·æ¥, è¿™æ ·å°±æ˜¯ä½¿ç”¨ ] æˆ–è€…, æˆ–è€…åŒå¼•å·æˆ–è€…ç©ºæ ¼æ¥è¿›è¡Œåˆ†éš”äº†;</li></ol><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>ä¸‹é¢æ ¹æ®nginxçš„access.logæ—¥å¿—æ¥åšä¸€äº›ç»ƒä¹  (è¿™ä¸ªæ—¥å¿—è¿˜æ˜¯æŒºå¤§é‡çš„)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wc c2b_bid.2018-04-23-access.log</div><div class="line">   65608  1501442 29580860 c2b_bid.2018-04-23-access.log</div></pre></td></tr></table></figure></p><ol><li><p>ç»Ÿè®¡ç‹¬ç«‹ipçš„è®¿é—®é‡ - å…±æœ‰å¤šå°‘ç‹¬ç«‹IPè®¿é—®è¿‡æœ¬ç«™ç‚¹</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-bash-4.2$ awk &apos;&#123;print $1&#125;&apos; c2b_bid.2018-04-23-access.log | sort -n | uniq | wc -l</div><div class="line">240</div></pre></td></tr></table></figure><p> è¡¨ç¤ºå…±æœ‰240ä¸ªä¸åŒipè®¿é—®è¿‡ç«™ç‚¹</p></li><li><p>ç»Ÿè®¡ç‹¬ç«‹ipçš„è®¿é—®æƒ…å†µ - æ¯ä¸ªç‹¬ç«‹ipçš„è®¿é—®æ¬¡æ•°</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">bash-4.2$ awk &apos;&#123;print $1&#125;&apos; c2b_bid.2018-04-23-access.log | sort -n | uniq -c</div><div class="line">    190 remote_addr=[100.116.226.0]</div><div class="line">    195 remote_addr=[100.116.226.1]</div><div class="line">    176 remote_addr=[100.116.226.10]</div><div class="line">    176 remote_addr=[100.116.226.100]</div><div class="line">    .....</div><div class="line">    å°±ä¸å…¨éƒ¨åˆ—å‡ºäº†</div></pre></td></tr></table></figure></li><li><p>ç»Ÿè®¡è®¿é—®æœ€é¢‘ç¹çš„å‰10ä¸ªip</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">-bash-4.2$ awk &apos;&#123;print $1&#125;&apos; c2b_bid.2018-04-23-access.log | sort -n | uniq -c | sort -rn | head -10</div><div class="line">    407 remote_addr=[100.116.251.123]</div><div class="line">    399 remote_addr=[100.116.251.65]</div><div class="line">    394 remote_addr=[100.116.251.56]</div><div class="line">    390 remote_addr=[100.116.251.97]</div><div class="line">    388 remote_addr=[100.116.251.11]</div><div class="line">    387 remote_addr=[100.116.251.110]</div><div class="line">    384 remote_addr=[100.116.251.98]</div><div class="line">    383 remote_addr=[100.116.251.83]</div><div class="line">    382 remote_addr=[100.116.251.8]</div><div class="line">    381 remote_addr=[100.116.251.40]</div><div class="line">-bash-4.2$</div></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹è®¿é—®380æ¬¡ä»¥ä¸Šçš„ip</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">-bash-4.2$ awk &apos;&#123;print $1&#125;&apos; c2b_bid.2018-04-23-access.log | sort -n | uniq -c | awk &apos;$1 &gt; 380 &#123;print&#125;&apos; | sort -rn</div><div class="line">    407 remote_addr=[100.116.251.123]</div><div class="line">    399 remote_addr=[100.116.251.65]</div><div class="line">    394 remote_addr=[100.116.251.56]</div><div class="line">    390 remote_addr=[100.116.251.97]</div><div class="line">    388 remote_addr=[100.116.251.11]</div><div class="line">    387 remote_addr=[100.116.251.110]</div><div class="line">    384 remote_addr=[100.116.251.98]</div><div class="line">    383 remote_addr=[100.116.251.83]</div><div class="line">    382 remote_addr=[100.116.251.8]</div><div class="line">    381 remote_addr=[100.116.251.40]</div><div class="line">    381 remote_addr=[100.116.251.38]</div><div class="line">    381 remote_addr=[100.116.251.118]</div><div class="line">-bash-4.2$</div></pre></td></tr></table></figure></li><li><p>è¿™æ˜¯å¹³æ—¶æ—¥å¸¸çš„æ—¥å¿—åˆ†æå‘½ä»¤</p><ul><li><p>æ—¥å¿—ä¸º:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tail -5 c2b_oms.2018-03-29-access.log</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[29/Mar/2018:18:37:48 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[200] byte=[19305] elapsed=[0.002] refer=[-] body=[-] ua=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36] cookie=[-] gzip=[3.19]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[29/Mar/2018:18:41:24 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[200] byte=[24131] elapsed=[0.004] refer=[-] body=[-] ua=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36] cookie=[-] gzip=[3.96]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[29/Mar/2018:18:42:06 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[200] byte=[24130] elapsed=[0.004] refer=[-] body=[-] ua=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36] cookie=[-] gzip=[3.96]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[29/Mar/2018:18:42:40 +0800] request=[GET /api/v1/car_dealer/list HTTP/1.1] status=[200] byte=[786] elapsed=[1.078] refer=[-] body=[-] ua=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36] cookie=[-] gzip=[8.27]</div><div class="line">remote_addr=[172.16.254.2] http_x_forward=[-] time=[29/Mar/2018:18:42:57 +0800] request=[GET /favicon.ico HTTP/1.1] status=[404] byte=[9879] elapsed=[0.010] refer=[http://172.16.0.206:8888/] body=[-] ua=[Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36] cookie=[-] gzip=[2.27]</div></pre></td></tr></table></figure><p>åˆ†æä¸º:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">awk -F&apos;] &apos; &apos;&#123;status=substr($5,9);elapsed=substr($7,10);if(elapsed &gt;= 2 || status &gt;=500)print $4,status,elapsed;  &#125;&apos; hera.2018-05-07-access.log &gt; /tmp/hera.2018-05-07.log</div><div class="line">cat /tmp/hera.2018-05-07.log | awk &apos;&#123;a[$4]+=1;&#125;END&#123;for(i in a)&#123;print i,a[i]&#125;&#125;&apos;</div><div class="line">cat /tmp/hera.2018-05-07.log | awk &apos;&#123;if($4 == 500)print $2,$4&#125;&apos; | sort</div></pre></td></tr></table></figure></li></ul></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Awkæ˜¯ä¸€ç§ä¾¿äºä½¿ç”¨ä¸”è¡¨è¾¾èƒ½åŠ›å¼ºçš„ç¨‹åºè®¾è®¡è¯­è¨€, æ²¡é”™, å®ƒæ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€, å®ƒæ‹¥æœ‰æ•°ç»„, æ”¯æŒ&lt;code&gt;if-else
      
    
    </summary>
    
      <category term="Linux" scheme="http://blog.renyimin.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.renyimin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼</title>
    <link href="http://blog.renyimin.com/2018/05/17/linux/2018-05-17-regular/"/>
    <id>http://blog.renyimin.com/2018/05/17/linux/2018-05-17-regular/</id>
    <published>2018-05-17T06:22:31.000Z</published>
    <updated>2018-05-17T06:22:36.000Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="Linux" scheme="http://blog.renyimin.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.renyimin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linuxç¼–è¾‘å™¨</title>
    <link href="http://blog.renyimin.com/2018/05/17/linux/2018-05-17/"/>
    <id>http://blog.renyimin.com/2018/05/17/linux/2018-05-17/</id>
    <published>2018-05-17T06:17:57.000Z</published>
    <updated>2018-05-17T06:21:20.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><h3 id="è·³è½¬"><a href="#è·³è½¬" class="headerlink" title="è·³è½¬"></a>è·³è½¬</h3><p>å…‰æ ‡è·³è½¬åˆ°æŸè¡Œ<br>å…‰æ ‡è·³è½¬åˆ°è¡Œé¦–<br>å…‰æ ‡è·³è½¬åˆ°è¡Œå°¾</p><h3 id="å¤åˆ¶ç²˜è´´"><a href="#å¤åˆ¶ç²˜è´´" class="headerlink" title="å¤åˆ¶ç²˜è´´"></a>å¤åˆ¶ç²˜è´´</h3><p>å¤åˆ¶å½“å‰è¡Œ<br>å¤åˆ¶ä»å½“å‰è¡Œå¼€å§‹å¤šå°‘è¡Œ<br>å¤åˆ¶æŒ‡å®šæŸå‡ è¡Œ</p><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><h3 id="æ›¿æ¢"><a href="#æ›¿æ¢" class="headerlink" title="æ›¿æ¢"></a>æ›¿æ¢</h3><h3 id="åˆ†å±"><a href="#åˆ†å±" class="headerlink" title="åˆ†å±"></a>åˆ†å±</h3><p>å‚ç›´<br>æ°´å¹³<br>åˆ†å±åˆ‡æ¢ç„¦ç‚¹</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;vim&quot;&gt;&lt;a href=&quot;#vim&quot; class=&quot;headerlink&quot; title=&quot;vim&quot;&gt;&lt;/a&gt;vim&lt;/h2&gt;&lt;h3 id=&quot;è·³è½¬&quot;&gt;&lt;a href=&quot;#è·³è½¬&quot; class=&quot;headerlink&quot; title=&quot;è·³è½¬&quot;&gt;&lt;/a&gt;è·³è½¬&lt;/h3&gt;&lt;p
      
    
    </summary>
    
      <category term="Linux" scheme="http://blog.renyimin.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.renyimin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linuxæ–‡æœ¬å¤„ç† - sort, uniq, wc</title>
    <link href="http://blog.renyimin.com/2018/05/16/linux/2018-05-16-other-command/"/>
    <id>http://blog.renyimin.com/2018/05/16/linux/2018-05-16-other-command/</id>
    <published>2018-05-16T07:28:21.000Z</published>
    <updated>2018-05-23T05:27:37.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><ol><li>Linux <code>sort</code>å‘½ä»¤ç”¨äºå°†æ–‡æœ¬æ–‡ä»¶å†…å®¹ä»¥<code>è¡Œ</code>ä¸ºå•ä½è¿›è¡Œæ’åº; </li><li><p>è¯­æ³•: <code>sort [-bcdfimMnr][-o&lt;è¾“å‡ºæ–‡ä»¶&gt;][-t&lt;åˆ†éš”å­—ç¬¦&gt;][+&lt;èµ·å§‹æ ä½&gt;-&lt;ç»“æŸæ ä½&gt;][--help][--verison][æ–‡ä»¶]</code><br> <code>sort</code> å‘½ä»¤æ—¢å¯ä»¥ä»ç‰¹å®šçš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä» stdin ä¸­è·å–è¾“å…¥;</p></li><li><p>é€‰é¡¹</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">-bï¼šå¿½ç•¥æ¯è¡Œå‰é¢å¼€å§‹å‡ºçš„ç©ºæ ¼å­—ç¬¦ï¼›</div><div class="line">-cï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²ç»æŒ‰ç…§é¡ºåºæ’åºï¼›</div><div class="line">-dï¼šæ’åºæ—¶ï¼Œå¤„ç†è‹±æ–‡å­—æ¯ã€æ•°å­—åŠç©ºæ ¼å­—ç¬¦å¤–ï¼Œå¿½ç•¥å…¶ä»–çš„å­—ç¬¦ï¼›</div><div class="line">-fï¼šæ’åºæ—¶ï¼Œå°†å°å†™å­—æ¯è§†ä¸ºå¤§å†™å­—æ¯ï¼›</div><div class="line">-iï¼šæ’åºæ—¶ï¼Œé™¤äº†040è‡³176ä¹‹é—´çš„ASCIIå­—ç¬¦å¤–ï¼Œå¿½ç•¥å…¶ä»–çš„å­—ç¬¦ï¼›</div><div class="line">-mï¼šå°†å‡ ä¸ªæ’åºå·çš„æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼›</div><div class="line">-Mï¼šå°†å‰é¢3ä¸ªå­—æ¯ä¾ç…§æœˆä»½çš„ç¼©å†™è¿›è¡Œæ’åºï¼›</div><div class="line">-nï¼šä¾ç…§æ•°å€¼çš„å¤§å°æ’åºï¼›</div><div class="line">-o&lt;è¾“å‡ºæ–‡ä»¶&gt;ï¼šå°†æ’åºåçš„ç»“æœå­˜å…¥åˆ¶å®šçš„æ–‡ä»¶ï¼›</div><div class="line">-rï¼šä»¥ç›¸åçš„é¡ºåºæ¥æ’åºï¼›</div><div class="line">-t&lt;åˆ†éš”å­—ç¬¦&gt;ï¼šæŒ‡å®šæ’åºæ—¶æ‰€ç”¨çš„æ ä½åˆ†éš”å­—ç¬¦ï¼›</div><div class="line">+&lt;èµ·å§‹æ ä½&gt;-&lt;ç»“æŸæ ä½&gt;ï¼šä»¥æŒ‡å®šçš„æ ä½æ¥æ’åºï¼ŒèŒƒå›´ç”±èµ·å§‹æ ä½åˆ°ç»“æŸæ ä½çš„å‰ä¸€æ ä½ã€‚</div></pre></td></tr></table></figure></li><li><p>ç›®å‰å¸¸ç”¨çš„é€‰é¡¹æœ‰ <code>-nr</code></p></li></ol><h2 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h2><ol><li><p><code>uniq</code> å‘½ä»¤ç”¨äºæŠ¥å‘Šæˆ–å¿½ç•¥æ–‡ä»¶ä¸­çš„é‡å¤è¡Œï¼Œä¸€èˆ¬ä¸sortå‘½ä»¤ç»“åˆä½¿ç”¨; </p><ul><li>ä¹‹æ‰€ä»¥è¦å’Œsortå‘½ä»¤ç»“åˆä½¿ç”¨, æ˜¯å› ä¸º<code>uniq</code>å‘½ä»¤å€¼åªå¯ä»¥åˆ é™¤ç›¸é‚»çš„é‡å¤è¡Œ;</li><li>å¦‚æœä¸€æ–‡æœ¬ä¸­æœ‰é‡å¤å´ä¸ç›¸é‚»çš„è¡Œ, å•ç‹¬ä½¿ç”¨<code>uniq</code>å‘½ä»¤åˆ™æ— æ³•åˆ é™¤, éœ€è¦ç»“åˆsortå‘½ä»¤;</li></ul></li><li><p>è¯­æ³•: <code>uniq [-cdu][-f&lt;æ ä½&gt;][-s&lt;å­—ç¬¦ä½ç½®&gt;][-w&lt;å­—ç¬¦ä½ç½®&gt;][--help][--version][è¾“å…¥æ–‡ä»¶][è¾“å‡ºæ–‡ä»¶]</code></p></li><li><p>é€‰é¡¹:</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-cæˆ–â€”â€”countï¼šåœ¨æ¯åˆ—æ—è¾¹(è²Œä¼¼æ˜¯å·¦è¾¹)æ˜¾ç¤ºè¯¥è¡Œé‡å¤å‡ºç°çš„æ¬¡æ•°ï¼›</div><div class="line">-dæˆ–--repeatedï¼šä»…æ˜¾ç¤ºé‡å¤å‡ºç°çš„è¡Œåˆ—ï¼›</div><div class="line">-f&lt;æ ä½&gt;æˆ–--skip-fields=&lt;æ ä½&gt;ï¼šå¿½ç•¥æ¯”è¾ƒæŒ‡å®šçš„æ ä½ï¼›</div><div class="line">-s&lt;å­—ç¬¦ä½ç½®&gt;æˆ–--skip-chars=&lt;å­—ç¬¦ä½ç½®&gt;ï¼šå¿½ç•¥æ¯”è¾ƒæŒ‡å®šçš„å­—ç¬¦ï¼›</div><div class="line">-uæˆ–â€”â€”uniqueï¼šä»…æ˜¾ç¤ºå‡ºä¸€æ¬¡çš„è¡Œåˆ—ï¼›</div><div class="line">-w&lt;å­—ç¬¦ä½ç½®&gt;æˆ–--check-chars=&lt;å­—ç¬¦ä½ç½®&gt;ï¼šæŒ‡å®šè¦æ¯”è¾ƒçš„å­—ç¬¦ã€‚</div></pre></td></tr></table></figure></li><li><p>ç›®å‰å¸¸ç”¨çš„é€‰é¡¹æœ‰ <code>-c</code></p></li><li><p>å‚æ•°ä»‹ç»</p><ul><li>è¾“å…¥æ–‡ä»¶: æŒ‡å®šè¦å»é™¤çš„é‡å¤è¡Œæ–‡ä»¶, å¦‚æœä¸æŒ‡å®šæ­¤é¡¹, åˆ™ä»æ ‡å‡†è¯»å–æ•°æ®; </li><li>è¾“å‡ºæ–‡ä»¶: æŒ‡å®šè¦å»é™¤é‡å¤è¡Œåçš„å†…å®¹è¦å†™å…¥çš„è¾“å‡ºæ–‡ä»¶, å¦‚æœä¸æŒ‡å®šæ­¤é€‰é¡¹, åˆ™å°†å†…å®¹æ˜¾ç¤ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡(æ˜¾ç¤ºåˆ°ç»ˆç«¯);</li></ul></li><li><p>å®ä¾‹</p><ul><li>uniq <strong>æ— æ³•å»é™¤ä¸ç›¸é‚»çš„é‡å¤è¡Œ</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ cat uniq.log</div><div class="line">renyimin is a it man</div><div class="line">he has many article</div><div class="line">renyimin comes from shanxi province</div><div class="line">he has many article</div><div class="line"></div><div class="line">// å¯ä»¥çœ‹åˆ°uniqå¹¶æ²¡æœ‰å¯¹ä¸ç›¸é‚»çš„é‡å¤è¡Œè¿›è¡Œå»é‡æ“ä½œ</div><div class="line">renyimindeMacBook-Pro:linux renyimin$ uniq uniq.log</div><div class="line">renyimin is a it man</div><div class="line">he has many article</div><div class="line">renyimin comes from shanxi province</div><div class="line">he has many article</div><div class="line">renyimindeMacBook-Pro:linux renyimin$</div><div class="line">   </div><div class="line">// å¦‚ä¸‹è¿›è¡Œæ’åºåå³å¯</div><div class="line">renyimindeMacBook-Pro:linux renyimin$ sort uniq.log | uniq</div><div class="line">he has many article</div><div class="line">renyimin comes from shanxi province</div><div class="line">renyimin is a it man</div><div class="line">renyimindeMacBook-Pro:linux renyimin$</div></pre></td></tr></table></figure></li></ul></li></ol><pre><code>- `-c` å‚æ•°, å¯¹æ–‡ä»¶ç›¸åŒè¡Œè¿›è¡Œå»é‡, å¹¶ç»Ÿè®¡æ¯è¡Œé‡å¤å‡ºç°çš„æ¬¡æ•° (ç±»ä¼¼äºmysqlçš„groupbyåˆ†ç»„ç»Ÿè®¡)<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ sort uniq.log | uniq -c</div><div class="line">2 he has many article</div><div class="line">1 renyimin comes from shanxi province</div><div class="line">1 renyimin is a it man</div></pre></td></tr></table></figure>- å½“ç„¶, è¿˜å¯ä»¥ç»§ç»­ç»“åˆsortæ¥æŒ‰ç…§é‡å¤æ¡æ•°æœ€å¤šçš„æ¥æ’åº <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ sort uniq.log | uniq -c | sort</div><div class="line">1 renyimin comes from shanxi province</div><div class="line">1 renyimin is a it man</div><div class="line">2 he has many article</div></pre></td></tr></table></figure></code></pre><h2 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h2><ol><li><p>åˆ©ç”¨<code>wc</code>æŒ‡ä»¤æˆ‘ä»¬å¯ä»¥è®¡ç®—æ–‡ä»¶çš„ è¡Œæ•°ã€Byteæ•°ã€å­—æ•°ã€æˆ–æ˜¯åˆ—æ•°, è‹¥ä¸æŒ‡å®šæ–‡ä»¶åç§°ã€æˆ–æ˜¯æ‰€ç»™äºˆçš„æ–‡ä»¶åä¸ºâ€-â€œ, åˆ™wcæŒ‡ä»¤ä¼šä»æ ‡å‡†è¾“å…¥è®¾å¤‡è¯»å–æ•°æ®;</p></li><li><p>è¯­æ³•: <code>wc [-clw][--help][--version][æ–‡ä»¶...]</code></p></li><li><p>é€‰é¡¹</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">-cæˆ–--bytesæˆ–--chars åªæ˜¾ç¤ºBytesæ•°</div><div class="line"></div><div class="line">-læˆ–--lines åªæ˜¾ç¤ºè¡Œæ•°</div><div class="line"></div><div class="line">-wæˆ–--words åªæ˜¾ç¤ºå­—æ•°</div><div class="line"></div><div class="line">--help åœ¨çº¿å¸®åŠ©</div><div class="line"></div><div class="line">--version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</div></pre></td></tr></table></figure></li><li><p>ç›®å‰å¸¸ç”¨çš„é€‰é¡¹æœ‰ <code>-lwc</code> (è²Œä¼¼ä¹Ÿæ˜¯é»˜è®¤çš„é€‰é¡¹, è€Œä¸”æ— è®ºé€‰é¡¹çš„é¡ºåºæ˜¯æ€æ ·çš„, ç»“æœæ€»æ˜¯: â€œè¡Œæ•°, å­—æ•°, å­—èŠ‚æ•°, æ–‡ä»¶åâ€)</p></li><li><p>å®ä¾‹</p><ul><li><p>åŸºæœ¬ç”¨æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ cat uniq.log</div><div class="line">renyimin is a it man</div><div class="line">he has many article</div><div class="line">renyimin comes from shanxi province</div><div class="line">he has many article</div><div class="line">renyimindeMacBook-Pro:linux renyimin$ wc uniq.log</div><div class="line">       4      18      97 uniq.log</div><div class="line">renyimindeMacBook-Pro:linux renyimin$</div></pre></td></tr></table></figure></li><li><p>ç»Ÿè®¡å¤šæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ wc -l uniq.log uniq.log</div><div class="line">       4 uniq.log       // ç¬¬ä¸€ä¸ªæ–‡ä»¶è¡Œæ•°ä¸º4</div><div class="line">       4 uniq.log       // ç¬¬äºŒä¸ªæ–‡ä»¶è¡Œæ•°ä¸º4</div><div class="line">       8 total          // ä¸¤ä¸ªæ–‡ä»¶æ€»çš„è¡Œæ•°ä¸º8</div><div class="line">renyimindeMacBook-Pro:linux renyimin$</div></pre></td></tr></table></figure></li><li><p>ç»“åˆä¹‹å‰çš„ <code>uniq</code>, <code>sort</code> å‘½ä»¤, ç»Ÿè®¡å»é‡åçš„è¡Œæ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">renyimindeMacBook-Pro:linux renyimin$ cat uniq.log</div><div class="line">renyimin is a it man</div><div class="line">he has many article</div><div class="line">renyimin comes from shanxi province</div><div class="line">he has many article</div><div class="line"></div><div class="line">// æ€»å…±æœ‰4è¡Œ</div><div class="line">renyimindeMacBook-Pro:linux renyimin$ sort uniq.log | wc -l</div><div class="line">          4</div><div class="line">// å»é‡åæœ‰3è¡Œ</div><div class="line">renyimindeMacBook-Pro:linux renyimin$ sort uniq.log | uniq -c | wc -l</div><div class="line">          3</div></pre></td></tr></table></figure></li></ul></li></ol><h2 id="nl"><a href="#nl" class="headerlink" title="nl"></a>nl</h2><p>nlå‘½ä»¤åœ¨linuxç³»ç»Ÿä¸­ç”¨æ¥è®¡ç®—æ–‡ä»¶ä¸­è¡Œå·, nl å¯ä»¥å°†è¾“å‡ºçš„æ–‡ä»¶å†…å®¹è‡ªåŠ¨çš„åŠ ä¸Šè¡Œå·, å…¶é»˜è®¤çš„ç»“æœä¸ <code>cat -n</code> æœ‰ç‚¹ä¸å¤ªä¸€æ ·, nl å¯ä»¥å°†è¡Œå·åšæ¯”è¾ƒå¤šçš„æ˜¾ç¤ºè®¾è®¡, åŒ…æ‹¬ä½æ•°ä¸æ˜¯å¦è‡ªåŠ¨è¡¥é½ 0 ç­‰ç­‰çš„åŠŸèƒ½<br>1ï¼å‘½ä»¤æ ¼å¼ : <code>nl [é€‰é¡¹]... [æ–‡ä»¶]...</code><br>2ï¼å‘½ä»¤å‚æ•°ï¼š<br>    -b  ï¼šæŒ‡å®šè¡Œå·æŒ‡å®šçš„æ–¹å¼ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼š<br>    -b a ï¼šè¡¨ç¤ºä¸è®ºæ˜¯å¦ä¸ºç©ºè¡Œï¼Œä¹ŸåŒæ ·åˆ—å‡ºè¡Œå·(ç±»ä¼¼ cat -n)ï¼›<br>    -b t ï¼šå¦‚æœæœ‰ç©ºè¡Œï¼Œç©ºçš„é‚£ä¸€è¡Œä¸è¦åˆ—å‡ºè¡Œå·(é»˜è®¤å€¼)ï¼›<br>    -n  ï¼šåˆ—å‡ºè¡Œå·è¡¨ç¤ºçš„æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸‰ç§ï¼š<br>    -n ln ï¼šè¡Œå·åœ¨è¤å¹•çš„æœ€å·¦æ–¹æ˜¾ç¤ºï¼›<br>    -n rn ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”ä¸åŠ  0 ï¼›<br>    -n rz ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”åŠ  0 ï¼›<br>    -w  ï¼šè¡Œå·æ ä½çš„å ç”¨çš„ä½æ•°ã€‚<br>    -p åœ¨é€»è¾‘å®šç•Œç¬¦å¤„ä¸é‡æ–°å¼€å§‹è®¡ç®—ã€‚</p><ol><li>è¯•ç”¨ <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">$ nl -ba Test.class.php</div><div class="line"> 1&lt;?php</div><div class="line"> 2interface Huma</div><div class="line"> 3&#123;</div><div class="line"> 4     public static function say();</div><div class="line"> 5&#125;</div><div class="line"> 6</div><div class="line"> 7class Male implements Huma</div><div class="line"> 8&#123;</div><div class="line"> 9    private static function say()</div><div class="line">10    &#123;</div><div class="line">11        echo &quot;I am a Male&quot;;</div><div class="line">12    &#125;</div><div class="line">13&#125;</div><div class="line">14</div><div class="line">15class Female implements Huma</div><div class="line">16&#123;</div><div class="line">17    public static function say()</div><div class="line">18    &#123;</div><div class="line">19        echo &quot;I am a Female&quot;;</div><div class="line">20    &#125;</div><div class="line">21&#125;</div></pre></td></tr></table></figure></li></ol><h2 id="å…¶ä»–æ¡ˆä¾‹"><a href="#å…¶ä»–æ¡ˆä¾‹" class="headerlink" title="å…¶ä»–æ¡ˆä¾‹"></a>å…¶ä»–æ¡ˆä¾‹</h2><ol><li>åœ¨å¤šä¸ªæ–‡ä»¶ä¸­åŒ¹é…æŸä¸ªå­—ç¬¦ä¸²(æ¯”å¦‚ â€˜&lt;?phpâ€™), å¹¶åˆ—å‡ºæ–‡ä»¶å: <code>grep &#39;&lt;?php&#39; *.php</code></li></ol><p>é‡ç‚¹è¿˜æ˜¯å¤šç»ƒä¹ â€¦.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;sort&quot;&gt;&lt;a href=&quot;#sort&quot; class=&quot;headerlink&quot; title=&quot;sort&quot;&gt;&lt;/a&gt;sort&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Linux &lt;code&gt;sort&lt;/code&gt;å‘½ä»¤ç”¨äºå°†æ–‡æœ¬æ–‡ä»¶å†…å®¹ä»¥&lt;code&gt;è¡Œ&lt;/code&gt;ä¸ºå•ä½è¿›è¡Œæ’åº
      
    
    </summary>
    
      <category term="Linux" scheme="http://blog.renyimin.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.renyimin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins</title>
    <link href="http://blog.renyimin.com/2018/05/15/Jenkins/2018-05-15-01/"/>
    <id>http://blog.renyimin.com/2018/05/15/Jenkins/2018-05-15-01/</id>
    <published>2018-05-15T10:28:18.000Z</published>
    <updated>2018-05-16T02:28:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://jenkins.io/download/" target="_blank" rel="external">ä¸‹è½½</a>å®‰è£…</p><ol><li><p>é»˜è®¤æƒ…å†µä¸‹, Jenkinsæä¾›äº† æœ€æ–°ç‰ˆæœ¬ å’Œ é•¿æœŸæ”¯æŒç‰ˆæœ¬(LTS) å¯ä¾›ä¸‹è½½;</p><ul><li><a href="https://hub.docker.com/r/jenkins/jenkins/" target="_blank" rel="external">Docker æ‹‰å–</a>Jenkinsé•œåƒ: <code>docker pull jenkins/jenkins:lts</code></li><li>åœ¨æœ¬æœºåˆ›å»ºç›®å½• <code>/Users/renyimin/Desktop/jenkins_home</code>, ä¸‹é¢å°†ä¼šä»¥rootç”¨æˆ·èº«ä»½å°†jenkinså®¹å™¨ä¸­çš„jenkins_homeç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœºä¸Š, é˜²æ­¢å®¹å™¨åˆ é™¤, æ•°æ®ä¸¢å¤±</li><li><a href="https://github.com/jenkinsci/docker/blob/master/README.md" target="_blank" rel="external">Docker è¿è¡Œ</a>: </li><li>åœ¨è¾“å‡ºçš„æ§åˆ¶å°ä¿¡æ¯ä¸­, ä¸€å®šè¦è®°å¾—è®°å½•ç”Ÿæˆçš„ç§˜é’¥ä¸², ç¨åä¼šç”¨åˆ°, å¦‚ä¸‹:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">May 15, 2018 10:55:38 AM jenkins.install.SetupWizard init</div><div class="line">INFO:</div><div class="line"></div><div class="line">*************************************************************</div><div class="line">*************************************************************</div><div class="line">*************************************************************</div><div class="line"></div><div class="line">Jenkins initial setup is required. An admin user has been created and a password generated.</div><div class="line">Please use the following password to proceed to installation:</div><div class="line"></div><div class="line">29b2b48ed7e14cb8bf9f706dde309995</div><div class="line"></div><div class="line">This may also be found at: /var/jenkins_home/secrets/initialAdminPassword</div><div class="line"></div><div class="line">*************************************************************</div><div class="line">*************************************************************</div><div class="line">*************************************************************</div></pre></td></tr></table></figure></li></ul></li><li><p>çœ‹åˆ°ç§˜é’¥ä¸²ç”Ÿæˆ, å°±å¯ä»¥æ‰“å¼€æµè§ˆå™¨, è¾“å…¥ï¼š<a href="http://127.0.0.1:8080" target="_blank" rel="external">http://127.0.0.1:8080</a> è¿›å…¥jenkinsç³»ç»Ÿé…ç½®ç•Œé¢, è¾“å…¥åˆšåˆšè®°å½•çš„ç§˜é’¥ä¸² <code>29b2b48ed7e14cb8bf9f706dde309995</code>:<br> <img src="/img/jenkins/install-01.png" width="500/"></p></li><li><p>ç‚¹ç»§ç»­, åˆ°äº†é€‰æ‹©å®‰è£…æ’ä»¶çš„ç•Œé¢, è¿™é‡Œæˆ‘ä»¬é€‰æ‹©å®‰è£…é»˜è®¤å¸¸ç”¨çš„æ’ä»¶, å¦‚å›¾:<br> <img src="/img/jenkins/install-02.png" width="500/"><br> <img src="/img/jenkins/install-03.png" width="500/"></p></li><li><p>æ’ä»¶å®‰è£…å®Œæˆå, é€‰æ‹©ä»¥adminç®¡ç†å‘˜ç”¨æˆ·ç»§ç»­, å¦‚ä¸‹:<br> <img src="/img/jenkins/install-04.png" width="500/"></p></li><li><p>ç„¶å å¼€å§‹ä½¿ç”¨Jenknsi :<br> <img src="/img/jenkins/install-05.png" width="500/"></p></li><li><p>é€‰æ‹© â€œç”¨æˆ·â€-&gt;â€adminâ€-&gt;è®¾ç½®â€, æŠŠadminç®¡ç†å‘˜è´¦æˆ·çš„å¯†ç ä¿®æ”¹ä¸€ä¸‹, ç„¶åç‚¹å‡»ä¿å­˜, åˆ°æ­¤Jenkinså®‰è£…ç»“æŸ;<br> <img src="/img/jenkins/install-06.png" width="500/"></p></li></ol><p>å‚è€ƒ:<a href="https://www.cnblogs.com/soar1688/p/6833540.html" target="_blank" rel="external">https://www.cnblogs.com/soar1688/p/6833540.html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://jenkins.io/download/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä¸‹è½½&lt;/a&gt;å®‰è£…&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹, Jenkinsæä¾›äº† æœ€æ–°ç‰ˆæœ¬ å’Œ é•¿æœŸæ”¯æŒç‰ˆæœ¬(LTS) å¯ä¾›ä¸‹è½½;
      
    
    </summary>
    
      <category term="æŒç»­é›†æˆ" scheme="http://blog.renyimin.com/categories/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
    
      <category term="æŒç»­é›†æˆ" scheme="http://blog.renyimin.com/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
  </entry>
  
  <entry>
    <title>Linuxæ–‡æœ¬å¤„ç† - grep</title>
    <link href="http://blog.renyimin.com/2018/05/15/linux/2018-05-15-grep/"/>
    <id>http://blog.renyimin.com/2018/05/15/linux/2018-05-15-grep/</id>
    <published>2018-05-15T02:09:02.000Z</published>
    <updated>2018-05-17T06:43:05.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;grep&quot;&gt;&lt;a href=&quot;#grep&quot; class=&quot;headerlink&quot; title=&quot;grep&quot;&gt;&lt;/a&gt;grep&lt;/h2&gt;
      
    
    </summary>
    
      <category term="Linux" scheme="http://blog.renyimin.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.renyimin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linuxæ–‡æœ¬å¤„ç† - sed</title>
    <link href="http://blog.renyimin.com/2018/05/15/linux/2018-05-15-sed/"/>
    <id>http://blog.renyimin.com/2018/05/15/linux/2018-05-15-sed/</id>
    <published>2018-05-15T02:08:21.000Z</published>
    <updated>2018-05-27T14:57:02.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><h3 id="æŸ¥æ‰¾åŒ¹é…æŸä¸ªå­—ç¬¦ä¸²çš„è¡Œ"><a href="#æŸ¥æ‰¾åŒ¹é…æŸä¸ªå­—ç¬¦ä¸²çš„è¡Œ" class="headerlink" title="æŸ¥æ‰¾åŒ¹é…æŸä¸ªå­—ç¬¦ä¸²çš„è¡Œ"></a>æŸ¥æ‰¾åŒ¹é…æŸä¸ªå­—ç¬¦ä¸²çš„è¡Œ</h3><ol><li><p><code>tail -5 c2b_oms.2018-03-29-access.log | sed -n &#39;/2018:18:41:24/p&#39;</code></p><ul><li><code>/p</code> æ˜¯æ‰“å°çš„æ„æ€</li><li><code>-n</code> ä»…æ˜¾ç¤ºscriptå¤„ç†åçš„ç»“æœ, å³: åªæ‰“å°åŒ¹é…åˆ° â€˜2018:18:41:24â€™ çš„è¡Œ</li></ul></li><li></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;sed&quot;&gt;&lt;a href=&quot;#sed&quot; class=&quot;headerlink&quot; title=&quot;sed&quot;&gt;&lt;/a&gt;sed&lt;/h2&gt;&lt;h3 id=&quot;æŸ¥æ‰¾åŒ¹é…æŸä¸ªå­—ç¬¦ä¸²çš„è¡Œ&quot;&gt;&lt;a href=&quot;#æŸ¥æ‰¾åŒ¹é…æŸä¸ªå­—ç¬¦ä¸²çš„è¡Œ&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
      <category term="Linux" scheme="http://blog.renyimin.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.renyimin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>IOç›¸å…³çš„ä¸€äº›æ¦‚å¿µ</title>
    <link href="http://blog.renyimin.com/2018/05/13/socket/2018-05-13-IO/"/>
    <id>http://blog.renyimin.com/2018/05/13/socket/2018-05-13-IO/</id>
    <published>2018-05-13T03:12:19.000Z</published>
    <updated>2018-05-13T12:02:54.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h2><p>åœ¨å¼€å§‹socketç¼–ç¨‹å‰, éœ€è¦å…ˆå¯¹ <code>IO</code> çš„æ¦‚å¿µæœ‰ä¸€å®šçš„è®¤è¯†: </p><ul><li>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨phpçš„fopenæ‰“å¼€æ–‡ä»¶å…³é—­æ–‡ä»¶è¯»è¯»å†™å†™, è¿™å«<code>æœ¬åœ°æ–‡ä»¶IO</code>; </li><li>è€Œåœ¨socketç¼–ç¨‹ä¸­, æœ¬è´¨å…¶å®æ˜¯<code>ç½‘ç»œIO</code>;</li></ul><h2 id="åŒæ­¥å¼‚æ­¥é˜»å¡éé˜»å¡"><a href="#åŒæ­¥å¼‚æ­¥é˜»å¡éé˜»å¡" class="headerlink" title="åŒæ­¥å¼‚æ­¥é˜»å¡éé˜»å¡"></a>åŒæ­¥å¼‚æ­¥é˜»å¡éé˜»å¡</h2><p>ä¹‹å‰åæ­£ä¸€ç›´æä¸æ¸…æ¥šåŒæ­¥å’Œé˜»å¡, å¼‚æ­¥å’Œéé˜»å¡çš„æ¦‚å¿µ, æ€»æ„Ÿè§‰åŒæ­¥å°±æ˜¯é˜»å¡, å¼‚æ­¥å°±æ˜¯éé˜»å¡çš„, æ€»æ˜¯æå¾—æ™•ä¹ä¹çš„, äºæ˜¯å°±é‡æ–°æŸ¥äº†äº›èµ„æ–™è¿›è¡Œäº†æ¢³ç†, å¦‚æœ‰ä¸å¯¹æ¬¢è¿å¤§å®¶æŒ‡æ­£;</p><h3 id="ç®€å•æ¥è¯´"><a href="#ç®€å•æ¥è¯´" class="headerlink" title="ç®€å•æ¥è¯´"></a>ç®€å•æ¥è¯´</h3><p>åŒæ­¥: åŒæ­¥ä½“ç°åœ¨, åœ¨ç­‰å¾…ä¸€ä»¶äº‹æƒ…çš„å¤„ç†ç»“æœæ—¶, å¯¹æ–¹æ˜¯å¦æä¾›é€šçŸ¥æœåŠ¡, å¦‚æœå¯¹æ–¹ä¸æä¾›é€šçŸ¥æœåŠ¡, åˆ™ä¸º åŒæ­¥;</p><p>å¼‚æ­¥: å¼‚æ­¥ä½“ç°åœ¨, åœ¨ç­‰å¾…ä¸€ä»¶äº‹æƒ…çš„å¤„ç†ç»“æœæ—¶, å¯¹æ–¹æ˜¯å¦æä¾›é€šçŸ¥æœåŠ¡, å¦‚æœå¯¹æ–¹æä¾›é€šçŸ¥æœåŠ¡, åˆ™ä¸º å¼‚æ­¥; </p><ul><li>å¯¹äºå¸¸è§çš„Ajaxè¯·æ±‚, å‰ç«¯åœ¨ajaxè¯·æ±‚åé€šå¸¸è¿˜ä¼šæ‰§è¡Œä¸€äº›å…¶ä»–åŠ è½½æ“ä½œ(éé˜»å¡); åœ¨serverç«¯å¤„ç†å®Œå, ä¼šå°†æ•°æ®â€™é€šçŸ¥â€™åˆ°å‰ç«¯é¡µé¢;</li><li>è€Œå¯¹äºæœ€è¿‘æ­£å¥½åœ¨çœ‹çš„RabbitMQæ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ, è™½ç„¶æœ¬è´¨ä¸Šæ¥è¯´ä¹Ÿæ˜¯å¼‚æ­¥çš„(å®ƒæ˜¯é€šè¿‡åˆ†éš”äº†æ•°æ®çš„å‘é€å’Œæ¥æ”¶æ¥è§£è€¦åº”ç”¨, æ•°æ®åœ¨æœ€ç»ˆè¢«æ¶ˆè´¹è€…å¤„ç†å®Œåä¹Ÿä¸ä¼šé€šçŸ¥åˆ°ç”Ÿäº§è€…, å› ä¸ºæ¶ˆæ¯ç³»ç»Ÿé‡‡ç”¨äº†å¾ˆå¤šæ‰‹æ®µå¦‚æŒä¹…åŒ–, é‡è¯•ç­‰æ¥ç¡®ä¿æ¶ˆæ¯ä¸€å®šä¼šè¢«æ‰§è¡Œ), ä½†å®è´¨ä¸Š, æ¶ˆæ¯ä¼šåœ¨å‘é€æˆåŠŸåä¼šç«‹å³å¾—åˆ°å“åº”, æ‰€ä»¥å•å°±ç”Ÿäº§è€…æˆåŠŸç”Ÿäº§æ¶ˆæ¯è¿™ä¸€æ­¥æ¥è¯´, å…¶å®æ˜¯åŒæ­¥çš„;</li></ul><p>é˜»å¡: é˜»å¡ä½“ç°åœ¨, åœ¨ç­‰å¾…ä¸€ä»¶äº‹æƒ…çš„å¤„ç†ç»“æœæ—¶, ä½ æ˜¯å¦è¿˜å»å¹²ç‚¹å…¶ä»–çš„äº‹æƒ…, å¦‚æœä¸å», åˆ™ä¸º é˜»å¡;</p><p>éé˜»å¡: éé˜»å¡ä½“ç°åœ¨, åœ¨ç­‰å¾…ä¸€ä»¶äº‹æƒ…çš„å¤„ç†ç»“æœæ—¶, ä½ æ˜¯å¦è¿˜å»å¹²ç‚¹å…¶ä»–çš„äº‹æƒ…, å¦‚æœå»äº†, åˆ™ä¸º éé˜»å¡;</p><h3 id="ç»“åˆä¾‹å­æ¥è¯´"><a href="#ç»“åˆä¾‹å­æ¥è¯´" class="headerlink" title="ç»“åˆä¾‹å­æ¥è¯´"></a>ç»“åˆä¾‹å­æ¥è¯´</h3><p>æ­¤å¤„æ‰¾äº†ä¸€ä½æœ‹å‹å†™çš„ä¾‹å­, æ„Ÿè§‰å¾ˆä¸é”™<br>åŒæ­¥é˜»å¡: ä½ å» ç”œåœ¨å¿ƒé¦’å¤´ åº—ä¹°å¤ªæé¦’å¤´, é˜¿æ¢…è¯´:â€æš‚æ—¶æ²¡, æ­£åœ¨è’¸å‘¢, <strong>ä½ è‡ªå·±çœ‹ç€ç‚¹å„¿</strong>!â€, äºæ˜¯ä½ å°±ç«™åœ¨æ—è¾¹åªç­‰é¦’å¤´, æ­¤æ—¶çš„ä½ , æ˜¯é˜»å¡çš„, ä¹Ÿæ˜¯åŒæ­¥çš„;</p><ul><li>é˜»å¡è¡¨ç°åœ¨ä½ é™¤äº†ç­‰é¦’å¤´ï¼Œåˆ«çš„ä»€ä¹ˆéƒ½ä¸åšäº†;</li><li>åŒæ­¥è¡¨ç°åœ¨ç­‰é¦’å¤´çš„è¿‡ç¨‹ä¸­, é˜¿æ¢…ä¸æä¾›é€šçŸ¥æœåŠ¡, ä½ ä¸å¾—ä¸è‡ªå·±ä¸»åŠ¨æ£€æŸ¥ ï¼‚é¦’å¤´å‡ºç‚‰ï¼‚ çš„æ¶ˆæ¯;</li></ul><p>åŒæ­¥éé˜»å¡: ä½ å»ç”œåœ¨å¿ƒé¦’å¤´åº—ä¹°å¤ªæé¦’å¤´, é˜¿æ¢…è¯´:ï¼‚æš‚æ—¶æ²¡, æ­£åœ¨è’¸å‘¢, <strong>ä½ è‡ªå·±çœ‹ç€ç‚¹å„¿</strong>!ï¼‚, äºæ˜¯ä½ å°±ç«™åœ¨æ—è¾¹å‘å‘å¾®ä¿¡, ç„¶åé—®ä¸€å¥:ï¼‚å¥½äº†æ²¡ï¼Ÿï¼‚, ç„¶åç©ç©QQæ¸¸æˆ, ç„¶åå†é—®ä¸€å¥:ï¼‚å¥½äº†æ²¡ï¼Ÿï¼‚, æ­¤æ—¶çš„ä½ , æ˜¯éé˜»å¡çš„, ä¸è¿‡å´è¿˜æ˜¯åŒæ­¥çš„;</p><ul><li>éé˜»å¡è¡¨ç°åœ¨ä½ é™¤äº†ç­‰é¦’å¤´, è‡ªå·±è¿˜åœ¨å¹²åˆ«çš„äº‹æƒ…;</li><li>åŒæ­¥è¡¨ç°åœ¨ç­‰é¦’å¤´çš„è¿‡ç¨‹ä¸­, ç”±äºé˜¿æ¢…ä¸æä¾›é€šçŸ¥æœåŠ¡, ä½ ä¸å¾—ä¸è‡ªå·±ä¸»åŠ¨æ£€æŸ¥ ï¼‚é¦’å¤´å‡ºç‚‰ï¼‚ çš„æ¶ˆæ¯;</li></ul><p>å¼‚æ­¥é˜»å¡: ä½ å»ç”œåœ¨å¿ƒé¦’å¤´åº—ä¹°å¤ªæé¦’å¤´, é˜¿æ¢…è¯´:ï¼‚æš‚æ—¶æ²¡, æ­£åœ¨è’¸å‘¢, è’¸å¥½äº†<strong>æˆ‘æ‰“ç”µè¯å‘Šè¯‰ä½ </strong>!ï¼‚, ä½†ä½ ä¾ç„¶ç«™åœ¨æ—è¾¹åªç­‰é¦’å¤´, æ­¤æ—¶çš„ä½ , æ˜¯é˜»å¡çš„, æ˜¯å¼‚æ­¥çš„;</p><ul><li>é˜»å¡è¡¨ç°åœ¨ä½ é™¤äº†ç­‰é¦’å¤´, ä¹Ÿæ²¡å»å¹²ç‚¹åˆ«çš„ä»€ä¹ˆ(æ¯”å¦‚ç©ç©æ‰‹æœºå•¥çš„);</li><li>å¼‚æ­¥è¡¨ç°åœ¨ç­‰é¦’å¤´çš„è¿‡ç¨‹ä¸­, é˜¿æ¢…æä¾›ç”µè¯é€šçŸ¥ï¼‚é¦’å¤´å‡ºç‚‰ï¼‚çš„æ¶ˆæ¯, ä½ åªéœ€è¦ç­‰é˜¿æ¢…çš„ç”µè¯;</li></ul><p>å¼‚æ­¥éé˜»å¡: ä½ å»ç”œåœ¨å¿ƒé¦’å¤´åº—ä¹°å¤ªæé¦’å¤´, é˜¿æ¢…è¯´:ï¼‚æš‚æ—¶æ²¡, æ­£åœ¨è’¸å‘¢, è’¸å¥½äº†<strong>æˆ‘æ‰“ç”µè¯å‘Šè¯‰ä½ </strong>!ï¼‚, äºæ˜¯ä½ å°±èµ°äº†, å»ä¹°äº†åŒæ–°çƒé‹, çœ‹äº†çœ‹æ­¦é¦†, æ€»ä¹‹, ä»æ­¤ä¸å†è¿‡é—®é¦’å¤´çš„äº‹æƒ…, ä¸€å¿ƒåªç­‰é˜¿æ¢…ç”µè¯, æ­¤æ—¶çš„ä½ , æ˜¯éé˜»å¡çš„, æ˜¯å¼‚æ­¥çš„</p><ul><li>éé˜»å¡è¡¨ç°åœ¨ä½ é™¤äº†ç­‰é¦’å¤´, è‡ªå·±è¿˜å»å¹²ç‚¹åˆ«çš„äº‹æƒ…;</li><li>å¼‚æ­¥è¡¨ç°åœ¨ç­‰é¦’å¤´çš„è¿‡ç¨‹ä¸­, é˜¿æ¢…æä¾›ç”µè¯é€šçŸ¥ï¼‚é¦’å¤´å‡ºç‚‰ï¼‚çš„æ¶ˆæ¯, ä½ åªéœ€è¦ç­‰é˜¿æ¢…çš„ç”µè¯;</li></ul><p><a href="https://www.jianshu.com/p/5d00d25ef18a?utm_campaign=hugo&amp;utm_medium=reader_share&amp;utm_content=note&amp;utm_source=weixin-friends" target="_blank" rel="external">å‚è€ƒ</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;IO&quot;&gt;&lt;a href=&quot;#IO&quot; class=&quot;headerlink&quot; title=&quot;IO&quot;&gt;&lt;/a&gt;IO&lt;/h2&gt;&lt;p&gt;åœ¨å¼€å§‹socketç¼–ç¨‹å‰, éœ€è¦å…ˆå¯¹ &lt;code&gt;IO&lt;/code&gt; çš„æ¦‚å¿µæœ‰ä¸€å®šçš„è®¤è¯†: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬é€šå¸¸ä½¿ç”¨phpçš„
      
    
    </summary>
    
      <category term="Socket" scheme="http://blog.renyimin.com/categories/Socket/"/>
    
    
      <category term="Socket" scheme="http://blog.renyimin.com/tags/Socket/"/>
    
  </entry>
  
  <entry>
    <title>Linuxè½¯ä»¶å®‰è£…</title>
    <link href="http://blog.renyimin.com/2018/05/13/linux/2018-05-13-install/"/>
    <id>http://blog.renyimin.com/2018/05/13/linux/2018-05-13-install/</id>
    <published>2018-05-13T03:02:35.000Z</published>
    <updated>2018-05-17T06:24:28.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h2><h2 id="rpm"><a href="#rpm" class="headerlink" title="rpm"></a>rpm</h2><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;yum&quot;&gt;&lt;a href=&quot;#yum&quot; class=&quot;headerlink&quot; title=&quot;yum&quot;&gt;&lt;/a&gt;yum&lt;/h2&gt;&lt;h2 id=&quot;rpm&quot;&gt;&lt;a href=&quot;#rpm&quot; class=&quot;headerlink&quot; title=&quot;rpm&quot;&gt;&lt;/a&gt;rpm&lt;/h
      
    
    </summary>
    
      <category term="Linux" scheme="http://blog.renyimin.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.renyimin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linuxç³»ç»Ÿç›‘æ§</title>
    <link href="http://blog.renyimin.com/2018/05/10/linux/2018-05-10-system-monitor/"/>
    <id>http://blog.renyimin.com/2018/05/10/linux/2018-05-10-system-monitor/</id>
    <published>2018-05-10T05:20:29.000Z</published>
    <updated>2018-05-17T06:27:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://segmentfault.com/a/1190000005621984" target="_blank" rel="external">https://segmentfault.com/a/1190000005621984</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000005621984&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://segmentfault.com/a/1190000005621984&lt;/a&gt;&lt;/p&gt;

      
    
    </summary>
    
      <category term="Linux" scheme="http://blog.renyimin.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.renyimin.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>PHP-X</title>
    <link href="http://blog.renyimin.com/2018/05/09/PHP/2018-05-09-PHP-X/"/>
    <id>http://blog.renyimin.com/2018/05/09/PHP/2018-05-09-PHP-X/</id>
    <published>2018-05-09T12:29:31.000Z</published>
    <updated>2018-05-09T12:39:45.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://wiki.swoole.com/wiki/index/prid-15" target="_blank" rel="external">https://wiki.swoole.com/wiki/index/prid-15</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://wiki.swoole.com/wiki/index/prid-15&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://wiki.swoole.com/wiki/index/prid-15&lt;/a&gt;&lt;/p&gt;

      
    
    </summary>
    
      <category term="PHP" scheme="http://blog.renyimin.com/categories/PHP/"/>
    
    
      <category term="PHP" scheme="http://blog.renyimin.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>01.</title>
    <link href="http://blog.renyimin.com/2018/04/28/oauth/2018-04-28-CAS/"/>
    <id>http://blog.renyimin.com/2018/04/28/oauth/2018-04-28-CAS/</id>
    <published>2018-04-28T13:10:12.000Z</published>
    <updated>2018-05-02T08:07:37.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Single-Sign-On"><a href="#Single-Sign-On" class="headerlink" title="Single Sign On"></a>Single Sign On</h2><p>å•ç‚¹ç™»å½•(Single Sign On), ç®€ç§°ä¸º<code>SSO</code>, æ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ä¼ä¸šä¸šåŠ¡æ•´åˆçš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€;<br>SSOçš„å®šä¹‰æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­, ç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿ;</p><h2 id="CASç®€ä»‹"><a href="#CASç®€ä»‹" class="headerlink" title="CASç®€ä»‹"></a><a href="https://www.apereo.org/" target="_blank" rel="external">CAS</a>ç®€ä»‹</h2><ol><li><a href="https://www.apereo.org/projects/cas" target="_blank" rel="external">CAS</a>ç”±Yaleè€¶é²å¤§å­¦ç ”å‘çš„ä¸€æ¬¾å¼€æºçš„,ä¼ä¸šçº§,SSOå•ç‚¹ç™»å½•è§£å†³æ–¹æ¡ˆ;</li><li><a href="https://github.com/apereo/cas" target="_blank" rel="external">CAS Github æºç ä¸‹è½½</a>, è¿™é‡Œä½¿ç”¨çš„æ˜¯CAS5.1.9</li><li><a href="https://apereo.github.io/cas/5.1.x/" target="_blank" rel="external">CAS æ–‡æ¡£</a><h3 id="CASç³»ç»Ÿç»„ä»¶"><a href="#CASç³»ç»Ÿç»„ä»¶" class="headerlink" title="CASç³»ç»Ÿç»„ä»¶"></a>CASç³»ç»Ÿç»„ä»¶</h3>CASç³»ç»Ÿæ¶æ„ç”± <code>CAS Server</code> å’Œ <code>CAS Client</code> ä¸¤ä¸ªç‰©ç†ç»„ä»¶æ„æˆ, å®ƒä»¬é€šè¿‡å„ç§åè®®è¿›è¡Œé€šä¿¡;<h3 id="CAS-Server"><a href="#CAS-Server" class="headerlink" title="CAS Server"></a>CAS Server</h3></li><li>CASæœåŠ¡å™¨æ˜¯åŸºäºSpringæ¡†æ¶æ„å»ºçš„Java servlet, å…¶ä¸»è¦èŒè´£æ˜¯éªŒè¯ç”¨æˆ·, å¹¶é€šè¿‡å‘å¸ƒå’ŒéªŒè¯ç¥¨è¯æ¥å¯¹ å¯ç”¨CASçš„æœåŠ¡(é€šå¸¸ç§°ä¸ºCASå®¢æˆ·ç«¯)çš„è®¿é—®æƒé™ è¿›è¡Œæˆæƒ;<br>æœåŠ¡å™¨åœ¨æˆåŠŸç™»å½•å, ä¼šå‘ç”¨æˆ·æˆäºˆ <code>ç¥¨è¯(TGT)</code>æ—¶åˆ›å»ºSSOä¼šè¯;<br>æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚, é€šè¿‡ä½¿ç”¨TGTä½œä¸ºæ ‡è®°çš„æµè§ˆå™¨é‡å®šå‘å‘æœåŠ¡å‘å‡ºæœåŠ¡ç¥¨æ®(ST);<br>STéšåé€šè¿‡åå‘ä¿¡é“é€šä¿¡åœ¨CASæœåŠ¡å™¨ä¸Šè¿›è¡ŒéªŒè¯ã€‚ CAS Protocolæ–‡æ¡£ä¸­è¯¦ç»†æè¿°äº†è¿™äº›äº¤äº’;</li></ol><h3 id="CAS-Client"><a href="#CAS-Client" class="headerlink" title="CAS Client"></a>CAS Client</h3><h2 id="CAS-Serveræ­å»º"><a href="#CAS-Serveræ­å»º" class="headerlink" title="CAS Serveræ­å»º"></a>CAS Serveræ­å»º</h2><ol><li><code>CAS</code> å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ† <code>CAS Server</code> å’Œ <code>CAS Client</code></li></ol><ul><li><code>CAS Server</code> ç”¨æ¥è´Ÿè´£ç”¨æˆ·çš„è®¤è¯å·¥ä½œ, å°±åƒæ˜¯æŠŠç¬¬ä¸€æ¬¡ç™»å½•ç”¨æˆ·çš„ä¸€ä¸ªæ ‡è¯†å­˜åœ¨è¿™é‡Œ, ä»¥ä¾¿æ­¤ç”¨æˆ·åœ¨å…¶ä»–ç³»ç»Ÿç™»å½•æ—¶éªŒè¯å…¶éœ€ä¸éœ€è¦å†æ¬¡ç™»å½•;</li><li><code>CAS Client</code> å°±æ˜¯æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨, éœ€è¦æ¥å…¥<code>CAS Server</code>ç«¯; å½“ç”¨æˆ·è®¿é—®æˆ‘ä»¬çš„åº”ç”¨æ—¶, é¦–å…ˆéœ€è¦é‡å®šå‘åˆ°CAS Serverç«¯è¿›è¡ŒéªŒè¯, è¦æ˜¯åŸæ¥ç™»é™†è¿‡, å°±å…å»ç™»å½•, é‡å®šå‘åˆ°ä¸‹æ¸¸ç³»ç»Ÿ, å¦åˆ™è¿›è¡Œç”¨æˆ·åå¯†ç ç™»é™†æ“ä½œ;</li></ul><ol><li>æœ¯è¯­<br>Ticket Granting ticket (TGT): å¯ä»¥è®¤ä¸ºæ˜¯CAS Serveræ ¹æ®ç”¨æˆ·è´¦å·å’Œå¯†ç ç”Ÿæˆçš„ä¸€å¼ ç¥¨, å­˜åœ¨CAS Serverç«¯;<br>Ticket-granting cookie (TGC): å…¶å®å°±æ˜¯ä¸€ä¸ªcookie, å­˜æ”¾ç”¨æˆ·èº«ä»½ä¿¡æ¯, ç”±CAS Serverå‘ç»™CAS Clientç«¯;<br>Service ticket (ST): ç”±TGTç”Ÿæˆçš„ä¸€æ¬¡æ€§ç¥¨æ®, ç”¨äºéªŒè¯, åªèƒ½ç”¨ä¸€æ¬¡ã€‚ç›¸å½“äºserverå‘ç»™clientä¸€å¼ ç¥¨, ç„¶åclientæ‹¿ç€è¿™æ˜¯ä¸ªç¥¨å†æ¥æ‰¾serveréªŒè¯, çœ‹çœ‹æ˜¯ä¸æ˜¯serverç­¾å‘çš„;<br>å°±åƒæ˜¯æˆ‘ç»™äº†ä½ ä¸€å¼ æˆ‘çš„ç…§ç‰‡, ç„¶åä½ æ‹¿ç…§ç‰‡å†æ¥é—®æˆ‘, è¿™ä¸ªç…§ç‰‡æ˜¯ä¸æ˜¯ä½ , æ²¡é”™ï¼Œå°±æ˜¯è¿™ä¹ˆæ— èŠ</li></ol><h3 id="TGT-Ticket-Grangting-Ticket"><a href="#TGT-Ticket-Grangting-Ticket" class="headerlink" title="TGT(Ticket Grangting Ticket)"></a>TGT(Ticket Grangting Ticket)</h3><ol><li><code>TGT</code>æ˜¯<code>CAS</code>ä¸ºç”¨æˆ·ç­¾å‘çš„ç™»å½•ç¥¨æ®, æ‹¥æœ‰äº†TGT, ç”¨æˆ·å°±å¯ä»¥è¯æ˜è‡ªå·±åœ¨CASæˆåŠŸç™»å½•è¿‡;<ul><li>TGTå°è£…äº†Cookieå€¼ä»¥åŠæ­¤Cookieå€¼å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯;</li><li>ç”¨æˆ·åœ¨CASè®¤è¯æˆåŠŸå, CASç”Ÿæˆcookie, å†™å…¥æµè§ˆå™¨, åŒæ—¶ç”Ÿæˆä¸€ä¸ªTGTå¯¹è±¡, æ”¾å…¥è‡ªå·±çš„ç¼“å­˜;</li><li>TGTå¯¹è±¡çš„IDå°±æ˜¯cookieçš„å€¼</li><li>å½“HTTPå†æ¬¡è¯·æ±‚åˆ°æ¥æ—¶, å¦‚æœä¼ è¿‡æ¥çš„æœ‰CASç”Ÿæˆçš„cookie, åˆ™CASä»¥æ­¤cookieå€¼ä¸ºkeyæŸ¥è¯¢ç¼“å­˜ä¸­æœ‰æ— TGT, å¦‚æœæœ‰çš„è¯, åˆ™è¯´æ˜ç”¨æˆ·ä¹‹å‰ç™»å½•è¿‡, å¦‚æœæ²¡æœ‰, åˆ™ç”¨æˆ·éœ€è¦é‡æ–°ç™»å½•;</li></ul></li></ol><p>STï¼ˆService Ticketï¼‰<br>STæ˜¯CASä¸ºç”¨æˆ·ç­¾å‘çš„è®¿é—®æŸä¸€serviceçš„ç¥¨æ®ã€‚ç”¨æˆ·è®¿é—®serviceæ—¶ï¼Œserviceå‘ç°ç”¨æˆ·æ²¡æœ‰STï¼Œåˆ™è¦æ±‚ç”¨æˆ·å»CASè·å–STã€‚ç”¨æˆ·å‘CASå‘å‡ºè·å–STçš„è¯·æ±‚ï¼Œå¦‚æœç”¨æˆ·çš„è¯·æ±‚ä¸­åŒ…å«cookieï¼Œåˆ™CASä¼šä»¥æ­¤cookieå€¼ä¸ºkeyæŸ¥è¯¢ç¼“å­˜ä¸­æœ‰æ— TGTï¼Œå¦‚æœå­˜åœ¨TGTï¼Œåˆ™ç”¨æ­¤TGTç­¾å‘ä¸€ä¸ªSTï¼Œè¿”å›ç»™ç”¨æˆ·ã€‚<br>ç”¨æˆ·å‡­å€ŸSTå»è®¿é—®serviceï¼Œserviceæ‹¿STå»CASéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åï¼Œå…è®¸ç”¨æˆ·è®¿é—®èµ„æºã€‚</p><p>PGTï¼ˆProxy Granting Ticketï¼‰<br>Proxy Serviceçš„ä»£ç†å‡­æ®ã€‚ç”¨æˆ·é€šè¿‡CASæˆåŠŸç™»å½•æŸä¸€Proxy Serviceåï¼ŒCASç”Ÿæˆä¸€ä¸ªPGTå¯¹è±¡ï¼Œç¼“å­˜åœ¨CASæœ¬åœ°ï¼ŒåŒæ—¶å°†PGTçš„å€¼ï¼ˆä¸€ä¸ªUUIDå­—ç¬¦ä¸²ï¼‰å›ä¼ ç»™Proxy Serviceï¼Œå¹¶ä¿å­˜åœ¨Proxy Serviceé‡Œã€‚Proxy Serviceæ‹¿åˆ°PGTåï¼Œå°±å¯ä»¥ä¸ºTarget Serviceï¼ˆback-end serviceï¼‰åšä»£ç†ï¼Œä¸ºå…¶ç”³è¯·PTã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Single-Sign-On&quot;&gt;&lt;a href=&quot;#Single-Sign-On&quot; class=&quot;headerlink&quot; title=&quot;Single Sign On&quot;&gt;&lt;/a&gt;Single Sign On&lt;/h2&gt;&lt;p&gt;å•ç‚¹ç™»å½•(Single Sign On), 
      
    
    </summary>
    
      <category term="OAuth2.0" scheme="http://blog.renyimin.com/categories/OAuth2-0/"/>
    
    
      <category term="OAuth2.0" scheme="http://blog.renyimin.com/tags/OAuth2-0/"/>
    
  </entry>
  
  <entry>
    <title>03. ä¸€äº›æ³¨æ„ç‚¹</title>
    <link href="http://blog.renyimin.com/2018/04/21/OOP/PHP/2018-04-21-OOP-PHP-03/"/>
    <id>http://blog.renyimin.com/2018/04/21/OOP/PHP/2018-04-21-OOP-PHP-03/</id>
    <published>2018-04-21T07:50:21.000Z</published>
    <updated>2018-04-21T11:21:42.000Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>ç±»å¸¸é‡</p><ul><li>ç±»å¸¸é‡æ˜¯å…¬å…±çš„</li><li>åªèƒ½é€šè¿‡<code>ç±»å</code>, ä½¿ç”¨ <code>::</code> é™æ€è®¿é—®ç±»å¸¸é‡ (ä¹Ÿå¯ä»¥ä½¿ç”¨å®ä¾‹åŒ–çš„å¯¹è±¡é€šè¿‡<code>::</code>æ¥è®¿é—®ç±»å¸¸é‡)</li><li>å®¢æˆ·ç«¯ä»£ç ä¸èƒ½å¯¹å…¶è¿›è¡Œæ”¹å˜</li><li>å¸¸é‡å±æ€§ä½¿ç”¨ <code>const</code> å…³é”®å­—æ¥å£°æ˜, ä¸éœ€è¦ä½¿ç”¨ <code>$</code> ç¬¦å·</li><li>å¸¸é‡å±æ€§çš„å€¼åªèƒ½åŒ…å«<strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>çš„å€¼, ä¸èƒ½å°†ä¸€ä¸ªå¯¹è±¡æŒ‡æ´¾ç»™å¸¸é‡</li><li>å½“éœ€è¦åœ¨ç±»çš„æ‰€æœ‰å®ä¾‹ä¸­éƒ½èƒ½è®¿é—®æŸä¸ªå±æ€§, å¹¶ä¸”å±æ€§å€¼æ— éœ€æ”¹å˜æ—¶, åº”è¯¥ä½¿ç”¨å¸¸é‡</li></ul></li><li><p>æŠ½è±¡ç±»</p><ul><li>ä¸èƒ½å®ä¾‹åŒ–æŠ½è±¡ç±»</li><li>æŠ½è±¡ç±»ä¸­åº”è¯¥è‡³å°‘åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³• (ä½†ä¹Ÿä¸æ˜¯å¼ºåˆ¶æ€§çš„)</li><li>æŠ½è±¡æ–¹æ³•ä½¿ç”¨<code>abstract</code>å…³é”®å­—å£°æ˜, ä¸èƒ½æœ‰å…·ä½“çš„å†…å®¹</li><li>æŠ½è±¡æ–¹æ³•ä¸èƒ½æœ‰æ¶ˆæ¯ä½“<code>{}</code>, å¹¶ä¸”éœ€è¦ä»¥<code>;</code>ç»“æŸ</li><li>ç»§æ‰¿æŠ½è±¡æ–¹æ³•çš„å­ç±»å¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•</li><li>ç»§æ‰¿æŠ½è±¡æ–¹æ³•çš„å­ç±»å®ç°äº†æŠ½è±¡ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ä¹‹å, è¿˜åº”è¯¥æ³¨æ„: æ–°å®ç°çš„è¿™ä¸ªæ–¹æ³•çš„è®¿é—®æ§åˆ¶æƒé™ä¸èƒ½æ¯”æŠ½è±¡æ–¹æ³•æ›´ä¸¥æ ¼;</li></ul></li><li><p>æ¥å£</p><ul><li>æ¥å£ç›¸å¯¹äºæŠ½è±¡ç±», å¯èƒ½æ›´æ˜¯å½»åº•çš„, ä¸€ä¸ªçº¯ç²¹çš„æ¨¡æ¿;    </li><li>æ¥å£åªèƒ½å®šä¹‰åŠŸèƒ½, è€Œä¸åŒ…å«å®ç°çš„å†…å®¹;</li><li>ä»»ä½•å®ç°äº†æ¥å£çš„ç±»éƒ½éœ€è¦å®ç°æ¥å£ä¸­æ‰€å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•, å¦åˆ™è¯¥ç±»å¿…é¡»å£°æ˜ä¸º<code>abstract</code>;</li><li>æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½å¿…é¡»å£°æ˜ä¸º <code>public</code>(æˆ–è€…ä¸å£°æ˜æƒé™, é»˜è®¤å°±ä¸ºpublic)</li><li>æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ä¸èƒ½æœ‰æ¶ˆæ¯ä½“<code>{}</code>, å¹¶ä¸”éœ€è¦ä»¥<code>;</code>ç»“æŸ</li><li>ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶<strong>ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»</strong>å’Œ<strong>å®ç°ä»»æ„ä¸ªæ¥å£</strong>, <code>extends</code>å­å¥åº”è¯¥åœ¨<code>inplements</code> å­å¥ä¹‹å‰;</li><li>ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ¦‚å¿µæ˜¯: <strong>å®ç°æ¥å£çš„ç±»æ¥å—äº†å®ƒç»§æ‰¿çš„ç±»ä»¥åŠå®ç°çš„æ¥å£çš„ç±»å‹</strong>; (å¯¹äºé¢å‘å¯¹è±¡æ¥è¯´, ä¾èµ–æŠ½è±¡è€Œä¸ä¾èµ–å…·ä½“)</li></ul></li><li><p>finalå…³é”®å­—</p></li><li><p>~~æœªå®Œå¾…ç»­</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;ç±»å¸¸é‡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç±»å¸¸é‡æ˜¯å…¬å…±çš„&lt;/li&gt;
&lt;li&gt;åªèƒ½é€šè¿‡&lt;code&gt;ç±»å&lt;/code&gt;, ä½¿ç”¨ &lt;code&gt;::&lt;/code&gt; é™æ€è®¿é—®ç±»å¸¸é‡ (ä¹Ÿå¯ä»¥ä½¿ç”¨å®ä¾‹åŒ–çš„å¯¹è±¡é€šè¿‡&lt;code&gt;::&lt;/code&gt;æ¥è®¿é—®ç±»å¸¸é‡)&lt;/li&gt;
&lt;li&gt;
      
    
    </summary>
    
      <category term="OOP" scheme="http://blog.renyimin.com/categories/OOP/"/>
    
    
      <category term="OOP" scheme="http://blog.renyimin.com/tags/OOP/"/>
    
  </entry>
  
</feed>
