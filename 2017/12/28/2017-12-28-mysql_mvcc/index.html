<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>MySQL-InnoDB-MVCC多版本并发控制 | Lant&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="MySQL,MVCC">
    <meta name="description" content="MVCC(Multiversion Concurrency Control)1.先引用《高性能MySQL》中对MVCC的部分介绍   MySQL的大多数事务型存储引擎实现的其实都不是简单的行级锁。基于提升并发性能的考虑, 它们一般都同时实现了多版本并发控制(MVCC)。不仅是MySQL, 包括Oracle,PostgreSQL等其他数据库系统也都实现了MVCC, 但各自的实现机制不尽相同, 因为M">
<meta name="keywords" content="MySQL,MVCC">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL-InnoDB-MVCC多版本并发控制">
<meta property="og:url" content="http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/index.html">
<meta property="og:site_name" content="Lant&#39;s Blog">
<meta property="og:description" content="MVCC(Multiversion Concurrency Control)1.先引用《高性能MySQL》中对MVCC的部分介绍   MySQL的大多数事务型存储引擎实现的其实都不是简单的行级锁。基于提升并发性能的考虑, 它们一般都同时实现了多版本并发控制(MVCC)。不仅是MySQL, 包括Oracle,PostgreSQL等其他数据库系统也都实现了MVCC, 但各自的实现机制不尽相同, 因为M">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://blog.renyimin.com/img/mysql/transaction/mysql_mvcc_jieshao.png">
<meta property="og:image" content="http://blog.renyimin.com/img/mysql/mvcc/yanshi_01.png">
<meta property="og:updated_time" content="2017-12-30T12:01:30.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL-InnoDB-MVCC多版本并发控制">
<meta name="twitter:description" content="MVCC(Multiversion Concurrency Control)1.先引用《高性能MySQL》中对MVCC的部分介绍   MySQL的大多数事务型存储引擎实现的其实都不是简单的行级锁。基于提升并发性能的考虑, 它们一般都同时实现了多版本并发控制(MVCC)。不仅是MySQL, 包括Oracle,PostgreSQL等其他数据库系统也都实现了MVCC, 但各自的实现机制不尽相同, 因为M">
<meta name="twitter:image" content="http://blog.renyimin.com/img/mysql/transaction/mysql_mvcc_jieshao.png">
    
        <link rel="alternate" type="application/atom+xml" title="Lant&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.6.13">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar1.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Lant</h5>
          <a href="mailto:564613464@qq.com" title="564613464@qq.com" class="mail">564613464@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/rymuscle" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">MySQL-InnoDB-MVCC多版本并发控制</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">MySQL-InnoDB-MVCC多版本并发控制</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-12-28T13:07:12.000Z" itemprop="datePublished" class="page-time">
  2017-12-28
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/MySQL/">MySQL</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#MVCC"><span class="post-toc-number">1.</span> <span class="post-toc-text">MVCC</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#分析"><span class="post-toc-number">2.</span> <span class="post-toc-text">分析</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#比较算法"><span class="post-toc-number">3.</span> <span class="post-toc-text">比较算法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#对别READ-COMMITED和REPEATABLE-READ"><span class="post-toc-number">4.</span> <span class="post-toc-text">对别READ COMMITED和REPEATABLE READ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#小结"><span class="post-toc-number">5.</span> <span class="post-toc-text">小结</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#本文主要参考和引用如下文章"><span class="post-toc-number">6.</span> <span class="post-toc-text">本文主要参考和引用如下文章</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-2017-12-28-mysql_mvcc"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">MySQL-InnoDB-MVCC多版本并发控制</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-12-28 21:07:12" datetime="2017-12-28T13:07:12.000Z"  itemprop="datePublished">2017-12-28</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/MySQL/">MySQL</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="MVCC"><a href="#MVCC" class="headerlink" title="MVCC"></a>MVCC</h2><p>(Multiversion Concurrency Control)<br>1.先引用《高性能MySQL》中对MVCC的部分介绍</p>
<blockquote>
<ul>
<li><p>MySQL的大多数事务型存储引擎实现的其实都不是简单的行级锁。<strong>基于提升并发性能的考虑</strong>, 它们一般都同时实现了多版本并发控制(MVCC)。不仅是MySQL, 包括Oracle,PostgreSQL等其他数据库系统也都实现了MVCC, 但各自的实现机制不尽相同, 因为MVCC没有一个统一的实现标准。</p>
</li>
<li><p>可以认为MVCC是行级锁的一个变种, 但是它在很多情况下避免了加锁操作, 因此开销更低。虽然实现机制有所不同, 但大都实现了非阻塞的读操作，写操作也只锁定必要的行。</p>
</li>
<li><p>MVCC的实现方式有多种, 典型的有乐观(optimistic)并发控制 和 悲观(pessimistic)并发控制。</p>
</li>
<li><p>MVCC只在 <code>READ COMMITTED</code> 和 <code>REPEATABLE READ</code> 两个隔离级别下工作。其他两个隔离级别够和MVCC不兼容, 因为 <code>READ UNCOMMITTED</code> 总是读取最新的数据行, 而不是符合当前事务版本的数据行。而 <code>SERIALIZABLE</code> 则会对所有读取的行都加锁。</p>
</li>
</ul>
</blockquote>
<p>2.可以了解到:</p>
<ul>
<li>MVCC是被Mysql中<code>事务型存储引擎InnoDB</code>所支持的;</li>
<li><strong>应对高并发事务, MVCC比单纯的加行锁更有效, 开销更小</strong>;</li>
<li>MVCC只在 <code>READ COMMITTED</code> 和 <code>REPEATABLE READ</code> 两个隔离级别下工作;</li>
<li>MVCC可以使用 <code>乐观(optimistic)锁</code> 和 <code>悲观(pessimistic)锁</code>来实现;</li>
</ul>
<p>3.另外, 《高性能Mysql》中提到, InnoDB的MVCC是通过在每行记录后面保存<strong>两个隐藏的列</strong>来实现的….. 这个貌似和网上很多观点不同, 具体可以参考<a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-multi-versioning.html" target="_blank" rel="external">MySQL官方对InnoDB-MVCC的解释</a><br>    <img src="/img/mysql/transaction/mysql_mvcc_jieshao.png" width="607" height="450"><br>    <strong>可以看到, InnoDB存储引擎在数据库每行数据的后面添加了三个字段, 不是两个!!</strong></p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>1.InnoDB存储引擎在数据库每行数据的后面添加了三个字段</p>
<ul>
<li><p>6字节的事务ID(<code>DB_TRX_ID</code>)字段: 标记了最新更新这条行记录的transaction id，每处理一个事务，其值自动+1<br>  另外，删除在内部被视为一个更新，其中行中的特殊位被设置为将其标记为已删除</p>
</li>
<li><p>7字节的回滚指针(<code>DB_ROLL_PTR</code>)字段 : 指向当前记录项的rollback segment的 <code>undo log</code>(撤销日志记录), 找之前版本的数据就是通过这个指针。</p>
</li>
<li><p>6字节的<code>DB_ROW_ID</code>字段: 当由innodb自动产生聚集索引时，聚集索引包括这个DB_ROW_ID的值，否则聚集索引中不包括这个值，这个用于索引当中。<br>  结合聚簇索引的相关知识点, 我的理解是, 如果我们的表中有主键或合适的唯一索引, 也就是无法生成聚簇索引的时候, InnoDB会帮我们自动生成聚集索引, 但聚簇索引会使用DB_ROW_ID的值来作为主键; 如果我们有自己的主键或者合适的唯一索引, 那么聚簇索引中也就不会包含 DB_ROW_ID 了 。<br>  关于聚簇索引, 《高性能MySQL》中的篇幅对我来说已经够用了, 稍后会整理一下以前的学习笔记, 然后更新上来。</p>
</li>
</ul>
<p>2.下面通过一个案例来演示一下事务对某行记录的更新过程<br><img src="/img/mysql/mvcc/yanshi_01.png" width="600" height="819/"></p>
<ol>
<li><code>read view</code> </li>
</ol>
<ul>
<li>判断当前版本数据项是否可见</li>
<li>在innodb中, 每创建一个新事务, 存储引擎都会将当前系统中的活跃事务列表(trx_sys-&gt;trx_list)创建一个副本(<code>read view</code>), 副本中保存的是系统中当前不应该被本事务看到的其他事务id列表。</li>
<li>当用户在事务中要读取某行记录的时候, innodb会将该行当前的版本号与该read view进行比较, 下面介绍 <code>比较算法</code> ;</li>
</ul>
<h2 id="比较算法"><a href="#比较算法" class="headerlink" title="比较算法"></a>比较算法</h2><p>设该行的当前事务id为<code>trx_id_current</code>, <code>read view</code>中该行最早的事务id为<code>trx_id_first</code>, 最迟的事务id为<code>trx_id_last</code></p>
<ol>
<li>如果<code>trx_id_current &lt; trx_id_first</code>, 那就表示<br> 当前事务在读取该行记录的时候, 给该行数据设置的隐藏事务ID字段的值, 比<code>read view</code>中记录的 ‘当前系统中其他事务给该行记录设置的事务ID都要小’。<br> 这就意味着, 当前所有和该行记录有关的事务中, 当前事务是第一个读取到该行记录的, 没有任何在当前事务前面对该行数据做过更改但还没有提交的事务, 所以当前事务可以直接拿到表中<strong>稳定的数据</strong>!</li>
<li>如果<code>trx_id_current &gt; trx_id_last</code> 的话，那就表示<br> 当前事务在读取该行记录的时候, 给该行数据设置的隐藏事务ID字段的值, 比<code>read view</code>中记录的 ‘当前系统中其他事务给该行记录设置的事务ID都要大’。<br> 这就意味着, 当前所有和该行记录有关的事务中, 当前事务是最后一个读取到该行记录的, 所以需要从该行记录的<code>DB_ROLL_PTR</code>指针所指向的回滚段中取出最新的undo-log的版本号, 将它赋值给<code>trx_id_current</code>，然后继续重新开始整套比较算法, 这么迭代下去, 会在undo-log中一层层往下找下去, 最终就会取到<strong>稳定的数据</strong>!</li>
<li>如果 <code>trx_id_first &lt; trx_id_current &lt; trx_id_last</code>, 同上;</li>
</ol>
<h2 id="对别READ-COMMITED和REPEATABLE-READ"><a href="#对别READ-COMMITED和REPEATABLE-READ" class="headerlink" title="对别READ COMMITED和REPEATABLE READ"></a>对别<code>READ COMMITED</code>和<code>REPEATABLE READ</code></h2><ol>
<li><code>read view</code> 生成原则如果想深入了解的话可以自行百度或者参考<a href="https://www.jianshu.com/p/fd51cb8dc03b" target="_blank" rel="external">fxliutao的博客</a></li>
<li>之前已经了解到 MVCC只在 <code>READ COMMITTED</code> 和 <code>REPEATABLE READ</code> 两个隔离级别下工作;</li>
<li>并且根据 <code>read view</code> 的生成原则, 导致在这两个不同隔离级别下, <code>read committed</code> 总是读最新一份快照数据, 而repeatable read 读事务开始时的行数据版本;<ul>
<li>使得 <code>READ COMMITED</code>   级别能够保证, 只要是当前<strong>语句执行前</strong>已经提交的数据都是可见的**。注意和<code>REPEATABLE READ</code>级别的区!!!</li>
<li>使得 <code>REPEATABLE READ</code> 级别能够保证, 只要是当前<strong>事务执行前</strong>已经提交的数据都是可见的。</li>
</ul>
</li>
</ol>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ol>
<li><p>一般我们认为MVCC有下面几个特点：</p>
<ul>
<li>每行数据都存在一个版本，每次数据更新时都更新该版本</li>
<li>修改时Copy出当前版本, 然后随意修改，各个事务之间无干扰</li>
<li>保存时比较版本号，如果成功(commit)，则覆盖原记录, 失败则放弃copy(rollback)</li>
<li>就是每行都有版本号，保存时根据版本号决定是否成功，<strong>听起来含有乐观锁的味道, 因为这看起来正是，在提交的时候才能知道到底能否提交成功</strong></li>
</ul>
</li>
<li><p>而InnoDB实现MVCC的方式是:</p>
<ul>
<li>事务以排他锁的形式修改原始数据</li>
<li>把修改前的数据存放于undo log，通过回滚指针与主数据关联</li>
<li>修改成功（commit）啥都不做，失败则恢复undo log中的数据（rollback）</li>
</ul>
</li>
<li><p><strong>二者最本质的区别是</strong>: 当修改数据时是否要<code>排他锁定</code>，如果锁定了还算不算是MVCC？</p>
</li>
</ol>
<ul>
<li>Innodb的实现真算不上MVCC, 因为并没有实现核心的多版本共存, <code>undo log</code> 中的内容只是串行化的结果, 记录了多个事务的过程, 不属于多版本共存。但理想的MVCC是难以实现的, 当事务仅修改一行记录使用理想的MVCC模式是没有问题的, 可以通过比较版本号进行回滚, 但当事务影响到多行数据时, 理想的MVCC就无能为力了。</li>
<li>比如, 如果事务A执行理想的MVCC, 修改Row1成功, 而修改Row2失败, 此时需要回滚Row1, 但因为Row1没有被锁定, 其数据可能又被事务B所修改, 如果此时回滚Row1的内容，则会破坏事务B的修改结果，导致事务B违反ACID。 这也正是所谓的 <code>第一类更新丢失</code> 的情况。</li>
<li>也正是因为InnoDB使用的MVCC中结合了排他锁, 不是纯的MVCC, 所以第一类更新丢失是不会出现了, 一般说更新丢失都是指第二类丢失更新。</li>
</ul>
<h2 id="本文主要参考和引用如下文章"><a href="#本文主要参考和引用如下文章" class="headerlink" title="本文主要参考和引用如下文章"></a>本文主要参考和引用如下文章</h2><blockquote>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-multi-versioning.html" target="_blank" rel="external">MySQL官方对InnoDB-MVCC的解释</a><br><a href="https://www.jianshu.com/p/fd51cb8dc03b" target="_blank" rel="external">fxliutao的博客</a>然后结合自己的理解重新整理了一篇新的文章;</p>
</blockquote>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        

        
    </div>
    <footer>
        <a href="http://blog.renyimin.com">
            <img src="/img/avatar1.png" alt="Lant">
            Lant
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MVCC/">MVCC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/">MySQL</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/&title=《MySQL-InnoDB-MVCC多版本并发控制》 — Lant's Blog&pic=http://blog.renyimin.com/img/avatar1.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/&title=《MySQL-InnoDB-MVCC多版本并发控制》 — Lant's Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《MySQL-InnoDB-MVCC多版本并发控制》 — Lant's Blog&url=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/&via=http://blog.renyimin.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
      <div class="waves-block waves-effect prev">
        <a href="/2017/12/27/2017-12-27-mysql_transaction-01/" id="post-prev" class="post-nav-link">
          <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i>Prev </div>
          <h4 class="title">MySQL(INNODB引擎)事务浅析</h4>
        </a>
      </div>
    
  
</nav>



    











<section class="comments" id="comments">
    <div id="gitment_thread"></div>
    <link rel="stylesheet" href="//unpkg.com/gitment/style/default.css">
    <script src="//unpkg.com/gitment/dist/gitment.browser.js"></script>
    <script>
        var gitment = new Gitment({
            owner: 'rymuscle',
            repo: 'rymuscle.github.io',
            oauth: {
                client_id: '49b906f6d47dbab8d929',
                client_secret: '17fd73f24f616a09d4c09bca9480e0deba75a9a2',
            },
        })
        gitment.render('comments')
    </script>
</section>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        赞赏支持
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Lant &copy; 2015 - 2017</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/&title=《MySQL-InnoDB-MVCC多版本并发控制》 — Lant's Blog&pic=http://blog.renyimin.com/img/avatar1.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/&title=《MySQL-InnoDB-MVCC多版本并发控制》 — Lant's Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《MySQL-InnoDB-MVCC多版本并发控制》 — Lant's Blog&url=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/&via=http://blog.renyimin.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.renyimin.com/2017/12/28/2017-12-28-mysql_mvcc/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACK0lEQVR42u3awa7DIAxE0f7/T+dtKz1BZjxJJezLqkrTwMnCxdifjzyur/F95f89yufVb1ffPjZgwIBxLOPaDnfR+yurJyvsGyoMGDAGMFYR7KllKbMo8y6vw4ABA8aWsQ+O+UuBAQMGDJ1R2zIqy/ppwIUBA8axDCVc6odi++mV57+Yi8OAAeNAhn7q/vvPr9Q3YMCAcRTjMoe+TXSLDVcwYMCA0ZvxVAkzSYn1wufNXDBgwBjA0AuQSoKaN5+5B3MwYMDoykhatdwwWmvOkOaCAQPGAIa+OJe6D6BuQ8YDZ4EwYMA4nKFs8moFRT2A1s78YcCAMYGhb86eahdTrhtpLQwYMEYylBCcpKZuMnzzsmDAgNGa4QbfPBzXtoNGigsDBox2DGURSZuXWx4onqHBgAFjGKPWTqpvB2vlihskDBgwWjPcg7BkWXn6GhUyYcCAcThD38DpwTEvOdRePQwYMLoylKXry3XTWreNY/ktDBgwhjGShgw3TCctIDBgwJjJKO4ozYwy6em6OTuEAQNGa4bbKqEfw+klhFq5FAYMGBMYbsLplhBqeP2ADwYMGL0ZeVNFXoB0n29UM2DAgNGCkSeiSTHA/Wd4pQkDBgwYhzDcIJsksUmRstgnAgMGjEYMt+VLOZJzmy2iMgMMGDBgvNBU4c5olARgwIABIy4P7O/U74EBA8Y0Rq0YoLwIN311G0FgwIAxgZFv2tx0VA+vds8IDBgwujH+AGUFFBkkSEcwAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.13"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.13" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
