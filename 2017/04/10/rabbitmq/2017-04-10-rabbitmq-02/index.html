<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>02.php-amqplib库实例, 详细剖析各参数属性 | Lant&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="RabbitMQ">
    <meta name="description" content="接下来尝试写一个完整的基础版本的 生产者--消费者 demo, 并详细介绍一下常见属性的作用 (可以说非常详尽了);在编写中, 你会发现php-amqplib 中实现的属性还是比较多的, 不过有些属性的实现 rabbitmq不一定支持, 具体可参考; 基础准备 Mac安装rabbitmq比较简单, 自行搜索;  Laravel中通过php-amqplib包来使用RabbitMQ;  compose">
<meta name="keywords" content="RabbitMQ">
<meta property="og:type" content="article">
<meta property="og:title" content="02.php-amqplib库实例, 详细剖析各参数属性">
<meta property="og:url" content="http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/index.html">
<meta property="og:site_name" content="Lant&#39;s Blog">
<meta property="og:description" content="接下来尝试写一个完整的基础版本的 生产者--消费者 demo, 并详细介绍一下常见属性的作用 (可以说非常详尽了);在编写中, 你会发现php-amqplib 中实现的属性还是比较多的, 不过有些属性的实现 rabbitmq不一定支持, 具体可参考; 基础准备 Mac安装rabbitmq比较简单, 自行搜索;  Laravel中通过php-amqplib包来使用RabbitMQ;  compose">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://blog.renyimin.com/img/rabbitmq/exchange_arguments.png">
<meta property="og:image" content="http://blog.renyimin.com/img/rabbitmq/queue_arguments.png">
<meta property="og:updated_time" content="2018-03-14T01:12:30.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="02.php-amqplib库实例, 详细剖析各参数属性">
<meta name="twitter:description" content="接下来尝试写一个完整的基础版本的 生产者--消费者 demo, 并详细介绍一下常见属性的作用 (可以说非常详尽了);在编写中, 你会发现php-amqplib 中实现的属性还是比较多的, 不过有些属性的实现 rabbitmq不一定支持, 具体可参考; 基础准备 Mac安装rabbitmq比较简单, 自行搜索;  Laravel中通过php-amqplib包来使用RabbitMQ;  compose">
<meta name="twitter:image" content="http://blog.renyimin.com/img/rabbitmq/exchange_arguments.png">
    
        <link rel="alternate" type="application/atom+xml" title="Lant&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.6.13">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpeg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Lant</h5>
          <a href="mailto:564613464@qq.com" title="564613464@qq.com" class="mail">564613464@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/rymuscle" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">02.php-amqplib库实例, 详细剖析各参数属性</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">02.php-amqplib库实例, 详细剖析各参数属性</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-04-10T04:21:07.000Z" itemprop="datePublished" class="page-time">
  2017-04-10
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/RabbitMQ/">RabbitMQ</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#基础准备"><span class="post-toc-number">1.</span> <span class="post-toc-text">基础准备</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#核心步骤"><span class="post-toc-number">2.</span> <span class="post-toc-text">核心步骤</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#生产者-各参数详解"><span class="post-toc-number">3.</span> <span class="post-toc-text">生产者 (各参数详解)</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#消费者-各参数详解"><span class="post-toc-number">4.</span> <span class="post-toc-text">消费者 (各参数详解)</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考"><span class="post-toc-number">5.</span> <span class="post-toc-text">参考</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-rabbitmq/2017-04-10-rabbitmq-02"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">02.php-amqplib库实例, 详细剖析各参数属性</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-04-10 12:21:07" datetime="2017-04-10T04:21:07.000Z"  itemprop="datePublished">2017-04-10</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/RabbitMQ/">RabbitMQ</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>接下来尝试写一个完整的基础版本的 <code>生产者--消费者</code> demo, 并详细介绍一下常见属性的作用 (<strong>可以说非常详尽了</strong>);<br>在编写中, 你会发现<a href="https://github.com/php-amqplib/php-amqplib" target="_blank" rel="external"><code>php-amqplib</code></a> 中实现的属性还是比较多的, 不过有些属性的实现 rabbitmq不一定支持, 具体可<a href="https://www.rabbitmq.com/specification.html" target="_blank" rel="external">参考</a>;</p>
<h2 id="基础准备"><a href="#基础准备" class="headerlink" title="基础准备"></a>基础准备</h2><ol>
<li><p>Mac安装rabbitmq比较简单, 自行搜索;</p>
</li>
<li><p>Laravel中通过<a href="https://github.com/php-amqplib/php-amqplib" target="_blank" rel="external">php-amqplib</a>包来使用RabbitMQ;</p>
<ul>
<li>composer安装扩展包 <code>composer require php-amqplib/php-amqplib 2.6.*</code></li>
<li><p>如下引入即可使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">use PhpAmqpLib\Connection\AMQPStreamConnection;</div><div class="line">use PhpAmqpLib\Message\AMQPMessage;</div></pre></td></tr></table></figure>
</li>
<li><p>更多细节查看<a href="http://www.rabbitmq.com/getstarted.html" target="_blank" rel="external">php-qmqp 用法</a>;</p>
</li>
</ul>
</li>
</ol>
<h2 id="核心步骤"><a href="#核心步骤" class="headerlink" title="核心步骤"></a>核心步骤</h2><ul>
<li><p><strong>创建connection(TCP)连接</strong></p>
</li>
<li><p><strong>基于connection连接创建channle信道</strong><br>接下来就是通过channel信道与rabbit-server交互,向rabbit-server发出一些请求</p>
</li>
<li><p><strong>设置信道消费投递策略</strong><br>这一步可根据需要选择有还是没有(通过使用basic_qos()的prefetch_count参数控制)</p>
</li>
<li><p><strong>声明exchange</strong><br>这一步可以省略但是不推荐, 如果省略, 将会使用默认的名为<code>(AMQP default)</code> 的 <code>隐式</code> exchange, <code>direct</code> 且 <code>持久化</code>)<br>默认交换被隐式绑定到每个队列，其中路由密钥等于队列名称 无法显式绑定或取消绑定默认交换 它也不能被删除</p>
</li>
<li><p><strong>声明queue</strong></p>
</li>
<li><p><strong>绑定队列</strong></p>
</li>
<li><p><strong>注意: 以上步骤最好在生产者和消费者中都实现</strong>, 因为你可能会在使用生产者发布消息之前启动消费者，所以也需要在使用消息之前确保队列已存在</p>
</li>
<li><p>接下来, 可以决定代码作为生产者来发送消息, 或者作为消费者来处理消息</p>
</li>
</ul>
<h2 id="生产者-各参数详解"><a href="#生产者-各参数详解" class="headerlink" title="生产者 (各参数详解)"></a>生产者 (各参数详解)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App\Http\Controllers\Test;</div><div class="line"></div><div class="line">use App\Http\Controllers\Controller;</div><div class="line">use PhpAmqpLib\Connection\AMQPStreamConnection;</div><div class="line">use PhpAmqpLib\Message\AMQPMessage;</div><div class="line">use PhpAmqpLib\Wire\AMQPTable;</div><div class="line"></div><div class="line">class RabbitController extends Controller</div><div class="line">&#123;</div><div class="line">    public function producer()</div><div class="line">    &#123;</div><div class="line">        // 1. 创建connection(TCP)连接</div><div class="line">        $connection = new AMQPStreamConnection(</div><div class="line">            &apos;localhost&apos;,</div><div class="line">            5672,</div><div class="line">            &apos;guest&apos;,</div><div class="line">            &apos;guest&apos;,</div><div class="line">            // 默认使用的就是 / 这个vhost</div><div class="line">            &apos;/&apos;,</div><div class="line">            // 下面的这九个参数基本不会用到, 以后用到再做补充</div><div class="line">            false,</div><div class="line">            &apos;AMQPLAIN&apos;,</div><div class="line">            null,</div><div class="line">            &apos;en_US&apos;,</div><div class="line">            3.0,</div><div class="line">            3.0,</div><div class="line">            null,</div><div class="line">            false,</div><div class="line">            0</div><div class="line">        );</div><div class="line"></div><div class="line">        // 2. 基于TCP连接创建channel(信道, 一个connection可以创建很多信道)</div><div class="line">        $channel = $connection-&gt;channel();</div><div class="line"></div><div class="line">        // 接下来将通过信道和rabbit-server进行交互</div><div class="line"></div><div class="line">        // 3. 通过信道, 向rabbit-server申请创建交换机</div><div class="line">        // 可以给交换机设置一些额外的信息 (会在浏览器界面上 每个交换机详情下的&quot;details&quot;中显示出来)</div><div class="line">        // 注意: arguments需要是AMQPTable对象;</div><div class="line">        // 另外, 第一次创建的时候设置好了额外信息, 如果想修改额外信息, 则需要删除交换机重新创建才行</div><div class="line">        // 因为在创建交换机时, 如果发现已经有该交换机, 是不会去重新创建的</div><div class="line">        $arguments = new AMQPTable([</div><div class="line">                &apos;arguments1&apos; =&gt; &apos;想写什么信息都行&apos;,</div><div class="line">                &apos;arguments2&apos; =&gt; [</div><div class="line">                    &apos;想写什么信息都行, 比如声明是那条业务线的&apos;,</div><div class="line">                    &apos;想写什么信息都行, 比如连接信息....&apos;,</div><div class="line">                ]</div><div class="line">            ]</div><div class="line">        );</div><div class="line">        $res = $channel-&gt;exchange_declare(</div><div class="line">            &apos;test&apos;,</div><div class="line">            &apos;direct&apos;,</div><div class="line">            // 如果passive设置为true:</div><div class="line">            // rabbit-server会查看有没有名为test的exchange, 如果有就把名字什么的信息告诉你;没有就会直接报错</div><div class="line">            // 这个参数比较鸡肋, 不过倒是可以用来检查exchange是否存在</div><div class="line">            false,</div><div class="line">            // 将exchange设置为持久的, 持久交换机在rabbit-server重启后会存在, 非持久的则会被清除</div><div class="line">            // 在使用中推荐设置为 true</div><div class="line">            true,</div><div class="line">            // 如果auto_delete设置为true, 当所有队列完成使用后, exchange将会被删除</div><div class="line">            // 注意, 没有队列绑定不算, 只有在绑定了队列,并且之后队列又被全部删除(队列也有该属性), 才会自动删除自己 (和durable无关)</div><div class="line">            // 默认为true, 我们最好使用false</div><div class="line">            false,</div><div class="line">            // 如果设置为true, 表示将该路由设置为内部路由, 生产者将无法直接使用该交换机进行消息发布(发布就会报错)</div><div class="line">            // 因为交换机还可以再绑定交换机 (可以参考:http://www.rabbitmq.com/e2e.html)</div><div class="line">            false,</div><div class="line">            // 默认是false, 则这个函数会有响应结果; 如果为true的话, 则没有响应结果, $res为null;</div><div class="line">            false,</div><div class="line">            //</div><div class="line">            $arguments</div><div class="line">            // ticket 先不解释</div><div class="line">        );</div><div class="line">        // var_dump($res);  // 和nowait的设置有关</div><div class="line"></div><div class="line">        // 可以给队列设置一些额外的信息 (会在浏览器界面上&quot;queues&quot;下的&quot;details&quot;中显示出来)</div><div class="line">        // 注意: arguments需要是AMQPTable对象;</div><div class="line">        // 如果要设置优先级队列的话, 是需要在arguments参数中设置一个名为 x-max-priority 的元素来保证的</div><div class="line">        // 另外, 第一次创建的时候设置好了额外信息, 如果想修改额外信息, 则需要删除队列重新创建才行</div><div class="line">        // 因为在创建队列时, 如果发现已经有了该队列, 是不会去重新创建的</div><div class="line">        $arguments = new AMQPTable([</div><div class="line">                &apos;arguments1&apos; =&gt; &apos;想写什么信息都行&apos;,</div><div class="line">                &apos;arguments2&apos; =&gt; [</div><div class="line">                    &apos;想写什么信息都行, 比如声明是那条业务线的&apos;,</div><div class="line">                    &apos;想写什么信息都行, 比如连接信息....&apos;,</div><div class="line">                ]</div><div class="line">            ]</div><div class="line">        );</div><div class="line"></div><div class="line">        // 4. 通过信道, 向rabbit-server申请创建队列</div><div class="line">        $res = $channel-&gt;queue_declare(</div><div class="line">        // 队列名(后面来如果不显示绑定exchange与queue的话, 则默认将queue绑定到名为 (AMQP default) 的默认隐式交换机 (direct并且持久)</div><div class="line">        // bindingkey与queue同名, 也为hello</div><div class="line">            &apos;hello&apos;,</div><div class="line">            // 如果为true: rabbit-server会查看有没有名为hello的queue, 如果有就把名字什么的信息告诉你; 如果没有就直接报错。(这个参数比较鸡肋, 不过倒是可以用来检查queue是否存在)</div><div class="line">            // 而false就是没有则创建, 有就什么也不做</div><div class="line">            false,</div><div class="line">            // true: 将queue设置为持久的, 持久队列在rabbit-server重启后会存在, 非持久的则会被清除</div><div class="line">            // 在使用中推荐为true</div><div class="line">            true,</div><div class="line">            //  如果设置为true, 则创建的为`排他队列`</div><div class="line">            // 如果一个队列被声明为排他队列, 该队列仅对首次声明它的连接可见, 并在连接断开时自动删除。也就是说, 如果你在生产者中创建排他队列, 则连接结束, 队列就没了, 所以你可能一直看不到创建的队列;</div><div class="line">            // 另外需要注意三点:</div><div class="line">            // 1.排他队列是基于连接可见的, 同一连接的不同信道是可以同时访问同一个连接创建的排他队列的</div><div class="line">            // 2.首次，如果一个连接已经声明了一个排他队列, 其他连接是不允许建立同名的 排他/普通队列的 (这点和普通队列不同, 普通队列多次创建也不会报错)</div><div class="line">            // 3.即使该队列是持久化的,一旦连接关闭或者客户端退出,该排他队列都会被自动删除的</div><div class="line">            // 所以, 排他队列只能由消费者创建, 而且这种队列适用于只有一个消费者消费消息的场景</div><div class="line">            false,</div><div class="line">            // 自动删除(如果启用,那么队列将会在所有的消费者停止使用之后自动删除掉自身, 注意: 没有消费者不算, 只有在有了消费之后, 所有的消费者又断开后, 就会自动删除自己, 和durable无关)</div><div class="line">            false,</div><div class="line">            // 如果为false, 则这个函数会有响应结果; 如果为true的话, 则没有响应结果,$res为null</div><div class="line">            false,</div><div class="line">            // 传递给队列的一些详细信息 (可以在图形控制页 &quot;queues&quot;&gt;&quot;details&quot;中看到效果)</div><div class="line">            $arguments</div><div class="line">            //sticket 先不解释</div><div class="line">        );</div><div class="line">        // var_dump($res);  // 和nowait的设置有关</div><div class="line"></div><div class="line">        // 5. 将queue与exchange使用 bindingkey 进行绑定</div><div class="line">        // 绑定的时候也可以设置一些额外绑定信息</div><div class="line">        $arguments = new AMQPTable([</div><div class="line">                &apos;arguments1&apos; =&gt; &apos;想写什么信息都行&apos;,</div><div class="line">                &apos;arguments2&apos; =&gt; [</div><div class="line">                    &apos;想写什么信息都行, 比如声明是那条业务线的&apos;,</div><div class="line">                    &apos;想写什么信息都行, 比如连接信息....&apos;,</div><div class="line">                ]</div><div class="line">            ]</div><div class="line">        );</div><div class="line">        $res = $channel-&gt;queue_bind(</div><div class="line">            &apos;hello&apos;,</div><div class="line">            &apos;test&apos;,</div><div class="line">            &apos;hello&apos;,</div><div class="line">            false,</div><div class="line">            $arguments</div><div class="line">            //ticket 先不解释</div><div class="line">        );</div><div class="line">        // var_dump($res);  //和nowait的设置有关</div><div class="line"></div><div class="line">        // 6. 一切准备就绪, 接下来该准备消息, 发布消息了</div><div class="line">        // 创建消息对象</div><div class="line">        $msg = new AMQPMessage(</div><div class="line">            // 消息内容, 使用时可以发送json</div><div class="line">            &apos;Hello World!&apos;,</div><div class="line">            // 第二个数组参数稍微复杂 (可以参考:https://github.com/php-amqplib/php-amqplib/blob/b7b677d046a9735e0ad940d649feaf38d58c866c/doc/AMQPMessage.md)</div><div class="line">            [</div><div class="line">                // 持久化标志: 如果你要持久化消息, 则需要设置如下配置项</div><div class="line">                &apos;delivery_mode&apos; =&gt; AMQPMessage::DELIVERY_MODE_PERSISTENT,</div><div class="line">                // MIME content type</div><div class="line">                &apos;content_type&apos; =&gt; &apos;text/plain&apos;,</div><div class="line">                // 消息优先级: 0-9</div><div class="line">                // priority,</div><div class="line">                // correlation_id：关联RPC的请求与响应; 服务端发送消息时的请求标识;</div><div class="line">                // 消费者拿到correlation_id后会原封不动地返回给服务端;</div><div class="line">                // 客户端用自己的correlation_id与服务端返回的id进行对比, 是我的，就接收;</div><div class="line">                // &apos;correlation_id&apos; =&gt; &apos;testId&apos;,</div><div class="line">                // 客户端设定 远程过程调用完, 服务端回复消息到哪个队列 (这个队列也需要提前声明)</div><div class="line">                // &apos;reply_to&apos; =&gt; &apos;queue2&apos;</div><div class="line">                // headers 参数为 AMQPTable 类型</div><div class="line"></div><div class="line">                // 另外还有 如下一些可以供你使用的属性参数(可以自己拿来看具体想怎么用)</div><div class="line">                // message-id</div><div class="line">                // user_id</div><div class="line">                // app_id</div><div class="line">                // type</div><div class="line">                // timestamp</div><div class="line">            ]</div><div class="line">        );</div><div class="line"></div><div class="line">        $res = $channel-&gt;basic_publish(</div><div class="line">            // 发送的消息对象</div><div class="line">            $msg,</div><div class="line">            // 选择的exchange路由</div><div class="line">            &apos;test&apos;,</div><div class="line">            // routingkey 用于和 bingkey 进行匹配</div><div class="line">            &apos;hello&apos;,</div><div class="line">            // 当mandatory设置为true时，如果exchange根据自身类型和消息routeKey无法找到一个符合条件的queue, 那么会调用`basic.return`方法将消息返回给生产者；</div><div class="line">            // 生产者需要使用set_return_listener来监听返回, 而且生产者也要做成像消费者那样是阻塞的,并且命令行启动, 否则接收不到 (所以综合来看, 这个选项目前来说, 没啥用)</div><div class="line">            //当mandatory设置为false时, 出现上述情形broker会直接将消息扔掉</div><div class="line"></div><div class="line">            // immediate, ticket 以后再说</div><div class="line">            false</div><div class="line"></div><div class="line">        );</div><div class="line">        var_dump($res);</div><div class="line"></div><div class="line">        // 如果在上面发布消息时, 设置了mandastory属性为true, 生产者要阻塞监听回调, 如下</div><div class="line">//        $returnListener = function ($replyCode, $replyText, $exchange, $routingKey, $message) &#123;</div><div class="line">//            echo &quot;return: &quot;,</div><div class="line">//            $replyCode, &quot;\n&quot;,</div><div class="line">//            $replyText, &quot;\n&quot;,</div><div class="line">//            $exchange, &quot;\n&quot;,</div><div class="line">//            $routingKey, &quot;\n&quot;,</div><div class="line">//            $message-&gt;body, &quot;\n&quot;;</div><div class="line">//        &#125;;</div><div class="line">//        $channel-&gt;set_return_listener($returnListener);</div><div class="line">//        while (true) &#123;</div><div class="line">//            $channel-&gt;wait();</div><div class="line">//        &#125;</div><div class="line"></div><div class="line">        // 关闭信道</div><div class="line">        $channel-&gt;close();</div><div class="line">        // 关闭connection</div><div class="line">        $connection-&gt;close();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果<br><img src="/img/rabbitmq/exchange_arguments.png" width="450/"><br><img src="/img/rabbitmq/queue_arguments.png" width="450/"></p>
<h2 id="消费者-各参数详解"><a href="#消费者-各参数详解" class="headerlink" title="消费者 (各参数详解)"></a>消费者 (各参数详解)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App\Console\Commands;</div><div class="line"></div><div class="line">use Illuminate\Console\Command;</div><div class="line">use PhpAmqpLib\Connection\AMQPStreamConnection;</div><div class="line">use PhpAmqpLib\Message\AMQPMessage;</div><div class="line"></div><div class="line">class Consumer extends Command</div><div class="line">&#123;</div><div class="line">    /**</div><div class="line">     * The name and signature of the console command.</div><div class="line">     *</div><div class="line">     * @var string</div><div class="line">     */</div><div class="line">    protected $signature = &apos;Consumer&apos;;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * The console command description.</div><div class="line">     *</div><div class="line">     * @var string</div><div class="line">     */</div><div class="line">    protected $description = &apos;测试消费者&apos;;</div><div class="line"></div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        parent::__construct();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Execute the console command.</div><div class="line">     *</div><div class="line">     * @return mixed</div><div class="line">     */</div><div class="line">    public function handle()</div><div class="line">    &#123;</div><div class="line">        // 创建connection(TCP)连接</div><div class="line">        $connection = new AMQPStreamConnection(&apos;127.0.0.1&apos;, 5672, &apos;guest&apos;, &apos;guest&apos;);</div><div class="line">        // 基于TCP连接创建channel(信道, 一个connection可以创建很多信道)</div><div class="line">        $channel = $connection-&gt;channel();</div><div class="line">        // 接下来将通过信道和rabbit-server进行交互</div><div class="line">        // 声明交换机</div><div class="line">        $channel-&gt;exchange_declare(&apos;test&apos;, &apos;direct&apos;, false, true, false);</div><div class="line">        // 声明队列</div><div class="line">        // 这里声明的是持久的, 排他的队列</div><div class="line">        $channel-&gt;queue_declare(&apos;hello&apos;, false, true, false, false);</div><div class="line">        // 绑定队列和交换机</div><div class="line">        $channel-&gt;queue_bind(&apos;hello&apos;, &apos;test&apos;, &apos;hello&apos;);</div><div class="line"></div><div class="line">        // 创建 接收消息的回调函数</div><div class="line">        $backCall = function ($message) &#123;</div><div class="line">            // 消息体在 $message 的body 属性中</div><div class="line">            // $message的delivery_info属性中的信息可以参考: https://github.com/php-amqplib/php-amqplib/blob/b7b677d046a9735e0ad940d649feaf38d58c866c/doc/AMQPMessage.md</div><div class="line">            // 基本如下:</div><div class="line">//            $delivery_info = array(</div><div class="line">//                &quot;channel&quot; =&gt; $this,</div><div class="line">//                &quot;consumer_tag&quot; =&gt; $consumer_tag,</div><div class="line">                  // 请记住, delivery_tag必须有效, 因此大部分时间只需使用服务器提供的那个</div><div class="line">//                &quot;delivery_tag&quot; =&gt; $delivery_tag,</div><div class="line">//                &quot;redelivered&quot; =&gt; $redelivered,</div><div class="line">//                &quot;exchange&quot; =&gt; $exchange,</div><div class="line">//                &quot;routing_key&quot; =&gt; $routing_key</div><div class="line">//            );</div><div class="line">            //如果你不想直接访问delivery_info数组，你也可以使用$msg-&gt;get(&apos;delivery_tag&apos;), 但请记住，这比通过键访问数组慢。</div><div class="line"></div><div class="line">            echo &quot;\n--------\n&quot;;</div><div class="line">            echo $message-&gt;body;</div><div class="line">            echo $message-&gt;delivery_info[&apos;delivery_tag&apos;];</div><div class="line">            echo &quot;\n--------\n&quot;;</div><div class="line">            // 消息ack应答</div><div class="line">            // 服务器分配的和通道专用的交付标签(暂时不用考虑)</div><div class="line">            $message-&gt;delivery_info[&apos;channel&apos;]-&gt;basic_ack($message-&gt;delivery_info[&apos;delivery_tag&apos;]);</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        $res = $channel-&gt;basic_consume(</div><div class="line">            // 消费者监听的队列</div><div class="line">            &apos;hello&apos;,</div><div class="line">            // 消费者标签(如果此字段为空，则服务器将生成唯一标记,暂时不用考虑)</div><div class="line">            &apos;&apos;,</div><div class="line">            // 其实没什么用, 疑问rabbitmq 忽略了它https://github.com/php-amqplib/php-amqplib/issues/550</div><div class="line">            true,</div><div class="line">            // 如果设置, 服务器不会期望这条消息的ack响应, 也就是说, 当消息传送到客户端时, 服务器会假定传送成功并立即将其出列</div><div class="line">            // 此功能可能会提高性能, 但会以可靠性为代价, 如果客户在交付给应用程序之前死亡, 则消息可能会丢失</div><div class="line">            // 所以还是不开启得好 ，默认就是false: 必须得到确认后, 消息才会出队列</div><div class="line">            false,</div><div class="line">            // 以独占的模式进行消费, 只有该消费者能够访问本队列</div><div class="line">            // 如果只是队列设置为exclusive属性的话, 则其他消费者也可以消费队列中的内容,</div><div class="line">            true,</div><div class="line">            false,</div><div class="line">            $backCall);</div><div class="line"></div><div class="line">        while (count($channel-&gt;callbacks)) &#123;</div><div class="line">            $channel-&gt;wait();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.rabbitmq.com/amqp-0-9-1-reference.html" target="_blank" rel="external">官方文档</a></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        

        
    </div>
    <footer>
        <a href="http://blog.renyimin.com">
            <img src="/img/avatar.jpeg" alt="Lant">
            Lant
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RabbitMQ/">RabbitMQ</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/&title=《02.php-amqplib库实例, 详细剖析各参数属性》 — Lant's Blog&pic=http://blog.renyimin.com/img/avatar.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/&title=《02.php-amqplib库实例, 详细剖析各参数属性》 — Lant's Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《02.php-amqplib库实例, 详细剖析各参数属性》 — Lant's Blog&url=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/&via=http://blog.renyimin.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
      <div class="waves-block waves-effect prev">
        <a href="/2017/04/10/rabbitmq/2017-04-10-rabbitmq-01/" id="post-prev" class="post-nav-link">
          <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i>Prev </div>
          <h4 class="title">01.相关概念点详解</h4>
        </a>
      </div>
    
  
    <div class="waves-block waves-effect next">
      <a href="/2017/04/10/rabbitmq/2017-04-10-rabbitmq-03/" id="post-next" class="post-nav-link">
        <div class="tips">Next<i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">03. Exchange Type</h4>
      </a>
    </div>
  
</nav>



    











<section class="comments" id="comments">
    <div id="gitment_thread"></div>
    <link rel="stylesheet" href="//unpkg.com/gitment/style/default.css">
    <script src="//unpkg.com/gitment/dist/gitment.browser.js"></script>
    <script>
        var gitment = new Gitment({
            owner: 'rymuscle',
            repo: 'rymuscle.github.io',
            oauth: {
                client_id: '49b906f6d47dbab8d929',
                client_secret: '17fd73f24f616a09d4c09bca9480e0deba75a9a2',
            },
        })
        gitment.render('comments')
    </script>
</section>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        赞赏支持
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Lant &copy; 2016 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/&title=《02.php-amqplib库实例, 详细剖析各参数属性》 — Lant's Blog&pic=http://blog.renyimin.com/img/avatar.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/&title=《02.php-amqplib库实例, 详细剖析各参数属性》 — Lant's Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《02.php-amqplib库实例, 详细剖析各参数属性》 — Lant's Blog&url=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/&via=http://blog.renyimin.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.renyimin.com/2017/04/10/rabbitmq/2017-04-10-rabbitmq-02/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACqUlEQVR42u3aS04jQRAFQN//0mYzCyQw8/JnZqToVQuDO6MXVcXLfDzi6/nlSj59xtfPT/z8k8fFhYeHhzcu/aLQ6v2rl5jXjIeHh3fNy8tK1uFyET/Wk28SeHh4eP8mr3qf46svDg8PD+//4s2LS2KIyevDw8PDu+YlYcTW8Xrr0+WsBQ8PD6+TA5SPs791f9Lfw8PDwxt31ZNm2Fazf7cJ9+ev8PDw8A54eRGTJlZ+QM/HuZI68fDw8O54SXg6iW4TQF5oUgkeHh7e+3lJY2lriCo5ss/bb3h4eHhbvOSXkiW4urjnm0f1FXzzvwIeHh7eKi8aWhq0xy6ijVFjDA8PD2/My5tY8xh3HjSUa8PDw8M74OVbQj4WkCzi1QCit+bj4eHh3fEmy/H1Qp+/pkKYi4eHhzfgzQeneqReFJJsRYVpMjw8PLwWrxqzNrPh4DCdH+KT74naYHh4eHhLvGr8mh+LexvJwjaAh4eHt8rLB56qBVUX9MkYwctq8fDw8N7Cm49SzcPffMjgL8/Fw8PDO+BV2045KS9o/oKirBoPDw/vgDdvNeUH9ORIXY1oC9NkeHh4eANe8o99ngRXg4zJ9+Dh4eH9Lq96mE6C3Tz27UUSyRaFh4eHd8FLvq4XHCRl5ZtN72iOh4eHd8fbih7mrbIkjKiOFODh4eHd8XqNq/lwQO8phdgCDw8P75g33zB6W0v1qN2MHvDw8PDGvGfx6j2yehyfpCkvp3Hx8PDwlnhbcWrOuLhfuPDw8PCKvF6Qmg9sVdtjvY2hkLXg4eHhLfHyY3HviLyQmuxmFXh4eHhv5OWH5ny5n7TBljcGPDw8vDNePkYwafzn41knM2V4eHh4rQ579aurEcMkEFnOWvDw8PCWuuq95lP1BU2euBBh4OHh4aW8D0JRFtsfa71IAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.13"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.13" async></script>










</body>
</html>
